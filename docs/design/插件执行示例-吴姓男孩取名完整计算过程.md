# æ’ä»¶æ‰§è¡Œç¤ºä¾‹ï¼šå´å§“ç”·å­©å–åå®Œæ•´è®¡ç®—è¿‡ç¨‹

## ğŸ“š æŠ€æœ¯è¯´æ˜ï¼šå­—ç¬¦æ•°æ®åº“ä¸lunaråº“çš„ä½¿ç”¨

### ğŸ¯ **æ ¸å¿ƒè§„åˆ™ï¼šå­—ç¬¦æ•°æ®è·å–æ ‡å‡†**

**âš ï¸ é‡è¦ï¼šæ‰€æœ‰å–åç”¨å­—å¿…é¡»ä¸¥æ ¼éµå¾ªä»¥ä¸‹æ•°æ®è·å–è§„åˆ™**

#### **1. å­—ç¬¦æ•°æ®æ¥æºä¼˜å…ˆçº§**
```typescript
ç¬¬ä¸€ä¼˜å…ˆçº§: final-enhanced-character-database.json (é€šç”¨æ ‡å‡†æ–‡å­—æ•°æ®åº“)
â””â”€â”€ åŒ…å«ï¼šå­—ç¬¦ã€æ‹¼éŸ³ã€å£°è°ƒã€ç¬”ç”»(ç®€ä½“/ç¹ä½“)ã€äº”è¡Œã€éƒ¨é¦–ã€å­—ä¹‰ã€æ ‡å‡†æ€§
â””â”€â”€ ç”¨é€”ï¼šæ‰€æœ‰å–åç”¨å­—çš„å”¯ä¸€åˆæ³•æ¥æº

ç¬¬äºŒä¼˜å…ˆçº§ (ä»…åœ¨ä¸»æ•°æ®åº“ç¼ºå¤±æ—¶ä½¿ç”¨):
â”œâ”€â”€ real-stroke-data.json (ç¬”ç”»æ•°æ®fallback)  
â””â”€â”€ pinyin-processed.json (æ‹¼éŸ³æ•°æ®fallback)
```

#### **2. ç¬”ç”»æ•°æ®ä½¿ç”¨è§„åˆ™**
```typescript
âœ… æ­£ç¡®ï¼šæ‰€æœ‰å‘½ç†è®¡ç®—éƒ½ä½¿ç”¨ç¹ä½“å­—ç¬”ç”»æ•°
- ä¸‰æ‰äº”æ ¼è®¡ç®—ï¼šä½¿ç”¨ strokes.traditional
- å¤©æ ¼äººæ ¼åœ°æ ¼è®¡ç®—ï¼šä½¿ç”¨ strokes.traditional  
- æ€»æ ¼å¤–æ ¼è®¡ç®—ï¼šä½¿ç”¨ strokes.traditional
- æ•°ç†åˆ†æï¼šä½¿ç”¨ strokes.traditional

âŒ é”™è¯¯ï¼šä½¿ç”¨ç®€ä½“å­—ç¬”ç”»è¿›è¡Œå‘½ç†è®¡ç®—
- strokes.simplified ä»…ç”¨äºæ˜¾ç¤ºå’Œç°ä»£åŒ–å‚è€ƒ
```

#### **3. æ•°æ®å®Œæ•´æ€§ä¿éšœ**
```typescript
// ä¸»æ•°æ®åº“æŸ¥è¯¢æ¥å£
interface UnifiedCharacterInfo {
  char: string;                    // å­—ç¬¦
  pinyin: string[];               // æ‹¼éŸ³æ•°ç»„
  primaryPinyin: string;          // ä¸»è¦æ‹¼éŸ³
  tone: number;                   // å£°è°ƒ 1-4
  strokes: {
    simplified: number;           // ç®€ä½“ç¬”ç”»ï¼ˆä»…ä¾›å‚è€ƒï¼‰
    traditional: number;          // ç¹ä½“ç¬”ç”»ï¼ˆå‘½ç†è®¡ç®—ä¸“ç”¨ï¼‰
    kangxi?: number;             // åº·ç†™å­—å…¸ç¬”ç”»
  };
  radical: string;                // éƒ¨é¦–
  wuxing: WuxingElement;          // äº”è¡Œå±æ€§
  traditional?: string;           // ç¹ä½“å­—å½¢
  simplified?: string;            // ç®€ä½“å­—å½¢
  meanings: string[];             // å­—ä¹‰è§£é‡Š
  isStandard: boolean;           // æ˜¯å¦ä¸ºæ ‡å‡†å­—
  sources: string[];             // æ•°æ®æ¥æº
}
```

### ğŸ”§ lunaråº“åŠŸèƒ½è¯´æ˜
æœ¬æ–‡æ¡£ä¸­æ¶‰åŠçš„å†œå†è½¬æ¢ã€å…«å­—è®¡ç®—ã€èŠ‚æ°”åˆ†æç­‰åŠŸèƒ½ï¼Œå·²é‡‡ç”¨æˆç†Ÿçš„ `lunar` åº“æ¥å®ç°ï¼Œè€Œéæ‰‹åŠ¨è®¡ç®—ã€‚

**lunaråº“å·²æä¾›çš„åŠŸèƒ½**ï¼š
- âœ… **å…¬å†è½¬å†œå†**ï¼š`LunarCalendar.getLunarInfo(year, month, day, hour, minute)`
- âœ… **å¹²æ”¯çºªå¹´**ï¼šè‡ªåŠ¨è®¡ç®—å¹´æœˆæ—¥æ—¶çš„å®Œæ•´å¹²æ”¯ä¿¡æ¯
- âœ… **å…«å­—å››æŸ±**ï¼šè·å–å®Œæ•´çš„å…«å­—ä¿¡æ¯å’Œäº”è¡Œç»Ÿè®¡
- âœ… **èŠ‚æ°”ä¿¡æ¯**ï¼šå½“å‰èŠ‚æ°”ã€ä¸‹ä¸€èŠ‚æ°”åŠå…¶æ—¥æœŸ
- âœ… **ç¥ç…æ–¹ä½**ï¼šå–œç¥ã€è´¢ç¥ã€è´µç¥ç­‰æ–¹ä½ä¿¡æ¯
- âœ… **å®œå¿Œåˆ†æ**ï¼šåŸºäºå¹²æ”¯çš„æ—¥å¸¸å®œå¿Œäº‹é¡¹

**éœ€è¦åŸºäºlunaråº“ç»“æœè¿›è¡ŒäºŒæ¬¡è®¡ç®—çš„åŠŸèƒ½**ï¼š
- ğŸ”„ **äº”è¡Œæ—ºç›¸ä¼‘å›šæ­»**ï¼šåŸºäºèŠ‚æ°”ä¿¡æ¯åˆ†æå­£èŠ‚äº”è¡Œç‰¹å¾
- ğŸ”„ **å­£èŠ‚è°ƒå€™ç”¨ç¥**ï¼šç»“åˆèŠ‚æ°”å’Œäº”è¡Œå¼ºå¼±ç¡®å®šè°ƒå€™éœ€æ±‚
- ğŸ”„ **æ—¶è¾°èƒ½é‡åˆ†æ**ï¼šåŸºäºæ—¶è¾°å¹²æ”¯åˆ†æèƒ½é‡ç‰¹å¾

### ğŸ“– æ•°æ®åº“ä¸lunaråº“é›†æˆæ¥å£ç¤ºä¾‹
```typescript
import { UnifiedCharacterLoader } from '@/core/naming/unified-character-loader';
import { LunarCalendar, type LunarInfo } from '@/lib/lunar';

// åˆå§‹åŒ–å­—ç¬¦æ•°æ®åº“ï¼ˆå¿…é¡»é¦–å…ˆæ‰§è¡Œï¼‰
const charLoader = UnifiedCharacterLoader.getInstance();
await charLoader.initialize();

// è·å–å†œå†ä¿¡æ¯
const lunarInfo: LunarInfo = LunarCalendar.getLunarInfo(2025, 10, 31, 10, 0);

// å­—ç¬¦æ•°æ®æŸ¥è¯¢ç¤ºä¾‹
const charInfo = charLoader.getCharacterInfo('å´');
if (charInfo) {
  const strokesForCalculation = charInfo.strokes.traditional; // å‘½ç†è®¡ç®—ç”¨
  const wuxingProperty = charInfo.wuxing;                    // äº”è¡Œå±æ€§
  const primaryPronunciation = charInfo.primaryPinyin;       // ä¸»è¦è¯»éŸ³
}
```

---

## ğŸ“‹ è¾“å…¥ä¿¡æ¯

**ç”¨æˆ·è¾“å…¥**ï¼š
- å§“æ°ï¼šå´
- æ€§åˆ«ï¼šç”·
- å‡ºç”Ÿæ—¶é—´ï¼š2025-10-31 10:00:00
- åå­—ç±»å‹ï¼šåŒå­—å (ç”¨æˆ·å¯é€‰æ‹©"å•å­—å"æˆ–"åŒå­—å")
- å®¶æ—ä¼ ç»Ÿï¼šæ— ç‰¹æ®Šè¦æ±‚

**ç¡®å®šæ€§ç­‰çº§**ï¼šLevel 1 (FULLY_DETERMINED) - å¯ç”¨å…¨éƒ¨æ’ä»¶

**ğŸ“ åå­—ç±»å‹è¯´æ˜**ï¼š
- **å•å­—å**ï¼šå¦‚"å´å®£" (å§“+1ä¸ªåå­—å­—ç¬¦)
  - ä¼˜åŠ¿ï¼šç®€æ´æœ‰åŠ›ï¼Œæ˜“è®°æ˜“å†™
  - åŠ£åŠ¿ï¼šä¸‰æ‰äº”æ ¼ä¸­åœ°æ ¼å®¹æ˜“å‡ºç°å‡¶æ•°ï¼ŒéŸ³éŸµå±‚æ¬¡ç›¸å¯¹ç®€å•
- **åŒå­—å**ï¼šå¦‚"å´å®£æ¶¦" (å§“+2ä¸ªåå­—å­—ç¬¦) 
  - ä¼˜åŠ¿ï¼šäº”æ ¼æ­é…çµæ´»ï¼ŒéŸ³éŸµå±‚æ¬¡ä¸°å¯Œï¼Œæ–‡åŒ–å†…æ¶µæ›´æ·±
  - åŠ£åŠ¿ï¼šç›¸å¯¹å¤æ‚ï¼Œé‡åæ¦‚ç‡ç•¥é«˜
- **æœ¬ç¤ºä¾‹é€‰æ‹©**ï¼šåŒå­—å (ä¾¿äºå±•ç¤ºå®Œæ•´çš„æ’ä»¶è®¡ç®—è¿‡ç¨‹)

---

## ğŸ—ï¸ Layer 1: åŸºç¡€ä¿¡æ¯å±‚æ‰§è¡Œ

### 1.1 SurnamePlugin (å§“æ°åˆ†ææ’ä»¶)

**ğŸ“¥ è¾“å…¥**ï¼š
```json
{
  "familyName": "å´"
}
```

**ğŸ”„ è®¡ç®—è¿‡ç¨‹**ï¼š
```typescript
// âš ï¸ é‡è¦ï¼šä¸¥æ ¼æŒ‰ç…§å­—ç¬¦æ•°æ®è·å–æ ‡å‡†æ‰§è¡Œ

// ç¬¬ä¸€æ­¥ï¼šæŸ¥è¯¢ä¸»æ•°æ®åº“ (å”¯ä¸€åˆæ³•æ¥æº)
import { UnifiedCharacterLoader } from '@/core/naming/unified-character-loader';

const charLoader = UnifiedCharacterLoader.getInstance();
await charLoader.initialize();

// æŸ¥è¯¢å­—ç¬¦ä¿¡æ¯
const charInfo = charLoader.getCharacterInfo('å´');

ğŸ” å®é™…æŸ¥è¯¢ç»“æœ (UnifiedCharacterInfoæ ¼å¼):
{
  "char": "å´",
  "pinyin": ["wÃº"],
  "primaryPinyin": "wÃº",
  "tone": 2,
  "strokes": {
    "simplified": 7,        // ç®€ä½“ç¬”ç”»ï¼ˆä»…ä¾›å‚è€ƒï¼‰
    "traditional": 7,       // ç¹ä½“ç¬”ç”»ï¼ˆå‘½ç†è®¡ç®—ä¸“ç”¨ï¼‰
    "kangxi": 7             // åº·ç†™å­—å…¸ç¬”ç”»ï¼ˆå¯é€‰ï¼‰
  },
  "radical": "å£",
  "wuxing": "mu",           // äº”è¡Œå±æ€§ï¼šæœ¨
  "traditional": "å³",      // ç¹ä½“å­—å½¢
  "simplified": "å´",       // ç®€ä½“å­—å½¢
  "meanings": ["è±¡å¤´çš„åŠ¨ä½œã€‚åˆèµ·æ¥è¡¨ç¤ºæ™ƒç€å¤´å¤§å£°è¯´è¯ã€‚æœ¬ä¹‰:å¤§å£°è¯´è¯,å–§å“—"],
  "isStandard": true,       // æ ‡å‡†å­—ç¡®è®¤
  "sources": ["ç™¾å®¶å§“", "åº·ç†™å­—å…¸", "ç°ä»£æ±‰è¯­å¸¸ç”¨å­—è¡¨"]
}

// ç¬¬äºŒæ­¥ï¼šæ•°æ®æå–ä¸éªŒè¯ (ä¸¥æ ¼éµå¾ªæ ‡å‡†)
å­—ç¬¦æœ¬ä½“: charInfo.char                    // "å´"
ç¹ä½“å­—å½¢: charInfo.traditional || charInfo.char  // "å³"
ç®€ä½“å­—å½¢: charInfo.simplified || charInfo.char   // "å´"
ä¸»è¦æ‹¼éŸ³: charInfo.primaryPinyin           // "wÃº"
å£°è°ƒ: charInfo.tone                        // 2 (é˜³å¹³)
å‘½ç†ç¬”ç”»: charInfo.strokes.traditional     // 7ç”» âš ï¸ é‡è¦ï¼šå‘½ç†è®¡ç®—ä¸“ç”¨
æ˜¾ç¤ºç¬”ç”»: charInfo.strokes.simplified      // 7ç”» (ä»…ä¾›ç•Œé¢æ˜¾ç¤º)
äº”è¡Œå±æ€§: charInfo.wuxing                  // "mu" (æœ¨)
éƒ¨é¦–: charInfo.radical                     // "å£"
å­—ä¹‰: charInfo.meanings[0]                 // ä¸»è¦å­—ä¹‰
æ ‡å‡†æ€§: charInfo.isStandard               // true (ç¡®è®¤ä¸ºæ ‡å‡†å–åç”¨å­—)

// ç¬¬ä¸‰æ­¥ï¼šæ•°æ®å®Œæ•´æ€§æ£€æŸ¥ä¸Fallbackæœºåˆ¶
function validateCharacterData(charInfo: UnifiedCharacterInfo): boolean {
  const required = [
    charInfo.primaryPinyin,           // å¿…é¡»æœ‰ä¸»è¦æ‹¼éŸ³
    charInfo.tone > 0,               // å¿…é¡»æœ‰å£°è°ƒ
    charInfo.strokes.traditional > 0, // å¿…é¡»æœ‰ç¹ä½“ç¬”ç”»
    charInfo.wuxing,                 // å¿…é¡»æœ‰äº”è¡Œ
    charInfo.radical                 // å¿…é¡»æœ‰éƒ¨é¦–
  ];
  return required.every(Boolean);
}

if (!validateCharacterData(charInfo)) {
  // ä»…åœ¨ä¸»æ•°æ®åº“ä¸å®Œæ•´æ—¶å¯ç”¨Fallback
  console.warn('ä¸»æ•°æ®åº“æ•°æ®ä¸å®Œæ•´ï¼Œå¯ç”¨Fallbackæœºåˆ¶');
  
  // Fallbackè§„åˆ™ï¼š
  if (!charInfo.strokes.traditional) {
    // ç¬”ç”»Fallback: real-stroke-data.json
    const fallbackStrokes = await loadStrokeDataFallback('å´');
    charInfo.strokes.traditional = fallbackStrokes;
  }
  
  if (!charInfo.primaryPinyin) {
    // æ‹¼éŸ³Fallback: pinyin-processed.json  
    const fallbackPinyin = await loadPinyinDataFallback('å´');
    charInfo.primaryPinyin = fallbackPinyin.pinyin;
    charInfo.tone = fallbackPinyin.tone;
  }
}

// ç¬¬å››æ­¥ï¼šç™¾å®¶å§“æ’åæŸ¥è¯¢ (ç‹¬ç«‹æ•°æ®æº)
æŸ¥è¯¢æ–‡ä»¶: public/data/names/baijiaxing.json
æŸ¥è¯¢è·¯å¾„: paragraphs[0]

ğŸ” å®é™…æŸ¥è¯¢è¿‡ç¨‹:
ç¬¬6è¡Œå†…å®¹: "èµµé’±å­™æï¼Œå‘¨å´éƒ‘ç‹ã€‚"
ä½ç½®è®¡ç®—æ–¹æ³•:
  cleanText = "èµµé’±å­™æå‘¨å´éƒ‘ç‹" (ç§»é™¤æ ‡ç‚¹)
  éå†å­—ç¬¦: èµµ(1) é’±(2) å­™(3) æ(4) å‘¨(5) å´(6) éƒ‘(7) ç‹(8)
  æ‰¾åˆ°"å´"å­—ä½ç½®: ç¬¬6ä½

éªŒè¯æ•°æ®æº:
  baijiaxing.jsonç¬¬6è¡Œç¡®å®åŒ…å«"å´"å­—
  ä¼ ç»Ÿç™¾å®¶å§“é¡ºåº: "èµµé’±å­™æï¼Œå‘¨å´éƒ‘ç‹"
  ç™¾å®¶å§“æ’å: ç¬¬6ä½ âœ“

// ç¬¬äº”æ­¥ï¼šè®¡ç®—è¡ç”Ÿæ•°æ® (ä½¿ç”¨ç¹ä½“ç¬”ç”»)
å¤©æ ¼è®¡ç®—: 
- âš ï¸ é‡è¦ï¼šä½¿ç”¨ç¹ä½“ç¬”ç”»æ•°è¿›è¡Œå‘½ç†è®¡ç®—
- ç¬”ç”»æ•°æ®: charInfo.strokes.traditional = 7ç”»
- å¤©æ ¼ = 7 + 1 = 8 (å•å§“è§„åˆ™)

å­—ç¬¦ç±»å‹åˆ¤æ–­:
- å•å­—å§“: charInfo.char.length === 1      // true
- å¤å§“: charInfo.char.length > 1          // false
- æ ‡å‡†å­—: charInfo.isStandard             // true (ç¡®è®¤ä¸ºåˆæ³•å–åç”¨å­—)
- æ•°æ®æ¥æº: charInfo.sources              // å¤šé‡éªŒè¯çš„å¯é å­—ç¬¦
```

**ğŸ“¤ è¾“å‡º**ï¼š
```json
{
  "familyName": "å´",
  "characterInfo": {
    "char": "å´",
    "traditional": "å³",
    "simplified": "å´",
    "pinyin": ["wÃº"],
    "primaryPinyin": "wÃº",
    "tone": 2,
    "strokes": {
      "simplified": 7,
      "traditional": 7,
      "kangxi": 7
    },
    "radical": "å£",
    "wuxing": "mu",
    "meanings": ["è±¡å¤´çš„åŠ¨ä½œã€‚åˆèµ·æ¥è¡¨ç¤ºæ™ƒç€å¤´å¤§å£°è¯´è¯ã€‚æœ¬ä¹‰:å¤§å£°è¯´è¯,å–§å“—"],
    "isStandard": true,
    "sources": ["ç™¾å®¶å§“", "åº·ç†™å­—å…¸", "ç°ä»£æ±‰è¯­å¸¸ç”¨å­—è¡¨"]
  },
  "derivedProperties": {
    "isSingleChar": true,
    "isCompoundSurname": false,
    "baijiaxingRank": 6,
    "tianGeBase": 8,
    "calculationStrokes": 7,
    "confidence": 1.0
  },
  "dataQuality": {
    "sourceType": "final-enhanced-character-database",
    "completenessScore": 1.0,
    "fallbackUsed": false,
    "validationPassed": true,
    "isValidNamingCharacter": true
  }
}
```

---

### 1.2 GenderPlugin (æ€§åˆ«åå¥½åˆ†ææ’ä»¶)

**ğŸ“¥ è¾“å…¥**ï¼š
```json
{
  "gender": "male"
}
```

**ğŸ”„ ç®€åŒ–åçš„è®¡ç®—è¿‡ç¨‹**ï¼š
```typescript
// ç¬¬ä¸€æ­¥ï¼šæ€§åˆ«æ ‡è¯†éªŒè¯
è¾“å…¥éªŒè¯:
  gender = "male" âœ“ (æœ‰æ•ˆå€¼: "male" | "female")

// ç¬¬äºŒæ­¥ï¼šç¡®å®šå…¸ç±æ¥æºåå¥½ (ç”·æ¥šè¾å¥³è¯—ç»)
function getLiterarySourcePreference(gender: string) {
  if (gender === "male") {
    return {
      preferred: ["æ¥šè¾"],           // é¦–é€‰ï¼šç”·æ¥šè¾
      secondary: ["è®ºè¯­", "æ˜“ç»"],    // æ¬¡é€‰ï¼šå„’å®¶ç»å…¸ã€å“²å­¦å…¸ç±
      discouraged: ["è¯—ç»"]          // ä¸æ¨èï¼šå¥³è¯—ç»
    };
  } else {
    return {
      preferred: ["è¯—ç»"],           // é¦–é€‰ï¼šå¥³è¯—ç»
      secondary: ["å®‹è¯", "æ¥šè¾"],    // æ¬¡é€‰ï¼šè¯éŸµä¼˜ç¾ã€å¤å…¸æ–‡å­¦
      discouraged: []               // æ— ç‰¹åˆ«é¿è®³
    };
  }
}

// ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®å­—ç¬¦è¿‡æ»¤åå¥½
function getCharacterFilter(gender: string) {
  if (gender === "male") {
    return {
      preferMasculine: true,     // åå¥½é˜³åˆšç‰¹è´¨çš„å­—ç¬¦
      avoidFeminine: true,       // é¿å…è¿‡äºæŸ”ç¾çš„å­—ç¬¦
      culturalDepth: 0.9         // é«˜åº¦åå¥½æœ‰æ–‡åŒ–å†…æ¶µçš„å­—ç¬¦
    };
  } else {
    return {
      preferMasculine: false,    // ä¸ç‰¹åˆ«åå¥½é˜³åˆšç‰¹è´¨
      avoidFeminine: false,      // ä¸é¿å…æŸ”ç¾å­—ç¬¦
      culturalDepth: 0.9         // åŒæ ·åå¥½æœ‰æ–‡åŒ–å†…æ¶µçš„å­—ç¬¦
    };
  }
}

// ç¬¬å››æ­¥ï¼šæ‰§è¡Œè®¡ç®—
const literaryPreference = getLiterarySourcePreference("male");
const characterFilter = getCharacterFilter("male");

// è®¡ç®—ç»“æœ
literarySourcePreference = {
  preferred: ["æ¥šè¾"],
  secondary: ["è®ºè¯­", "æ˜“ç»"],
  discouraged: ["è¯—ç»"]
};

characterFilter = {
  preferMasculine: true,
  avoidFeminine: true,
  culturalDepth: 0.9
};
```

#### âš ï¸ **è®¾è®¡é—®é¢˜åˆ†æä¸ä¿®æ­£**

**é—®é¢˜å‘ç°**ï¼šæ‚¨æŒ‡å‡ºçš„é—®é¢˜éå¸¸å‡†ç¡®ï¼åŸå§‹è®¾è®¡ä¸­å®šä¹‰äº†å¤§é‡è¯¦ç»†é…ç½®ï¼ˆcharacterPreferencesã€semanticFieldsã€culturalTraitsã€namingStyleï¼‰ï¼Œä½†åœ¨å½“å‰å…­å±‚æ¶æ„ä¸­**ç¼ºä¹æ˜ç¡®çš„ä½¿ç”¨åœºæ™¯**ï¼Œè¿™æ˜¯å…¸å‹çš„è¿‡åº¦è®¾è®¡é—®é¢˜ã€‚

#### **ğŸ”„ é‡æ–°è®¾è®¡çš„ GenderPlugin è¾“å‡º**

**ğŸ“¤ ç®€åŒ–åçš„å®ç”¨è¾“å‡º**ï¼š
```json
{
  "gender": "male",
  "literarySourcePreference": {
    "preferred": ["æ¥šè¾"],         // é¦–é€‰å…¸ç±
    "secondary": ["è®ºè¯­", "æ˜“ç»"],  // æ¬¡é€‰å…¸ç±
    "discouraged": ["è¯—ç»"]        // ä¸æ¨èå…¸ç±
  },
  "characterFilter": {
    "preferMasculine": true,       // åå¥½é˜³åˆšç‰¹è´¨å­—ç¬¦
    "avoidFeminine": true,         // é¿å…è¿‡äºæŸ”ç¾å­—ç¬¦
    "culturalDepth": 0.9           // åå¥½æœ‰æ–‡åŒ–å†…æ¶µå­—ç¬¦
  },
  "confidence": 1.0
}
```

#### **ğŸ“ æ˜ç¡®çš„ä½¿ç”¨åœºæ™¯è¯´æ˜**

#### **1. literarySourcePreference ä½¿ç”¨åœºæ™¯**
```typescript
// Layer 4: PoetryPlugin (è¯—è¯å…¸ç±é€‰å­—æ’ä»¶) - å¦‚æœå­˜åœ¨
class PoetryPlugin {
  execute(context: any) {
    const preference = context.genderInfo.literarySourcePreference;
    const candidates = [];
    
    // é¦–é€‰å…¸ç±ï¼šä¼˜å…ˆçº§æœ€é«˜
    for (const source of preference.preferred) {
      const chars = this.extractCharactersFromSource(source);
      chars.forEach(char => char.priority = "high");
      candidates.push(...chars);
    }
    
    // æ¬¡é€‰å…¸ç±ï¼šä¸­ç­‰ä¼˜å…ˆçº§
    for (const source of preference.secondary) {
      const chars = this.extractCharactersFromSource(source);
      chars.forEach(char => char.priority = "medium");
      candidates.push(...chars);
    }
    
    // é¿å…ä½¿ç”¨ä¸æ¨èçš„å…¸ç±
    // discouraged ä¸­çš„å…¸ç±ä¸ä¼šè¢«ä½¿ç”¨
    
    return candidates;
  }
}
```

#### **2. characterFilter ä½¿ç”¨åœºæ™¯**
```typescript
// Layer 4: WuxingCharPlugin (äº”è¡Œå­—ç¬¦ç­›é€‰æ’ä»¶)
class WuxingCharPlugin {
  filterCharactersByGender(characters: Character[], genderFilter: any) {
    return characters.filter(char => {
      // åº”ç”¨æ€§åˆ«è¿‡æ»¤è§„åˆ™
      if (genderFilter.preferMasculine && this.isMasculineChar(char)) {
        return true;
      }
      if (genderFilter.avoidFeminine && this.isFeminineChar(char)) {
        return false;
      }
      return this.evaluateCharacterFit(char, genderFilter.culturalDepth);
    });
  }
}
```

### 1.3 BirthTimePlugin (å‡ºç”Ÿæ—¶é—´åˆ†ææ’ä»¶)

**ğŸ“¥ è¾“å…¥**ï¼š
```json
{
  "birthInfo": {
    "year": 2025,
    "month": 10,
    "day": 31,
    "hour": 10,
    "minute": 0
  }
}
```

**ğŸ”„ è¯¦ç»†è®¡ç®—è¿‡ç¨‹**ï¼š
```typescript
// ç¬¬ä¸€æ­¥ï¼šè¾“å…¥éªŒè¯å’Œæ ‡å‡†åŒ–
è¾“å…¥éªŒè¯:
  year: 2025 âœ“ (èŒƒå›´: 1900-2100)
  month: 10 âœ“ (èŒƒå›´: 1-12)
  day: 31 âœ“ (è¯¥æœˆæœ‰æ•ˆæ—¥æœŸ)
  hour: 10 âœ“ (èŒƒå›´: 0-23)
  minute: 0 âœ“ (èŒƒå›´: 0-59)

æ—¶é—´ç±»å‹ç¡®å®š: "exact" (ç²¾ç¡®æ—¶é—´æ¨¡å¼)
ç½®ä¿¡åº¦: 1.0 (å®Œæ•´æ—¶é—´ä¿¡æ¯)

// ç¬¬äºŒæ­¥ï¼šä½¿ç”¨lunaråº“è¿›è¡Œå…¬å†è½¬å†œå†è®¡ç®—
import { LunarCalendar } from '@/lib/lunar';

// ğŸ”§ å®é™…ä½¿ç”¨lunaråº“çš„å®Œæ•´æµç¨‹
const lunarResult = LunarCalendar.getLunarInfo(2025, 10, 31, 10, 0);

console.log('ğŸ“… å†œå†ä¿¡æ¯:', lunarResult.lunar);
console.log('ğŸŒŸ å…«å­—ä¿¡æ¯:', lunarResult.eightChar);  
console.log('ğŸŒ¾ èŠ‚æ°”ä¿¡æ¯:', lunarResult.solarTerms);
console.log('ğŸ§­ ç¥ç…æ–¹ä½:', lunarResult.gods);
console.log('ğŸ“‹ å®œå¿Œäº‹é¡¹:', lunarResult.activities);

// ğŸ’¡ lunaråº“ä¸€æ¬¡æ€§è¿”å›çš„å®Œæ•´æ•°æ®ç»“æ„:
å†œå†å®Œæ•´ç»“æœ = {
  // å†œå†åŸºæœ¬ä¿¡æ¯
  lunar: {
    year: 2025,                    // å†œå†å¹´
    month: 9,                      // å†œå†æœˆ
    day: 9,                        // å†œå†æ—¥  
    yearInChinese: "äºŒâ—‹äºŒäº”å¹´",    // ä¸­æ–‡å¹´ä»½
    monthInChinese: "ä¹æœˆ",         // ä¸­æ–‡æœˆä»½
    dayInChinese: "åˆä¹",           // ä¸­æ–‡æ—¥æœŸ
    yearInGanZhi: "ä¹™å·³",          // å¹´å¹²æ”¯
    monthInGanZhi: "ä¸äº¥",         // æœˆå¹²æ”¯
    dayInGanZhi: "æˆŠç”³",           // æ—¥å¹²æ”¯  
    timeInGanZhi: "ä¸å·³",          // æ—¶å¹²æ”¯
    isLeap: false,                 // æ˜¯å¦é—°æœˆ
    festivals: []                  // èŠ‚æ—¥ä¿¡æ¯
  },
  
  // å…«å­—ä¿¡æ¯ (è‡ªåŠ¨è®¡ç®—)
  eightChar: {
    year: "ä¹™å·³",                  // å¹´æŸ±
    month: "ä¸äº¥",                 // æœˆæŸ±
    day: "æˆŠç”³",                   // æ—¥æŸ±
    time: "ä¸å·³",                  // æ—¶æŸ±
    dayMaster: "æˆŠ",               // æ—¥å¹² (ç”¨ç¥åŸºå‡†)
    wuxing: {                      // äº”è¡Œç»Ÿè®¡
      wood: 1,    // æœ¨: ä¹™
      fire: 2,    // ç«: ä¸,å·³
      earth: 1,   // åœŸ: æˆŠ
      metal: 1,   // é‡‘: ç”³
      water: 1    // æ°´: äº¥
    },
    nayin: ["ä½›ç¯ç«", "å±‹ä¸ŠåœŸ", "å¤§é©¿åœŸ", "æ²™ä¸­åœŸ"]  // çº³éŸ³
  },
  
  // èŠ‚æ°”ä¿¡æ¯ (è‡ªåŠ¨è®¡ç®—)
  solarTerms: {
    current: "éœœé™",               // å½“å‰èŠ‚æ°”
    next: "ç«‹å†¬",                  // ä¸‹ä¸€èŠ‚æ°”
    nextDate: "2025-11-07"         // ä¸‹ä¸€èŠ‚æ°”æ—¥æœŸ
  }
}

// ç¬¬ä¸‰æ­¥ï¼šä½¿ç”¨lunaråº“è·å–å¹²æ”¯çºªå¹´
// lunaråº“å·²ç»æä¾›äº†å®Œæ•´çš„å¹²æ”¯ä¿¡æ¯ï¼Œæ— éœ€æ‰‹åŠ¨è®¡ç®—
const ganZhiInfo = {
  year: lunarResult.lunar.yearInGanZhi,     // "ä¹™å·³" - å¹´å¹²æ”¯
  month: lunarResult.lunar.monthInGanZhi,   // "ä¸äº¥" - æœˆå¹²æ”¯  
  day: lunarResult.lunar.dayInGanZhi,       // "æˆŠç”³" - æ—¥å¹²æ”¯
  time: lunarResult.lunar.timeInGanZhi      // "ä¸å·³" - æ—¶å¹²æ”¯
};

// ç¬¬å››æ­¥ï¼šç”Ÿè‚–ä¿¡æ¯å·²åŒ…å«åœ¨lunaråº“ç»“æœä¸­
// ç”Ÿè‚–é€šè¿‡å†œå†å¹´ä»½è‡ªåŠ¨ç¡®å®šï¼Œlunaråº“å·²å¤„ç†äº†å†œå†å¹´çš„è¾¹ç•Œé—®é¢˜
const zodiacInfo = {
  year: lunarResult.lunar.year,             // 2025 (å†œå†å¹´)
  zodiac: "è›‡",                             // é€šè¿‡yearInGanZhiæ¨å¯¼æˆ–å•ç‹¬è·å–
  element: "ä¹™æœ¨",                          // å¹´å¹²äº”è¡Œ
  description: lunarResult.lunar.yearInChinese  // "äºŒâ—‹äºŒäº”å¹´"
};

// ç¬¬äº”æ­¥ï¼šä½¿ç”¨lunaråº“è·å–èŠ‚æ°”å’Œå­£èŠ‚åˆ†æ
// lunaråº“å·²ç»æä¾›äº†å½“å‰å’Œä¸‹ä¸€ä¸ªèŠ‚æ°”ä¿¡æ¯
const solarTermsInfo = {
  current: lunarResult.solarTerms.current,     // "éœœé™" - å½“å‰èŠ‚æ°”
  next: lunarResult.solarTerms.next,           // "ç«‹å†¬" - ä¸‹ä¸€ä¸ªèŠ‚æ°”  
  nextDate: lunarResult.solarTerms.nextDate   // "2025-11-07" - ä¸‹ä¸€èŠ‚æ°”æ—¥æœŸ
};

// 10æœˆ31æ—¥ä½ç½®åˆ†æ:
å½“å‰æ—¥æœŸ: 2025-10-31
å½“å‰èŠ‚æ°”: lunarResult.solarTerms.current     // "éœœé™"
ä¸‹ä¸€èŠ‚æ°”: lunarResult.solarTerms.next        // "ç«‹å†¬"
ä¸‹ä¸€èŠ‚æ°”æ—¥æœŸ: lunarResult.solarTerms.nextDate // "2025-11-07"
å­£èŠ‚çŠ¶æ€: "æ·±ç§‹ï¼Œéœœé™èŠ‚æ°”ä¸­ï¼Œæ¥è¿‘ç«‹å†¬"

// åŸºäºèŠ‚æ°”çš„å­£èŠ‚ç‰¹å¾åˆ†æï¼ˆéœ€è¦äºŒæ¬¡è®¡ç®—ï¼‰
function getSeasonalCharacteristics(currentJieQi: string): SeasonalCharacteristics {
  // äº”è¡Œæ—ºç›¸ä¼‘å›šæ­»ç†è®ºï¼šæ ¹æ®å½“å‰èŠ‚æ°”ç¡®å®šäº”è¡ŒçŠ¶æ€
  const jieQiWuxingMap = {
    "éœœé™": {
      season: "æ·±ç§‹",
      wangElement: "é‡‘",           // å½“ä»¤äº”è¡Œï¼šé‡‘æ—º
      xiangElement: "æ°´",          // ç›¸ï¼šé‡‘ç”Ÿæ°´ï¼Œæ°´ç›¸
      xiuElement: "åœŸ",            // ä¼‘ï¼šåœŸç”Ÿé‡‘ï¼ŒåœŸä¼‘  
      qiuElement: "æœ¨",            // å›šï¼šé‡‘å…‹æœ¨ï¼Œæœ¨å›š
      siElement: "ç«"              // æ­»ï¼šç«å…‹é‡‘ï¼Œç«æ­»
    },
    "ç«‹å†¬": {
      season: "åˆå†¬", 
      wangElement: "æ°´",           // å½“ä»¤äº”è¡Œï¼šæ°´æ—º
      xiangElement: "æœ¨",          // ç›¸ï¼šæ°´ç”Ÿæœ¨ï¼Œæœ¨ç›¸
      xiuElement: "é‡‘",            // ä¼‘ï¼šé‡‘ç”Ÿæ°´ï¼Œé‡‘ä¼‘
      qiuElement: "åœŸ",            // å›šï¼šæ°´å…‹ç«ï¼ŒåœŸå›š
      siElement: "ç«"              // æ­»ï¼šç«å…‹é‡‘ï¼Œç«æ­»
    }
    // ... å…¶ä»–24èŠ‚æ°”
  };
  
  const characteristics = jieQiWuxingMap[currentJieQi];
  return {
    season: characteristics.season,
    characteristics: [
      `${characteristics.wangElement}æ—º`,
      `${characteristics.xiangElement}ç›¸`, 
      `${characteristics.xiuElement}ä¼‘`,
      `${characteristics.qiuElement}å›š`,
      `${characteristics.siElement}æ­»`
    ],
    energyTrend: "é˜³æ°”æ”¶æ•›ï¼Œé˜´æ°”æ¸ç››",
    climaticFeature: "ç‡¥æ°”å½“ä»¤ï¼Œéœ€è¦æ¶¦æ³½",
    wuxingStatus: {
      wang: characteristics.wangElement,
      xiang: characteristics.xiangElement,
      xiu: characteristics.xiuElement,
      qiu: characteristics.qiuElement,
      si: characteristics.siElement
    }
  };
}

// éœœé™èŠ‚æ°”çš„å­£èŠ‚ç‰¹å¾:
const seasonalCharacteristics = getSeasonalCharacteristics(lunarResult.solarTerms.current);
// ç»“æœ: ["é‡‘æ—º", "æ°´ç›¸", "åœŸä¼‘", "æœ¨å›š", "ç«æ­»"]

// ğŸ¯ lunaråº“ä½¿ç”¨æ€»ç»“:
// âœ… ä¼˜åŠ¿1: ä¸€æ¬¡è°ƒç”¨è·å–æ‰€æœ‰åŸºç¡€ä¿¡æ¯ï¼Œé¿å…é‡å¤è®¡ç®—
// âœ… ä¼˜åŠ¿2: åŸºäºæˆç†Ÿç®—æ³•ï¼Œå‡†ç¡®æ€§é«˜äºæ‰‹åŠ¨å®ç°  
// âœ… ä¼˜åŠ¿3: è‡ªåŠ¨å¤„ç†å¤æ‚æƒ…å†µï¼ˆé—°æœˆã€èŠ‚æ°”è¾¹ç•Œç­‰ï¼‰
// âœ… ä¼˜åŠ¿4: æä¾›ä¸°å¯Œçš„é™„åŠ ä¿¡æ¯ï¼ˆç¥ç…ã€å®œå¿Œã€çº³éŸ³ç­‰ï¼‰
// âš ï¸  æ³¨æ„: å­£èŠ‚äº”è¡Œç‰¹å¾ç­‰é«˜çº§åˆ†æä»éœ€åŸºäºlunarç»“æœè¿›è¡ŒäºŒæ¬¡è®¡ç®—

// ç¬¬å…­æ­¥ï¼šä½¿ç”¨lunaråº“è·å–æ—¶è¾°ä¿¡æ¯
// lunaråº“å·²ç»åŒ…å«äº†å®Œæ•´çš„æ—¶è¾°å¹²æ”¯ä¿¡æ¯
const timeAnalysisFromLunar = {
  timeGanZhi: lunarResult.lunar.timeInGanZhi,  // "ä¸å·³" - æ—¶å¹²æ”¯
  hour: lunarResult.solar.hour,                // 10
  minute: lunarResult.solar.minute,            // 0
};

// æ—¶è¾°åˆ†æï¼ˆä»æ—¶å¹²æ”¯æå–ä¿¡æ¯ï¼‰
function analyzeTimeFromGanZhi(timeGanZhi: string) {
  const zhiTimeMap = {
    "å­": { name: "å­æ—¶", range: "23:00-01:00", element: "æ°´", energy: "é˜´æ°”æœ€ç››" },
    "ä¸‘": { name: "ä¸‘æ—¶", range: "01:00-03:00", element: "åœŸ", energy: "é˜´æ°”æ¸é€€" },
    "å¯…": { name: "å¯…æ—¶", range: "03:00-05:00", element: "æœ¨", energy: "é˜³æ°”åˆç”Ÿ" },
    "å¯": { name: "å¯æ—¶", range: "05:00-07:00", element: "æœ¨", energy: "é˜³æ°”æ¸ç››" },
    "è¾°": { name: "è¾°æ—¶", range: "07:00-09:00", element: "åœŸ", energy: "é˜³æ°”ä¸Šå‡" },
    "å·³": { name: "å·³æ—¶", range: "09:00-11:00", element: "ç«", energy: "é˜³æ°”æ—ºç››" },
    "åˆ": { name: "åˆæ—¶", range: "11:00-13:00", element: "ç«", energy: "é˜³æ°”æœ€ç››" },
    "æœª": { name: "æœªæ—¶", range: "13:00-15:00", element: "åœŸ", energy: "é˜³æ°”æ¸é€€" },
    "ç”³": { name: "ç”³æ—¶", range: "15:00-17:00", element: "é‡‘", energy: "é˜´æ°”åˆç”Ÿ" },
    "é…‰": { name: "é…‰æ—¶", range: "17:00-19:00", element: "é‡‘", energy: "é˜´æ°”æ¸ç››" },
    "æˆŒ": { name: "æˆŒæ—¶", range: "19:00-21:00", element: "åœŸ", energy: "é˜´æ°”ä¸Šå‡" },
    "äº¥": { name: "äº¥æ—¶", range: "21:00-23:00", element: "æ°´", energy: "é˜´æ°”æ—ºç››" }
  };
  
  const timeZhi = timeGanZhi[1]; // æå–åœ°æ”¯
  const timeGan = timeGanZhi[0]; // æå–å¤©å¹²
  
  return {
    timeInfo: zhiTimeMap[timeZhi],
    ganElement: getGanElement(timeGan),  // å¤©å¹²äº”è¡Œ
    zhiElement: zhiTimeMap[timeZhi]?.element  // åœ°æ”¯äº”è¡Œ
  };
}

// 10:00 æ—¶è¾°åˆ†æ (ä¸å·³æ—¶):
const timeAnalysis = analyzeTimeFromGanZhi(lunarResult.lunar.timeInGanZhi);
// ç»“æœ:
timeAnalysis = {
  hourName: "å·³æ—¶",
  timeRange: "09:00-11:00", 
  ganElement: "ä¸ç«",        // æ—¶å¹²äº”è¡Œ
  zhiElement: "ç«",          // æ—¶æ”¯äº”è¡Œ
  energy: "é˜³æ°”æ—ºç››",
  characteristics: ["ç«æ—ºæ—¶æ®µ", "ç²¾ç¥é¥±æ»¡", "æ´»åŠ›å……æ²›"],
  influence: "æœ‰åˆ©äºäº‹ä¸šå‘å±•ï¼Œæ€§æ ¼ç§¯æå‘ä¸Š"
}

// ç¬¬ä¸ƒæ­¥ï¼šç¡®å®šæ€§ç­‰çº§è¯„ä¼°
function assessCertaintyLevel(birthInfo: any) {
  if (birthInfo.hour !== undefined && birthInfo.minute !== undefined) {
    return {
      level: 1, // FULLY_DETERMINED
      description: "å®Œå…¨ç¡®å®š",
      confidence: 1.0,
      availableAnalysis: ["å…«å­—å››æŸ±", "æ—¶è¾°åˆ†æ", "ç²¾ç¡®ç”Ÿè‚–", "èŠ‚æ°”å½±å“"]
    };
  } else if (birthInfo.day !== undefined) {
    return {
      level: 2, // PARTIALLY_DETERMINED  
      description: "éƒ¨åˆ†ç¡®å®š",
      confidence: 0.8,
      availableAnalysis: ["ç®€åŒ–å…«å­—", "æ—¥æœŸç”Ÿè‚–", "å­£èŠ‚åˆ†æ"]
    };
  } else {
    return {
      level: 3, // ESTIMATED
      description: "é¢„ä¼°é˜¶æ®µ", 
      confidence: 0.6,
      availableAnalysis: ["å¹´ä»½ç”Ÿè‚–", "å­£èŠ‚æ¨æµ‹"]
    };
  }
}

certaintyLevel = assessCertaintyLevel(birthInfo) = {
  level: 1,
  description: "å®Œå…¨ç¡®å®š",
  confidence: 1.0,
  availableAnalysis: ["å…«å­—å››æŸ±", "æ—¶è¾°åˆ†æ", "ç²¾ç¡®ç”Ÿè‚–", "èŠ‚æ°”å½±å“"]
}
```

**ğŸ“¤ è¾“å‡º**ï¼š
```json
{
  "timeInfo": {
    "type": "exact",
    "year": 2025,
    "month": 10,
    "day": 31,
    "hour": 10,
    "minute": 0,
    "confidence": 1.0
  },
  "lunarInfo": {
    "year": lunarResult.lunar.year,                    // 2025
    "month": lunarResult.lunar.month,                  // 9  
    "day": lunarResult.lunar.day,                      // 9
    "yearInChinese": lunarResult.lunar.yearInChinese,  // "äºŒâ—‹äºŒäº”å¹´"
    "monthInChinese": lunarResult.lunar.monthInChinese, // "ä¹æœˆ"
    "dayInChinese": lunarResult.lunar.dayInChinese,    // "åˆä¹"
    "yearInGanZhi": lunarResult.lunar.yearInGanZhi,    // "ä¹™å·³"
    "monthInGanZhi": lunarResult.lunar.monthInGanZhi,  // "ä¸äº¥"
    "dayInGanZhi": lunarResult.lunar.dayInGanZhi,      // "æˆŠç”³"
    "timeInGanZhi": lunarResult.lunar.timeInGanZhi,    // "ä¸å·³"
    "isLeap": lunarResult.lunar.isLeap,                // false
    "festivals": lunarResult.lunar.festivals           // [""]
  },
  "eightCharInfo": {
    "year": lunarResult.eightChar.year,     // "ä¹™å·³"
    "month": lunarResult.eightChar.month,   // "ä¸äº¥"  
    "day": lunarResult.eightChar.day,       // "æˆŠç”³"
    "time": lunarResult.eightChar.time,     // "ä¸å·³"
    "dayMaster": lunarResult.eightChar.dayMaster, // "æˆŠ"
    "wuxing": lunarResult.eightChar.wuxing, // {wood: 0, fire: 2, earth: 2, metal: 2, water: 2}
    "nayin": lunarResult.eightChar.nayin    // ["ä½›ç¯ç«", "å±‹ä¸ŠåœŸ", "å¤§é©¿åœŸ", "æ²™ä¸­åœŸ"]
  },
  "solarTermsInfo": {
    "current": lunarResult.solarTerms.current,   // "éœœé™"
    "next": lunarResult.solarTerms.next,         // "ç«‹å†¬"
    "nextDate": lunarResult.solarTerms.nextDate // "2025-11-07"
  },
  "seasonalCharacteristics": {
    "season": "æ·±ç§‹",
    "wuxingStatus": ["é‡‘æ—º", "æ°´ç›¸", "åœŸä¼‘", "æœ¨å›š", "ç«æ­»"],
    "energyTrend": "é˜³æ°”æ”¶æ•›ï¼Œé˜´æ°”æ¸ç››",
    "climaticFeature": "ç‡¥æ°”å½“ä»¤ï¼Œéœ€è¦æ¶¦æ³½"
  },
  "timeAnalysis": {
    "hourName": "å·³æ—¶",
    "timeRange": "09:00-11:00",
    "ganElement": "ä¸ç«",
    "zhiElement": "ç«", 
    "energy": "é˜³æ°”æ—ºç››",
    "characteristics": ["ç«æ—ºæ—¶æ®µ", "ç²¾ç¥é¥±æ»¡", "æ´»åŠ›å……æ²›"]
  },
  "zodiacInfo": {
    "primary": "è›‡",
    "probability": 1.0,
    "element": "ä¹™æœ¨"
  },
  "certaintyLevel": 1
}
```

---

## ğŸ§® Layer 2: å‘½ç†åˆ†æå±‚æ‰§è¡Œ

### 2.1 BaZiPlugin (å…«å­—å››æŸ±è®¡ç®—æ’ä»¶)

**ğŸ“¥ ä¾èµ–**ï¼šBirthTimePlugin ç»“æœ

**ğŸ”„ è®¡ç®—è¿‡ç¨‹**ï¼š
```typescript
å…«å­—å››æŸ±è®¡ç®—:
// å¹´æŸ±è®¡ç®—
2025å¹´ = ç”²å­çºªå¹´ç¬¬42å¹´ = ä¹™å·³å¹´
å¹´æŸ±: ä¹™å·³ (ä¹™æœ¨å·³ç«)

// æœˆæŸ±è®¡ç®—  
å†œå†ä¹æœˆ = æˆŒæœˆ, 2025å¹´ä¹™å¹´, æœˆæŸ±å¤©å¹² = ä¸™
æœˆæŸ±: ä¸™æˆŒ (ä¸™ç«æˆŒåœŸ)

// æ—¥æŸ±è®¡ç®— (éœ€è¦ä¸‡å¹´å†)
2025-10-31 = æˆŠå­æ—¥ (æˆŠåœŸå­æ°´)

// æ—¶æŸ±è®¡ç®—
å·³æ—¶ + æˆŠæ—¥ = ä¸å·³æ—¶ (ä¸ç«å·³ç«)

// äº”è¡Œç»Ÿè®¡
å…«å­—: ä¹™å·³ ä¸™æˆŒ æˆŠå­ ä¸å·³
æœ¨: 1ä¸ª (ä¹™)
ç«: 4ä¸ª (å·³, ä¸™, ä¸, å·³) 
åœŸ: 2ä¸ª (æˆŒ, æˆŠ)
é‡‘: 0ä¸ª
æ°´: 1ä¸ª (å­)

// æ—¥ä¸»åˆ†æ
æ—¥ä¸»: æˆŠåœŸ
ç”ŸäºæˆŒæœˆ: åœŸæ—ºä¹‹æ—¶
ç«å¤šåœŸç‡¥: éœ€è¦é‡‘æ°´è°ƒå€™
```

**ğŸ“¤ è¾“å‡º**ï¼š
```json
{
  "fourPillars": {
    "year": {"heavenStem": "ä¹™", "earthBranch": "å·³", "wuxing": "æœ¨ç«"},
    "month": {"heavenStem": "ä¸™", "earthBranch": "æˆŒ", "wuxing": "ç«åœŸ"},
    "day": {"heavenStem": "æˆŠ", "earthBranch": "å­", "wuxing": "åœŸæ°´"},
    "hour": {"heavenStem": "ä¸", "earthBranch": "å·³", "wuxing": "ç«ç«"}
  },
  "dayMaster": "æˆŠåœŸ",
  "dayMasterWuxing": "åœŸ",
  "strongWeak": "å¼º",
  "wuxingCount": {"jin": 0, "mu": 1, "shui": 1, "huo": 4, "tu": 2},
  "analysisQuality": "precise",
  "confidence": 0.95
}
```

---

### 2.2 XiYongShenPlugin (äº”è¡Œå–œç”¨ç¥åˆ†ææ’ä»¶)

**ğŸ“¥ ä¾èµ–**ï¼šBaZiPlugin ç»“æœ

**ğŸ”„ è®¡ç®—è¿‡ç¨‹**ï¼š
```typescript
å–œç”¨ç¥åˆ†æ:
// æ—¥ä¸»å¼ºå¼±åˆ¤æ–­
æ—¥ä¸»æˆŠåœŸ: ç”ŸäºæˆŒæœˆ (åœŸæ—ºæœˆ)
åœ°æ”¯æœ‰æˆŒåœŸæ ¹: æ—¥ä¸»åå¼º
å¤©å¹²ç«å¤šç”ŸåœŸ: æ—¥ä¸»æ›´å¼º

// ç—…è¯åˆ†æ
ä¸»è¦é—®é¢˜: ç«å¤šåœŸç‡¥, ç¼ºé‡‘ç¼ºæ°´
ç«: 4ä¸ª (è¿‡æ—º, é€ æˆç‡¥çƒ­)
é‡‘: 0ä¸ª (ç¼ºå¤±, æ— æ³•æ³„åœŸç”Ÿæ°´)
æ°´: 1ä¸ª (åå¼±, æ— æ³•æ¶¦åœŸ)

// ç”¨ç¥ç¡®å®š
é¦–é€‰ç”¨ç¥: é‡‘ (æ³„åœŸç”Ÿæ°´, è°ƒå€™æ¶¦ç‡¥)
æ¬¡é€‰ç”¨ç¥: æ°´ (æ¶¦åœŸ, è°ƒå€™)
å¿Œç¥: ç«åœŸ (åŠ é‡ç‡¥çƒ­å¤±è¡¡)
```

**ğŸ“¤ è¾“å‡º**ï¼š
```json
{
  "analysis": {
    "dayMaster": "æˆŠåœŸ",
    "dayMasterWuxing": "åœŸ", 
    "strongWeak": "åå¼º",
    "seasonInfluence": "åœŸæ—ºç«å¤š, ç‡¥çƒ­å¤±è¡¡",
    "xiShen": ["é‡‘", "æ°´"],
    "yongShen": ["é‡‘"],
    "jiShen": ["ç«", "åœŸ"],
    "confidence": 0.9,
    "method": "æ‰¶æŠ‘ç”¨ç¥æ³•"
  },
  "recommendations": {
    "primaryElements": ["é‡‘"],
    "secondaryElements": ["æ°´"],
    "avoidElements": ["ç«", "åœŸ"],
    "balanceStrategy": "é‡‘æ°´è°ƒå€™æ¶¦ç‡¥",
    "priority": [
      {"element": "é‡‘", "priority": 95, "reason": "æ³„åœŸç”Ÿæ°´è°ƒå€™"},
      {"element": "æ°´", "priority": 85, "reason": "æ¶¦åœŸè§£ç‡¥"}
    ]
  }
}
```

---

### 2.3 ZodiacPlugin (ç”Ÿè‚–ç‰¹æ€§åˆ†ææ’ä»¶)

**ğŸ“¥ ä¾èµ–**ï¼šBirthTimePlugin ç»“æœ

**ğŸ”„ è®¡ç®—è¿‡ç¨‹**ï¼š
```typescript
ç”Ÿè‚–è›‡çš„ç‰¹æ€§åˆ†æ:
// åŸºæœ¬ç‰¹å¾
æ€§æ ¼: æ™ºæ…§ã€è°¨æ…ã€ç¥ç§˜ã€ä¼˜é›…
ä¼˜åŠ¿: ç›´è§‰æ•é”ã€æ€è€ƒæ·±é‚ƒã€å¤„äº‹å†·é™
è±¡å¾: æ™ºæ…§ä¹‹ç¥ã€åŒ»è¯ä¹‹ç¥

// ç”Ÿæ´»ä¹ æ€§å¯¹åº”çš„ç”¨å­—è§„å¾‹
å–œç”¨ç¯å¢ƒ:
- æ´ç©´å±…ä½ â†’ å–œ"å£"ã€"å®€"ã€"å†–"ç­‰å­—æ ¹
- æ ‘æ—æ –æ¯ â†’ å–œ"æœ¨"ã€"æ—"ã€"æ£®"ç­‰å­—æ ¹  
- å¤œé—´æ´»åŠ¨ â†’ å–œ"æœˆ"å­—æ ¹
- é£Ÿè‰é£Ÿè‚‰ â†’ å–œ"ç¦¾"ã€"è±†"ã€"è‚‰"ç­‰å­—æ ¹

å¿Œç”¨ç¯å¢ƒ:
- æ€•æ—¥å…‰æš´æ™’ â†’ å¿Œ"æ—¥"ã€"å…‰"ã€"æ˜"ç­‰å­—æ ¹
- é¿å¼€å¹³åŸ â†’ å¿Œ"ç”°"ã€"å¹³"ç­‰å­—æ ¹
- ä¸è™ç›¸å†² â†’ å¿Œ"è™"ã€"å½ª"ç­‰å­—æ ¹
```

**ğŸ“¤ è¾“å‡º**ï¼š
```json
{
  "primaryZodiac": "è›‡",
  "characteristics": {
    "personality": ["æ™ºæ…§", "è°¨æ…", "ç¥ç§˜", "ä¼˜é›…"],
    "strengths": ["ç›´è§‰æ•é”", "æ€è€ƒæ·±é‚ƒ", "å¤„äº‹å†·é™"],
    "luckyElements": ["é‡‘", "æ°´", "æœ¨"]
  },
  "selectionRules": {
    "preferredRadicals": ["å£", "å®€", "å†–", "æœ¨", "æ—", "ç¦¾", "æœˆ"],
    "avoidedRadicals": ["æ—¥", "å…‰", "ç”°", "è™", "è±•"],
    "preferredCharacters": ["å®¸", "å®", "å›", "å“²", "æ—", "æ£®"],
    "avoidedCharacters": ["æ˜", "æ˜Œ", "æ™¨", "è™", "å½ª"],
    "selectionPrinciples": ["å–œæ´ç©´æ –æ¯", "å–œæ ‘æ—ç¯å¢ƒ", "é¿æ—¥å…‰æš´æ™’"],
    "riskFactors": ["ä¸çŒªç›¸å®³", "ä¸è™ç›¸å†²"]
  }
}
```

---

## ğŸ¯ Layer 3: é€‰å­—ç­–ç•¥å±‚æ‰§è¡Œ

### 3.1 WuxingSelectionPlugin (äº”è¡Œé€‰å­—ç­–ç•¥æ’ä»¶)

**ğŸ“¥ ä¾èµ–**ï¼šXiYongShenPlugin ç»“æœ

**ğŸ”„ è®¡ç®—è¿‡ç¨‹**ï¼š
```typescript
äº”è¡Œé€‰å­—ç­–ç•¥åˆ¶å®š:
// åŸºäºå–œç”¨ç¥åˆ†æç»“æœ
ä¸»é€‰äº”è¡Œ: é‡‘ (æƒé‡40%, ä¼˜å…ˆçº§95åˆ†)
æ¬¡é€‰äº”è¡Œ: æ°´ (æƒé‡35%, ä¼˜å…ˆçº§85åˆ†)  
å¯é€‰äº”è¡Œ: æœ¨ (æƒé‡25%, ä¼˜å…ˆçº§70åˆ†)
é¿å…äº”è¡Œ: ç«åœŸ (æƒé‡0%, ä¼˜å…ˆçº§0åˆ†)

// å…·ä½“å­—ç¬¦ç­›é€‰æ ‡å‡†
é‡‘äº”è¡Œå­—ç¬¦: 
  - éƒ¨é¦–: é‡‘é’…ã€åˆ€åˆ‚ã€æˆˆç­‰
  - å­—ä¾‹: é“­(14ç”»)ã€é”¦(16ç”»)ã€é’¦(9ç”»)ã€é”(12ç”»)ã€é’¢(9ç”»)
  
æ°´äº”è¡Œå­—ç¬¦:
  - éƒ¨é¦–: æ°´æ°µã€é›¨ã€å†«ç­‰  
  - å­—ä¾‹: æ¶¦(16ç”»)ã€æ³½(17ç”»)ã€æ¶µ(12ç”»)ã€æ·³(12ç”»)ã€æ¾„(16ç”»)
```

**ğŸ“¤ è¾“å‡º**ï¼š
```json
{
  "selectionStrategy": {
    "primaryWuxing": ["é‡‘"],
    "secondaryWuxing": ["æ°´"],
    "avoidWuxing": ["ç«", "åœŸ"],
    "balanceApproach": "é‡‘æ°´è°ƒå€™æ¶¦ç‡¥"
  },
  "characterCriteria": [
    {
      "wuxing": "é‡‘",
      "priority": 95,
      "weight": 0.4,
      "reasons": ["æ³„åœŸç”Ÿæ°´", "è°ƒå€™æ¶¦ç‡¥", "å¹³è¡¡å‘½å±€"],
      "targetCount": 1
    },
    {
      "wuxing": "æ°´", 
      "priority": 85,
      "weight": 0.35,
      "reasons": ["æ¶¦åœŸè§£ç‡¥", "è°ƒå’Œå‘½å±€"],
      "targetCount": 1
    }
  ],
  "filterRules": {
    "mustHave": ["é‡‘"],
    "mustAvoid": ["ç«", "åœŸ"],
    "preferredRatio": {"é‡‘": 0.4, "æ°´": 0.35, "æœ¨": 0.25}
  }
}
```

---

### 3.2 ZodiacSelectionPlugin (ç”Ÿè‚–é€‰å­—ç­–ç•¥æ’ä»¶)

**ğŸ“¥ ä¾èµ–**ï¼šZodiacPlugin ç»“æœ

**ğŸ”„ è®¡ç®—è¿‡ç¨‹**ï¼š
```typescript
ç”Ÿè‚–è›‡é€‰å­—ç­–ç•¥:
// æ ¹æ®è›‡çš„ç”Ÿæ´»ä¹ æ€§åˆ¶å®šé€‰å­—è§„åˆ™
ç­–ç•¥åŸåˆ™: 
1. ä¼˜é€‰æœ‰åˆ©ç¯å¢ƒå­—æ ¹ (æ´ç©´ã€æ ‘æ—)
2. é¿å…ä¸åˆ©ç¯å¢ƒå­—æ ¹ (æ—¥å…‰ã€å¹³åŸ)  
3. è€ƒè™‘ç›¸å†²ç›¸å®³å…³ç³»

æƒé‡è®¾ç½®:
- å¼ºçƒˆæ¨èå­—ç¬¦: +2åˆ† (å¦‚: å®¸ã€å›ã€å“²)
- ä¸€èˆ¬æ¨èå­—ç¬¦: +1åˆ† (å¦‚: æ—ã€æ£®ã€å¯)
- ä¸­æ€§å­—ç¬¦: 0åˆ†
- ä¸æ¨èå­—ç¬¦: -1åˆ† (å¦‚: æ˜ã€æ˜Œ)
- å¼ºçƒˆé¿å…å­—ç¬¦: -3åˆ† (å¦‚: è™ã€è±•)
```

**ğŸ“¤ è¾“å‡º**ï¼š
```json
{
  "selectionStrategy": {
    "approachType": "ä¼ ç»Ÿç”Ÿè‚–é…å­—æ³•",
    "riskTolerance": 0.8,
    "traditionLevel": 0.9
  },
  "characterCriteria": {
    "highlyRecommended": {
      "characters": ["å®¸", "å®", "å›", "å“²", "å¯"],
      "radicals": ["å®€", "å£", "å£"],
      "reasons": ["æ´ç©´æ –æ¯ç¯å¢ƒ", "æ™ºæ…§è±¡å¾"],
      "weight": 2.0
    },
    "recommended": {
      "characters": ["æ—", "æ£®", "æŸ", "æ¾"],
      "radicals": ["æœ¨", "æ—"],
      "reasons": ["æ ‘æ—æ –æ¯ç¯å¢ƒ"],
      "weight": 1.0
    },
    "discouraged": {
      "characters": ["æ˜", "æ˜Œ", "æ™¨", "é˜³"],
      "radicals": ["æ—¥", "å…‰"],
      "reasons": ["æ—¥å…‰æš´æ™’ä¸åˆ©"],
      "penalty": -1.0
    },
    "forbidden": {
      "characters": ["è™", "å½ª", "è±•"],
      "radicals": ["è™", "è±•"],
      "reasons": ["ç›¸å†²ç›¸å®³"]
    }
  }
}
```

---

### 3.3 MeaningSelectionPlugin (å¯“æ„é€‰å­—ç­–ç•¥æ’ä»¶)

**ğŸ“¥ ä¾èµ–**ï¼šGenderPlugin ç»“æœ

**ğŸ”„ è®¡ç®—è¿‡ç¨‹**ï¼š
```typescript
ç”·æ€§å¯“æ„é€‰å­—ç­–ç•¥:
// åŸºäºæ€§åˆ«åå¥½ç¡®å®šå¯“æ„æ–¹å‘
æ ¸å¿ƒå¯“æ„ç±»åˆ«:
1. æ™ºæ…§æ‰å: å“²ã€ç¿ã€æ…§ã€èªã€æ•
2. å“å¾·ä¿®å…»: å¾·ã€ä»ã€ä¹‰ã€è¯šã€è°¦  
3. å¿—å‘æŠ±è´Ÿ: å¿—ã€ç¿”ã€è¿œã€åšã€å®
4. è‡ªç„¶å±±æ°´: æ³½ã€æ—ã€å³°ã€å·ã€æµ·

æ–‡åŒ–æ·±åº¦è¦æ±‚:
- è¯—ç»å‡ºå¤„: ä¼˜å…ˆé€‰æ‹©è¯—ç»ä¸­çš„ç”¨å­—
- è®ºè¯­å…¸æ•…: ä½“ç°å„’å®¶æ–‡åŒ–å†…æ¶µ
- ç°ä»£é€‚ç”¨: æ˜“è¯»æ˜“å†™ï¼Œå›½é™…åŒ–å‹å¥½

è¯„åˆ†æ ‡å‡†:
- ç§¯æå¯“æ„: 85-100åˆ†
- æ–‡åŒ–å†…æ¶µ: 80-95åˆ†  
- ç°ä»£é€‚ç”¨: 75-90åˆ†
- æ€§åˆ«é€‚å®œ: 90-100åˆ†
```

**ğŸ“¤ è¾“å‡º**ï¼š
```json
{
  "selectionStrategy": {
    "culturalDepth": 0.85,
    "modernRelevance": 0.8,
    "uniquenessLevel": 0.75,
    "genderSpecificity": 0.9
  },
  "semanticCriteria": {
    "preferredSemantics": [
      {
        "category": "æ™ºæ…§æ‰å",
        "keywords": ["æ™ºæ…§", "èªæ˜", "æ‰å", "ç¿æ™º"],
        "priority": 95,
        "examples": ["å“²", "ç¿", "æ…§", "èª"]
      },
      {
        "category": "å“å¾·ä¿®å…»", 
        "keywords": ["å“å¾·", "ä»ä¹‰", "è¯šä¿¡", "è°¦é€Š"],
        "priority": 90,
        "examples": ["å¾·", "ä»", "è¯š", "è°¦"]
      }
    ]
  },
  "culturalCriteria": {
    "literarySources": ["è¯—ç»", "è®ºè¯­", "æ˜“ç»"],
    "culturalSymbols": ["é¾™å‡¤", "å±±æ°´", "æ—¥æœˆ"],
    "traditionalValues": ["ä»ä¹‰ç¤¼æ™ºä¿¡"]
  }
}
```

---

### 3.4 StrokeSelectionPlugin (ç¬”ç”»é€‰å­—ç­–ç•¥æ’ä»¶)

**ğŸ“¥ ä¾èµ–**ï¼šSurnamePlugin ç»“æœ

**ğŸ”„ è®¡ç®—è¿‡ç¨‹**ï¼š
```typescript
ç¬”ç”»ç»„åˆç­–ç•¥åˆ†æ:
// âš ï¸ é‡è¦ï¼šæ‰€æœ‰å‘½ç†è®¡ç®—éƒ½ä½¿ç”¨ç¹ä½“å­—ç¬”ç”»æ•° (strokes.traditional)

// åŸºç¡€ä¿¡æ¯ (ä»final-enhanced-character-database.jsonè·å–)
const surnameInfo = charLoader.getCharacterInfo('å´');
å§“æ°: å´ (ç¹ä½“ç¬”ç”»: surnameInfo.strokes.traditional = 7ç”»)
å¤©æ ¼: 8 (7+1)

// ğŸ“‹ ç”¨æˆ·åå­—é€‰æ‹© (å…³é”®åˆ†æ”¯)
åå­—ç±»å‹: ç”¨æˆ·å¯é€‰æ‹© "å•å­—å" æˆ– "åŒå­—å"
- å•å­—å: å¦‚ "å´å®£" (1ä¸ªåå­—å­—ç¬¦)
- åŒå­—å: å¦‚ "å´å®£æ¶¦" (2ä¸ªåå­—å­—ç¬¦)

// ğŸ”„ äº”æ ¼è®¡ç®—å…¬å¼ (æ ¹æ®åå­—ç±»å‹åŠ¨æ€è°ƒæ•´ï¼Œå…¨éƒ¨ä½¿ç”¨ç¹ä½“ç¬”ç”»)

=== åŒå­—åæƒ…å†µ (å½“å‰ç¤ºä¾‹: "å´å®£æ¶¦") ===
// å­—ç¬¦ç¬”ç”»è·å– (ä¸¥æ ¼ä½¿ç”¨ç¹ä½“ç¬”ç”»)
const firstCharInfo = charLoader.getCharacterInfo('å®£');
const secondCharInfo = charLoader.getCharacterInfo('æ¶¦');
const å´ç¬”ç”» = surnameInfo.strokes.traditional;      // 7ç”»
const å®£ç¬”ç”» = firstCharInfo.strokes.traditional;    // 9ç”»
const æ¶¦ç¬”ç”» = secondCharInfo.strokes.traditional;   // 16ç”»

å¤©æ ¼ = å§“æ°ç¹ä½“ç¬”ç”» + 1 (å•å§“) = 7 + 1 = 8
äººæ ¼ = å§“æ°ç¹ä½“ç¬”ç”» + ç¬¬ä¸€å­—ç¹ä½“ç¬”ç”» = 7 + 9 = 16  
åœ°æ ¼ = ç¬¬ä¸€å­—ç¹ä½“ç¬”ç”» + ç¬¬äºŒå­—ç¹ä½“ç¬”ç”» = 9 + 16 = 25
å¤–æ ¼ = æ€»æ ¼ - äººæ ¼ + 1 = 32 - 16 + 1 = 17
æ€»æ ¼ = å§“æ°ç¹ä½“ç¬”ç”» + ç¬¬ä¸€å­—ç¹ä½“ç¬”ç”» + ç¬¬äºŒå­—ç¹ä½“ç¬”ç”» = 7 + 9 + 16 = 32

=== å•å­—åæƒ…å†µ (å¯¹æ¯”ç¤ºä¾‹: "å´å®£") ===
// å•å­—åç¬”ç”»è®¡ç®— (åŒæ ·ä½¿ç”¨ç¹ä½“ç¬”ç”»)
const å´ç¬”ç”» = surnameInfo.strokes.traditional;      // 7ç”»
const å®£ç¬”ç”» = firstCharInfo.strokes.traditional;    // 9ç”»

å¤©æ ¼ = å§“æ°ç¹ä½“ç¬”ç”» + 1 (å•å§“) = 7 + 1 = 8
äººæ ¼ = å§“æ°ç¹ä½“ç¬”ç”» + åå­—ç¹ä½“ç¬”ç”» = 7 + 9 = 16
åœ°æ ¼ = åå­—ç¹ä½“ç¬”ç”» + 1 (å•å­—åè§„åˆ™) = 9 + 1 = 10
å¤–æ ¼ = æ€»æ ¼ - äººæ ¼ + 1 = 16 - 16 + 1 = 1  
æ€»æ ¼ = å§“æ°ç¹ä½“ç¬”ç”» + åå­—ç¹ä½“ç¬”ç”» = 7 + 9 = 16

// ğŸ¯ å½“å‰ç¤ºä¾‹é‡‡ç”¨åŒå­—åæ¨¡å¼è¿›è¡Œè®¡ç®—

// ğŸ” æœ€ä½³ç¬”ç”»ç»„åˆåˆ†æ (åŸºäºç¹ä½“ç¬”ç”»)
ç»„åˆ1: 7(å´)-9(å®£)-16(æ¶¦) [æ‰€æœ‰æ•°å€¼ä¸ºç¹ä½“ç¬”ç”»]
  å¤©æ ¼: 8 (å‰)
  äººæ ¼: 16 (å¤§å‰) 
  åœ°æ ¼: 25 (å¤§å‰)
  å¤–æ ¼: 17 (å¤§å‰)
  æ€»æ ¼: 32 (å¤§å‰)
  è¯„åˆ†: 95åˆ†

ç»„åˆ2: 7(å´)-11-14 [ç¹ä½“ç¬”ç”»æ­é…]
  å¤©æ ¼: 8 (å‰)
  äººæ ¼: 18 (å¤§å‰)
  åœ°æ ¼: 25 (å¤§å‰) 
  å¤–æ ¼: 15 (å¤§å‰)
  æ€»æ ¼: 32 (å¤§å‰)
  è¯„åˆ†: 92åˆ†

// âš ï¸ é‡è¦æé†’ï¼šç¬”ç”»æ•°æ®è·å–è§„åˆ™
1. ä¼˜å…ˆä½¿ç”¨ï¼šfinal-enhanced-character-database.json ä¸­çš„ strokes.traditional
2. Fallbackä½¿ç”¨ï¼šreal-stroke-data.json (ä»…åœ¨ä¸»æ•°æ®åº“ç¼ºå¤±æ—¶)
3. ç»å¯¹ç¦æ­¢ï¼šä½¿ç”¨ç®€ä½“ç¬”ç”»è¿›è¡Œå‘½ç†è®¡ç®— (strokes.simplifiedä»…ä¾›æ˜¾ç¤º)

=== åŒå­—åæœ€ä½³ç»„åˆ ===
ç»„åˆ1: 7-9-16 (å´+9ç”»+16ç”»)
  å¤©æ ¼: 8 (å‰)
  äººæ ¼: 16 (å¤§å‰) 
  åœ°æ ¼: 25 (å¤§å‰)
  å¤–æ ¼: 17 (å¤§å‰)
  æ€»æ ¼: 32 (å¤§å‰)
  è¯„åˆ†: 95åˆ†

ç»„åˆ2: 7-11-14 (å´+11ç”»+14ç”»)  
  å¤©æ ¼: 8 (å‰)
  äººæ ¼: 18 (å¤§å‰)
  åœ°æ ¼: 25 (å¤§å‰) 
  å¤–æ ¼: 15 (å¤§å‰)
  æ€»æ ¼: 32 (å¤§å‰)
  è¯„åˆ†: 92åˆ†

=== å•å­—åæœ€ä½³ç»„åˆ (å¯¹æ¯”å‚è€ƒ) ===
ç»„åˆA: 7-9 (å´+9ç”»)
  å¤©æ ¼: 8 (å‰)
  äººæ ¼: 16 (å¤§å‰)
  åœ°æ ¼: 10 (å‡¶)  â† å…³é”®å·®å¼‚
  å¤–æ ¼: 1 (å¤§å‰)
  æ€»æ ¼: 16 (å¤§å‰)
  è¯„åˆ†: 75åˆ†

ç»„åˆB: 7-11 (å´+11ç”»)
  å¤©æ ¼: 8 (å‰)
  äººæ ¼: 18 (å¤§å‰)
  åœ°æ ¼: 12 (å‡¶)  â† å…³é”®å·®å¼‚
  å¤–æ ¼: 1 (å¤§å‰)  
  æ€»æ ¼: 18 (å¤§å‰)
  è¯„åˆ†: 78åˆ†

// ğŸ“Š å•å­—å vs åŒå­—å åˆ†æç»“è®º
å•å­—åç¼ºç‚¹: åœ°æ ¼å®¹æ˜“å‡ºç°å‡¶æ•°ï¼Œå¤–æ ¼å›ºå®šä¸º1
åŒå­—åä¼˜åŠ¿: åœ°æ ¼å¯ä»¥ä¼˜åŒ–ï¼Œäº”æ ¼æ­é…æ›´çµæ´»
æ¨èé€‰æ‹©: åŒå­—å (æ›´å®¹æ˜“è·å¾—é«˜è¯„åˆ†)
```

**ğŸ“¤ è¾“å‡º**ï¼š
```json
{
  "surnameInfo": {
    "familyNameStrokes": 7,
    "isSingleSurname": true,
    "tianGeBase": 8
  },
  "nameTypeSettings": {
    "allowSingleChar": true,
    "allowDoubleChar": true,
    "userPreference": "auto",
    "recommendedType": "doubleChar",
    "reason": "åŒå­—ååœ¨ä¸‰æ‰äº”æ ¼æ­é…ä¸Šæ›´æœ‰ä¼˜åŠ¿"
  },
  "strokeCombinations": {
    "doubleCharCombinations": [
      {
        "pattern": "7-9-16",
        "firstCharStrokes": 9,
        "secondCharStrokes": 16,
        "sancaiCombination": "é‡‘åœŸåœŸ",
        "wugeAnalysis": {
          "tianGe": {"value": 8, "luck": "å‰"},
          "renGe": {"value": 16, "luck": "å¤§å‰"},
          "diGe": {"value": 25, "luck": "å¤§å‰"},
          "waiGe": {"value": 17, "luck": "å¤§å‰"},
          "zongGe": {"value": 32, "luck": "å¤§å‰"}
        },
        "overallScore": 95,
        "priority": 1
      },
      {
        "pattern": "7-11-14",
        "firstCharStrokes": 11,
        "secondCharStrokes": 14,
        "sancaiCombination": "é‡‘åœŸåœŸ",
        "wugeAnalysis": {
          "tianGe": {"value": 8, "luck": "å‰"},
          "renGe": {"value": 18, "luck": "å¤§å‰"},
          "diGe": {"value": 25, "luck": "å¤§å‰"},
          "waiGe": {"value": 15, "luck": "å¤§å‰"},
          "zongGe": {"value": 32, "luck": "å¤§å‰"}
        },
        "overallScore": 92,
        "priority": 2
      }
    ],
    "singleCharCombinations": [
      {
        "pattern": "7-9",
        "charStrokes": 9,
        "sancaiCombination": "é‡‘åœŸæ°´",
        "wugeAnalysis": {
          "tianGe": {"value": 8, "luck": "å‰"},
          "renGe": {"value": 16, "luck": "å¤§å‰"},
          "diGe": {"value": 10, "luck": "å‡¶"},
          "waiGe": {"value": 1, "luck": "å¤§å‰"},
          "zongGe": {"value": 16, "luck": "å¤§å‰"}
        },
        "overallScore": 75,
        "priority": 3,
        "limitation": "åœ°æ ¼å‡¶æ•°ï¼Œå½±å“æ—©å¹´è¿åŠ¿"
      },
      {
        "pattern": "7-11",
        "charStrokes": 11,
        "sancaiCombination": "é‡‘åœŸæœ¨",
        "wugeAnalysis": {
          "tianGe": {"value": 8, "luck": "å‰"},
          "renGe": {"value": 18, "luck": "å¤§å‰"},
          "diGe": {"value": 12, "luck": "å‡¶"},
          "waiGe": {"value": 1, "luck": "å¤§å‰"},
          "zongGe": {"value": 18, "luck": "å¤§å‰"}
        },
        "overallScore": 78,
        "priority": 4,
        "limitation": "åœ°æ ¼å‡¶æ•°ï¼Œå½±å“æ—©å¹´è¿åŠ¿"
      }
    ]
  },
  "recommendations": {
    "doubleCharBest": [[9, 16], [11, 14], [13, 12]],
    "singleCharBest": [9, 11, 13, 15],
    "avoidCombinations": [[10, 10], [4, 20]],
    "typeRecommendation": "å»ºè®®é€‰æ‹©åŒå­—åï¼Œäº”æ ¼æ­é…æ›´ä¼˜"
  }
}
```

---

### 3.5 PhoneticPlugin (éŸ³éŸµç¾æ„Ÿåˆ†ææ’ä»¶)

**ğŸ“¥ ä¾èµ–**ï¼šSurnamePlugin ç»“æœ

**ğŸ”„ è®¡ç®—è¿‡ç¨‹**ï¼š
```typescript
éŸ³éŸµç¾æ„Ÿåˆ†æ:
// å§“æ°éŸ³éŸµåŸºç¡€
å§“æ°: å´ (wÃº, ç¬¬2å£°, é˜³å¹³)
å£°æ¯: w-, éŸµæ¯: -Ãº, éŸ³èŠ‚ç»“æ„: ç®€å•

// ğŸ“‹ åå­—ç±»å‹é€‰æ‹©å½±å“éŸ³éŸµåˆ†æ
åå­—ç±»å‹: ç”¨æˆ·å¯é€‰æ‹© "å•å­—å" æˆ– "åŒå­—å"
- å•å­—å: å¦‚ "å´å®£" (2éŸ³èŠ‚ç»„åˆ)
- åŒå­—å: å¦‚ "å´å®£æ¶¦" (3éŸ³èŠ‚ç»„åˆ)

// ğŸµ åŒå­—åéŸ³éŸµåˆ†æ (å½“å‰ç¤ºä¾‹: "å´å®£æ¶¦")
å®£: xuÄn (ç¬¬1å£°, é˜´å¹³)
  å£°æ¯: x-, éŸµæ¯: -uÄn, éŸ³èŠ‚ç»“æ„: å¤æ‚
æ¶¦: rÃ¹n (ç¬¬4å£°, å»å£°)  
  å£°æ¯: r-, éŸµæ¯: -Ã¹n, éŸ³èŠ‚ç»“æ„: ç®€å•

// ğŸµ å•å­—åéŸ³éŸµåˆ†æ (å¯¹æ¯”ç¤ºä¾‹: "å´å®£")
å®£: xuÄn (ç¬¬1å£°, é˜´å¹³)
  å£°æ¯: x-, éŸµæ¯: -uÄn, éŸ³èŠ‚ç»“æ„: å¤æ‚
(æ— ç¬¬äºŒå­—)

// ğŸ” å®Œæ•´éŸ³éŸµæ¨¡å¼åˆ†æ

=== åŒå­—åéŸ³éŸµæ¨¡å¼ (å´å®£æ¶¦) ===
å…¨åæ‹¼éŸ³: wÃº xuÄn rÃ¹n
å£°è°ƒåºåˆ—: [2, 1, 4] (é˜³å¹³-é˜´å¹³-å»å£°)
éŸ³è°ƒå˜åŒ–: é™-å‡-é™ (æœ‰éŸµå¾‹èµ·ä¼)
éŸ³èŠ‚æ•°é‡: 3ä¸ª (ä¸°å¯Œçš„éŸµå¾‹å±‚æ¬¡)

=== å•å­—åéŸ³éŸµæ¨¡å¼ (å´å®£) ===
å…¨åæ‹¼éŸ³: wÃº xuÄn
å£°è°ƒåºåˆ—: [2, 1] (é˜³å¹³-é˜´å¹³)
éŸ³è°ƒå˜åŒ–: é™-å‡ (ç®€æ´æ˜å¿«)
éŸ³èŠ‚æ•°é‡: 2ä¸ª (ç®€æ´æœ‰åŠ›)

// ğŸ¯ å½“å‰ç¤ºä¾‹é‡‡ç”¨åŒå­—åæ¨¡å¼è¿›è¡Œè¯¦ç»†åˆ†æ

// å£°è°ƒå’Œè°åº¦è®¡ç®—
å£°è°ƒæ­é…åŸåˆ™:
1. é¿å…ä¸‰å­—åŒè°ƒ (å¦‚: 2-2-2)
2. åå¥½æœ‰èµ·ä¼å˜åŒ– (å¦‚: 2-1-4 âœ“)
3. é¿å…è¿ç»­ä¸Šå£° (å¦‚: 3-3-X)
4. å¹³ä»„æ­é…å’Œè°

å½“å‰æ¨¡å¼è¯„ä¼°:
- å£°è°ƒå˜åŒ–ä¸°å¯Œ: +15åˆ†
- æ— è¿ç»­åŒè°ƒ: +10åˆ†  
- æœ‰éŸµå¾‹èµ·ä¼: +12åˆ†
- æ€»ä½“å’Œè°åº¦: 85åˆ†

// å‘éŸ³æµç•…åº¦åˆ†æ
å£°æ¯ç»„åˆ: w-x-r (ä¸åŒå£°æ¯ï¼Œé¿å…æ‹—å£)
éŸµæ¯å…³ç³»: Ãº-uÄn-Ã¹n (ç›¸ä¼¼éŸµæ¯ï¼Œäº§ç”Ÿè°å’Œæ„Ÿ)
éŸ³èŠ‚é•¿åº¦: 1-2-1 (é•¿çŸ­ç›¸é—´ï¼ŒèŠ‚å¥æ„Ÿä½³)

å‘éŸ³ç‰¹å¾:
- å£°æ¯æ— å†²çª: 88åˆ†
- éŸµæ¯å’Œè°: 85åˆ†
- éŸ³èŠ‚èŠ‚å¥: 90åˆ†
- æ•´ä½“æµç•…: 88åˆ†

// è°éŸ³é£é™©è¯„ä¼°
æ½œåœ¨è°éŸ³æ£€æŸ¥:
- "å´å®£æ¶¦" â†’ "æ— å®£æ¶¦" (ä¸­æ€§ï¼Œæ— ä¸è‰¯å«ä¹‰)
- æ–¹è¨€è°éŸ³: æ£€æŸ¥ç²¤è¯­ã€é—½å—è¯­ç­‰å¸¸è§æ–¹è¨€
- ä¸è‰¯è°éŸ³: æœªå‘ç°æ˜æ˜¾é£é™©

è°éŸ³å®‰å…¨åº¦: 95åˆ†

// éŸ³éŸµç¾æ„Ÿç‰¹å¾
éŸµå¾‹ç‰¹ç‚¹:
- å¤´éŸµ: æ— æ˜æ˜¾å¤´éŸµ
- å°¾éŸµ: ÃºnéŸ³ç³»ï¼Œå½¢æˆè½»å¾®æŠ¼éŸµæ„Ÿ
- éŸ³ä¹æ€§: å£°è°ƒèµ·ä¼ä¼¼éŸ³é˜¶ï¼Œå¯Œæœ‰éŸµå¾‹
- è¯—è¯æ„Ÿ: ç¬¦åˆå¤å…¸è¯—è¯å¹³ä»„è§„å¾‹

ç¾æ„Ÿè¯„åˆ†: 87åˆ†
```

**ğŸ“¤ è¾“å‡º**ï¼š
```json
{
  "phoneticAnalysis": {
    "fullNamePinyin": ["wÃº", "xuÄn", "rÃ¹n"],
    "tonePattern": [2, 1, 4],
    "tonePatternDescription": "é˜³å¹³-é˜´å¹³-å»å£°",
    "harmonyScores": {
      "toneHarmony": 85,
      "pronunciationFluency": 88, 
      "rhythmBalance": 90,
      "overallPhonetic": 87
    },
    "phoneticFeatures": {
      "toneVariation": "ä¸°å¯Œ",
      "syllableRhythm": "é•¿çŸ­ç›¸é—´",
      "initialConsonants": ["w", "x", "r"],
      "finalVowels": ["Ãº", "uÄn", "Ã¹n"],
      "phoneticFamily": "ä¸åŒéŸ³ç³»ï¼Œé¿å…å•è°ƒ"
    }
  },
  "homophoneAnalysis": {
    "riskLevel": "ä½",
    "safetyScore": 95,
    "potentialHomophones": ["æ— å®£æ¶¦"],
    "dialectRisks": [],
    "avoidanceRecommendations": []
  },
  "phoneticCriteria": {
    "preferredTonePatterns": [
      "2-1-4", "1-3-4", "4-2-1", "3-1-2"
    ],
    "avoidedTonePatterns": [
      "2-2-2", "4-4-4", "3-3-3", "1-1-1"
    ],
    "harmonyThreshold": 80,
    "fluencyRequirement": 85,
    "homophoneRiskLimit": 0.1
  },
  "optimizationSuggestions": [
    {
      "aspect": "å£°è°ƒæ­é…",
      "current": "2-1-4",
      "evaluation": "ä¼˜ç§€",
      "suggestion": "ä¿æŒå½“å‰æ¨¡å¼ï¼ŒéŸµå¾‹æ„Ÿä½³"
    },
    {
      "aspect": "å‘éŸ³æµç•…",  
      "current": 88,
      "evaluation": "è‰¯å¥½",
      "suggestion": "å£°æ¯æ­é…ç†æƒ³ï¼Œæ— éœ€è°ƒæ•´"
    },
    {
      "aspect": "éŸ³éŸµç¾æ„Ÿ",
      "current": 87,
      "evaluation": "ä¼˜ç§€", 
      "suggestion": "æ•´ä½“éŸ³éŸµæ­é…å’Œè°ï¼Œç¬¦åˆä¼ ç»Ÿç¾å­¦"
    }
  ],
  "confidence": 0.92
}
```

---

## ğŸ” Layer 4: å­—ç¬¦ç­›é€‰å±‚æ‰§è¡Œ

### 4.1 CharacterFilterPlugin (ç»¼åˆå­—ç¬¦ç­›é€‰æ’ä»¶)

**ğŸ“¥ ä¾èµ–**ï¼šLayer 3 æ‰€æœ‰ç­–ç•¥æ’ä»¶ç»“æœ

**ğŸ”„ è®¡ç®—è¿‡ç¨‹**ï¼š
```typescript
// âš ï¸ é‡è¦ï¼šæ‰€æœ‰å­—ç¬¦æ•°æ®å¿…é¡»æ¥è‡ªfinal-enhanced-character-database.json

ç»¼åˆç­›é€‰åˆ†æ:
// ç­›é€‰æ¡ä»¶æ±‡æ€»
1. äº”è¡Œè¦æ±‚: é‡‘(ä¼˜å…ˆ)ã€æ°´(æ¬¡é€‰)
2. ç”Ÿè‚–è¦æ±‚: è›‡å–œå­—æ ¹, é¿å…å¿Œç”¨å­—æ ¹
3. å¯“æ„è¦æ±‚: æ™ºæ…§å“å¾·ç±», ç”·æ€§é€‚å®œ
4. ç¬”ç”»è¦æ±‚: 9ç”»ã€16ç”»ç»„åˆä¼˜å…ˆ (ä½¿ç”¨ç¹ä½“ç¬”ç”»)
5. éŸ³éŸµè¦æ±‚: å£°è°ƒå’Œè°, å‘éŸ³æµç•…

// ğŸ¯ å­—ç¬¦æ•°æ®è·å–æ ‡å‡†æµç¨‹
const charLoader = UnifiedCharacterLoader.getInstance();
await charLoader.initialize();

ç¬¬ä¸€å­—ç­›é€‰ (9ç”»ç¹ä½“ç¬”ç”»):
æ­¥éª¤1: ä»ä¸»æ•°æ®åº“æŒ‰ç¬”ç”»ç­›é€‰
- æ•°æ®æº: final-enhanced-character-database.json (å”¯ä¸€åˆæ³•æ¥æº)
- ç­›é€‰æ–¹æ³•: charLoader.getCharactersByStrokeAndWuxing(9, 'jin', true)
- ç­›é€‰æ¡ä»¶: strokes.traditional == 9 && wuxing == 'jin'
- åˆå§‹å€™é€‰: 200+ä¸ª9ç”»é‡‘äº”è¡Œå­—ç¬¦

// é‡è¦ï¼šæ‰€æœ‰å€™é€‰å­—ç¬¦éƒ½å¿…é¡»æ»¡è¶³ isStandard == true (æ ‡å‡†å–åç”¨å­—)
const validChars = candidates.filter(char => {
  const info = charLoader.getCharacterInfo(char);
  return info && info.isStandard === true;
});

æ­¥éª¤2: äº”è¡Œç­›é€‰ (é‡‘æ°´äº”è¡Œï¼Œä¸»æ•°æ®åº“ä¼˜å…ˆ)
- é‡‘äº”è¡Œå­—ç¬¦: charLoader.getCharactersByWuxing('jin')
- æ°´äº”è¡Œå­—ç¬¦: charLoader.getCharactersByWuxing('shui')
- ç­›é€‰æ¡ä»¶: å¿…é¡»æ¥è‡ªfinal-enhanced-character-database.json
- é‡‘äº”è¡Œ9ç”»å€™é€‰: ["é’¦", "é’¢", "é’§", "é’ˆ", "é’‰"...] (ç¡®ä¿ç¹ä½“ç¬”ç”»=9)
- æ°´äº”è¡Œ9ç”»å€™é€‰: ["æ³‰", "æ³³", "æ³½", "æ´‹", "æ´ª"...] (ç¡®ä¿ç¹ä½“ç¬”ç”»=9)
- åˆå¹¶ç»“æœ: 150+ä¸ªæ ‡å‡†å­—ç¬¦

æ­¥éª¤3: ç”Ÿè‚–ç­›é€‰ (è›‡å–œå­—æ ¹)
- åŸºäºZodiacPluginç»“æœ: å–œ"å£"ã€"å®€"ã€"æœ¨"ç­‰å­—æ ¹
- å­—æ ¹åŒ¹é…: ä½¿ç”¨info.radicalè¿›è¡Œç²¾ç¡®åŒ¹é…
- ç­›é€‰ç®—æ³•: 
  candidates.filter(char => {
    const info = charLoader.getCharacterInfo(char);
    return SNAKE_PREFERRED_RADICALS.includes(info.radical);
  });
- ç­›é€‰ç»“æœ: 60+ä¸ªå­—ç¬¦

æ­¥éª¤4: å¯“æ„ç­›é€‰ (ç§¯ææ­£é¢)
- å¯“æ„æ¥æº: ä½¿ç”¨info.meaningsæ•°ç»„
- ç­›é€‰æ ‡å‡†: ç§¯æå¯“æ„ã€æ–‡åŒ–å†…æ¶µã€æ€§åˆ«é€‚å®œ
- è¯­ä¹‰åˆ†æ: åŸºäºmeanings[0]ä¸»è¦å­—ä¹‰åˆ¤æ–­
- ç­›é€‰ç»“æœ: 20ä¸ªå­—ç¬¦

æ­¥éª¤5: éŸ³éŸµç­›é€‰ (å£°è°ƒå’Œè°)
- æ‹¼éŸ³æ¥æº: ä½¿ç”¨info.primaryPinyinå’Œinfo.tone
- ä¸å§“æ°"å´"(wÃº, ç¬¬2å£°)çš„å£°è°ƒæ­é…
- ä¼˜é€‰å£°è°ƒ: ç¬¬1å£°ã€ç¬¬4å£° (å½¢æˆèµ·ä¼å˜åŒ–)
- é¿å…å£°è°ƒ: ç¬¬2å£° (é¿å…é‡å¤)
- æœ€ç»ˆå€™é€‰: 12ä¸ªé«˜è´¨é‡å­—ç¬¦

ç¬¬äºŒå­—ç­›é€‰ (16ç”»ç¹ä½“ç¬”ç”»):
æ­¥éª¤1: ä¸»æ•°æ®åº“ç¬”ç”»ç­›é€‰
- æ•°æ®æº: final-enhanced-character-database.json
- ç­›é€‰æ–¹æ³•: charLoader.getCharactersByStrokeAndWuxing(16, ['jin', 'shui'], true)
- ç­›é€‰æ¡ä»¶: strokes.traditional == 16 && wuxing in ['jin', 'shui']
- åˆå§‹å€™é€‰: 100+ä¸ª16ç”»é‡‘æ°´å­—ç¬¦

æ­¥éª¤2-5: åŒä¸Šè¿°æµç¨‹ï¼Œåº”ç”¨äº”è¡Œã€ç”Ÿè‚–ã€å¯“æ„ã€éŸ³éŸµç­›é€‰
- é‡‘äº”è¡Œ16ç”»å€™é€‰: ["é”¦", "é”", "é“­", "é”‹"...] (ç¹ä½“ç¬”ç”»=16)
- æ°´äº”è¡Œ16ç”»å€™é€‰: ["æ¶¦", "æ¾„", "æ½®", "æ¿®"...] (ç¹ä½“ç¬”ç”»=16)
- æœ€ç»ˆå€™é€‰: 8ä¸ªé«˜è´¨é‡å­—ç¬¦

// âš ï¸ æ•°æ®è´¨é‡éªŒè¯
function validateCharacterForNaming(char: string): boolean {
  const info = charLoader.getCharacterInfo(char);
  if (!info) return false;
  
  // å¿…é¡»æ»¡è¶³çš„æ¡ä»¶
  return info.isStandard &&                    // æ ‡å‡†å–åç”¨å­—
         info.strokes.traditional > 0 &&       // æœ‰æ•ˆç¹ä½“ç¬”ç”»
         info.wuxing &&                        // æ˜ç¡®äº”è¡Œå±æ€§
         info.primaryPinyin &&                 // æ˜ç¡®ä¸»è¦è¯»éŸ³
         info.tone > 0 &&                      // æ˜ç¡®å£°è°ƒ
         info.radical;                         // æ˜ç¡®éƒ¨é¦–
}

å…·ä½“è¯„åˆ†è®¡ç®— (åŸºäºä¸»æ•°æ®åº“æ•°æ®):
å­—ç¬¦"é’¦":
- å­—ç¬¦ä¿¡æ¯: charLoader.getCharacterInfo('é’¦')
- äº”è¡Œè¯„åˆ†: 95 (wuxing: 'jin'ï¼Œå®Œå…¨ç¬¦åˆ)
- ç”Ÿè‚–è¯„åˆ†: 75 (radical: 'é’…'ï¼Œä¸­æ€§)
- å¯“æ„è¯„åˆ†: 85 (meanings: ['æ­æ•¬é’¦ä½©']ï¼Œç§¯æ)
- ç¬”ç”»è¯„åˆ†: 95 (strokes.traditional: 9ï¼Œå®Œå…¨åŒ¹é…)
- éŸ³éŸµè¯„åˆ†: 80 (primaryPinyin: 'qÄ«n', tone: 1ï¼Œæ­é…è‰¯å¥½)
- ç»¼åˆè¯„åˆ†: 86.0

å­—ç¬¦"æ¶¦":  
- å­—ç¬¦ä¿¡æ¯: charLoader.getCharacterInfo('æ¶¦')
- äº”è¡Œè¯„åˆ†: 95 (wuxing: 'shui'ï¼Œç¬¦åˆæ¬¡é€‰)
- ç”Ÿè‚–è¯„åˆ†: 80 (radical: 'æ°µ'ï¼Œæ°´æ¶¦è›‡å–œ)
- å¯“æ„è¯„åˆ†: 88 (meanings: ['æ¶¦æ³½æ»‹æ¶¦']ï¼Œç§¯æ)
- ç¬”ç”»è¯„åˆ†: 95 (strokes.traditional: 16ï¼Œå®Œå…¨åŒ¹é…)
- éŸ³éŸµè¯„åˆ†: 92 (primaryPinyin: 'rÃ¹n', tone: 4ï¼Œå½¢æˆ2-1-4ç†æƒ³æ¨¡å¼)
- ç»¼åˆè¯„åˆ†: 90.0

// ğŸš« ä¸¥ç¦ä½¿ç”¨çš„æ•°æ®æº
âŒ ç¦æ­¢ä½¿ç”¨: wuxing_dict_jianti.json ä½œä¸ºä¸»è¦æ•°æ®æº
âŒ ç¦æ­¢ä½¿ç”¨: real-stroke-data.json ä½œä¸ºä¸»è¦æ•°æ®æº
âŒ ç¦æ­¢ä½¿ç”¨: ç®€ä½“ç¬”ç”» (strokes.simplified) è¿›è¡Œå‘½ç†è®¡ç®—
```

**ğŸ“¤ è¾“å‡º**ï¼š
```json
{
  "candidatePool": {
    "firstCharCandidates": [
      {
        "character": "é’¦",
        "scores": {"wuxing": 95, "zodiac": 75, "meaning": 85, "stroke": 95, "overall": 87.5},
        "metadata": {"strokes": 9, "wuxing": "é‡‘", "meaning": "æ­æ•¬é’¦ä½©", "culturalLevel": 85}
      },
      {
        "character": "å®£", 
        "scores": {"wuxing": 85, "zodiac": 95, "meaning": 80, "stroke": 95, "overall": 88.75},
        "metadata": {"strokes": 9, "wuxing": "é‡‘", "meaning": "å®£æ‰¬ä¼ æ’­", "culturalLevel": 80}
      }
    ],
    "secondCharCandidates": [
      {
        "character": "æ¶¦",
        "scores": {"wuxing": 95, "zodiac": 80, "meaning": 88, "stroke": 95, "overall": 89.5},
        "metadata": {"strokes": 16, "wuxing": "æ°´", "meaning": "æ¶¦æ³½æ»‹æ¶¦", "culturalLevel": 85}
      },
      {
        "character": "é”¦",
        "scores": {"wuxing": 90, "zodiac": 75, "meaning": 90, "stroke": 95, "overall": 87.5},
        "metadata": {"strokes": 16, "wuxing": "é‡‘", "meaning": "é”¦ç»£å‰ç¨‹", "culturalLevel": 88}
      }
    ]
  },
  "filteringSummary": {
    "totalCandidates": 27,
    "qualityDistribution": {"ä¼˜ç§€": 8, "è‰¯å¥½": 12, "ä¸€èˆ¬": 7}
  }
}
```

---

## ğŸ¨ Layer 5: åå­—ç”Ÿæˆå±‚æ‰§è¡Œ

### 5.1 NameCombinationPlugin (åå­—ç»„åˆç”Ÿæˆæ’ä»¶)

**ğŸ“¥ ä¾èµ–**ï¼šCharacterFilterPlugin ç»“æœ

**ğŸ”„ è®¡ç®—è¿‡ç¨‹**ï¼š
```typescript
åå­—ç»„åˆç”Ÿæˆ:
// åŸºäºå€™é€‰å­—ç¬¦æ± è¿›è¡Œç»„åˆ
ç¬¬ä¸€å­—å€™é€‰: ["é’¦", "å®£", "æ³½", "å“²", "å®"]
ç¬¬äºŒå­—å€™é€‰: ["æ¶¦", "é”¦", "é“­", "æ¾„", "ç‘"]

ç»„åˆç­–ç•¥:
1. äº”è¡Œæ­é…: é‡‘+æ°´ > é‡‘+é‡‘ > æ°´+æ°´
2. éŸ³éŸµå’Œè°: é¿å…è¿ç»­ç›¸åŒå£°è°ƒ
3. å¯“æ„åè°ƒ: æ•´ä½“å¯“æ„è¦ç»Ÿä¸€
4. å­—å½¢ç¾è§‚: ç»“æ„æ­é…è¦å’Œè°

ç”Ÿæˆå€™é€‰åå­—:
1. å´é’¦æ¶¦ (é‡‘+æ°´)
2. å´å®£æ¶¦ (é‡‘+æ°´) 
3. å´é’¦é”¦ (é‡‘+é‡‘)
4. å´å®£é”¦ (é‡‘+é‡‘)
5. å´æ³½æ¶¦ (æ°´+æ°´)

åŸºç¡€è¯„ä¼° (ä¸å«è¯¦ç»†è¯„åˆ†):
- äº”è¡Œæ­é…åˆç†æ€§
- éŸ³éŸµåˆæ­¥å’Œè°åº¦  
- å¯“æ„åŸºæœ¬ç»Ÿä¸€æ€§
- å­—å½¢ç»“æ„ç¾è§‚åº¦
```

**ğŸ“¤ è¾“å‡º**ï¼š
```json
{
  "generatedNames": [
    {
      "fullName": "å´é’¦æ¶¦",
      "givenName": "é’¦æ¶¦", 
      "characters": ["é’¦", "æ¶¦"],
      "basicInfo": {
        "totalStrokes": 32,
        "wuxingCombination": ["æœ¨", "é‡‘", "æ°´"],
        "sourceScores": {"firstChar": 87.5, "secondChar": 89.5}
      },
      "generationMetadata": {
        "combinationRank": 2,
        "diversityScore": 85,
        "harmonyPotential": 90,
        "uniquenessLevel": 78
      }
    },
    {
      "fullName": "å´å®£æ¶¦",
      "givenName": "å®£æ¶¦",
      "characters": ["å®£", "æ¶¦"], 
      "basicInfo": {
        "totalStrokes": 32,
        "wuxingCombination": ["æœ¨", "é‡‘", "æ°´"],
        "sourceScores": {"firstChar": 88.75, "secondChar": 89.5}
      },
      "generationMetadata": {
        "combinationRank": 1,
        "diversityScore": 88,
        "harmonyPotential": 92,
        "uniquenessLevel": 80
      }
    }
  ],
  "generationSummary": {
    "totalCombinations": 25,
    "filteringCriteria": ["äº”è¡Œæ­é…", "éŸ³éŸµå’Œè°", "å¯“æ„ç»Ÿä¸€"],
    "processingTime": 120
  }
}
```

---

## ğŸ“Š Layer 6: åå­—è¯„åˆ†å±‚æ‰§è¡Œ

### 6.1 SancaiScoringPlugin (ä¸‰æ‰äº”æ ¼è¯„åˆ†æ’ä»¶)

**ğŸ“¥ ä¾èµ–**ï¼šNameCombinationPlugin ç»“æœ

**ğŸ”„ è®¡ç®—è¿‡ç¨‹ (ä»¥"å´å®£æ¶¦"ä¸ºä¾‹)**ï¼š
```typescript
ä¸‰æ‰äº”æ ¼è¯¦ç»†è®¡ç®—:
// åŸºç¡€ç¬”ç”»
å§“æ°: å´(7ç”»)
ç¬¬ä¸€å­—: å®£(9ç”»)  
ç¬¬äºŒå­—: æ¶¦(16ç”»)

// äº”æ ¼è®¡ç®—
å¤©æ ¼ = 7 + 1 = 8
äººæ ¼ = 7 + 9 = 16  
åœ°æ ¼ = 9 + 16 = 25
å¤–æ ¼ = 8 + 25 - 16 = 17
æ€»æ ¼ = 7 + 9 + 16 = 32

// äº”è¡Œå¯¹åº” (å°¾æ•°æ³•)
å¤©æ ¼8 â†’ é‡‘ (8,9ä¸ºé‡‘)
äººæ ¼16 â†’ åœŸ (6,7ä¸ºåœŸ) 
åœ°æ ¼25 â†’ åœŸ (5,6ä¸ºåœŸ)
å¤–æ ¼17 â†’ é‡‘ (7,8ä¸ºé‡‘)
æ€»æ ¼32 â†’ æœ¨ (1,2ä¸ºæœ¨)

// ä¸‰æ‰ç»„åˆ
å¤©æ‰: é‡‘
äººæ‰: åœŸ  
åœ°æ‰: åœŸ
ä¸‰æ‰ç»„åˆ: é‡‘åœŸåœŸ (é‡‘ç”ŸåœŸ, ç›¸ç”Ÿå‰åˆ©)

// æ•°ç†å‰å‡¶æŸ¥è¯¢
8: å‹¤å‹‰å‘å±•æ•° (å‰)
16: åšå¾·è½½ç‰©æ•° (å¤§å‰)
25: è‹±ä¿Šåˆšæ¯…æ•° (å¤§å‰) 
17: çªç ´ä¸‡éš¾æ•° (å¤§å‰)
32: ä¾¥å¹¸å¤šæœ›æ•° (å¤§å‰)
```

**ğŸ“¤ è¾“å‡º**ï¼š
```json
{
  "nameScores": [
    {
      "fullName": "å´å®£æ¶¦",
      "wugeAnalysis": {
        "tianGe": {"value": 8, "meaning": "å‹¤å‹‰å‘å±•", "luck": "å‰", "score": 80},
        "renGe": {"value": 16, "meaning": "åšå¾·è½½ç‰©", "luck": "å¤§å‰", "score": 95},
        "diGe": {"value": 25, "meaning": "è‹±ä¿Šåˆšæ¯…", "luck": "å¤§å‰", "score": 95},
        "waiGe": {"value": 17, "meaning": "çªç ´ä¸‡éš¾", "luck": "å¤§å‰", "score": 95},
        "zongGe": {"value": 32, "meaning": "ä¾¥å¹¸å¤šæœ›", "luck": "å¤§å‰", "score": 95}
      },
      "sancaiCombination": {
        "heaven": "é‡‘",
        "human": "åœŸ", 
        "earth": "åœŸ",
        "combination": "é‡‘åœŸåœŸ",
        "harmony": 90,
        "interpretation": "é‡‘ç”ŸåœŸï¼ŒåŸºç¡€ç¨³å›ºï¼Œå‘å±•é¡ºåˆ©",
        "score": 90
      },
      "overallSancaiScore": 92,
      "strengths": ["ä¸‰æ‰ç›¸ç”Ÿ", "äº”æ ¼ä¿±ä½³", "æ•°ç†å¤§å‰"],
      "weaknesses": ["äººåœ°åŒåœŸç•¥é‡"]
    }
  ]
}
```

---

### 6.2 PhoneticScoringPlugin (éŸ³éŸµç¾æ„Ÿè¯„åˆ†æ’ä»¶)

**ğŸ“¥ ä¾èµ–**ï¼šNameCombinationPlugin ç»“æœ

**ğŸ”„ è®¡ç®—è¿‡ç¨‹ (ä»¥"å´å®£æ¶¦"ä¸ºä¾‹)**ï¼š
```typescript
éŸ³éŸµç¾æ„Ÿåˆ†æ:
// æ‹¼éŸ³åˆ†æ
å´: wÃº (ç¬¬2å£°, é˜³å¹³)
å®£: xuÄn (ç¬¬1å£°, é˜´å¹³)  
æ¶¦: rÃ¹n (ç¬¬4å£°, å»å£°)

// å£°è°ƒç»„åˆ
å£°è°ƒæ¨¡å¼: 2-1-4 (é˜³å¹³-é˜´å¹³-å»å£°)
å£°è°ƒå˜åŒ–: é™-å‡-é™ (æœ‰èµ·ä¼ï¼Œè¾ƒå’Œè°)

// éŸ³éŸµç‰¹å¾åˆ†æ
1. å¤´éŸµ: æ— æ˜æ˜¾å¤´éŸµ
2. éŸµæ¯: Ãº-uÄn-Ã¹n (æœ‰ç›¸ä¼¼éŸ³ç´ , å’Œè°)
3. å£°æ¯: w-x-r (ä¸åŒå£°æ¯, é¿å…æ‹—å£)

// å‘éŸ³éš¾åº¦è¯„ä¼°
- å•å­—å‘éŸ³: éƒ½æ˜¯å¸¸ç”¨å­—, å‘éŸ³æ¸…æ™°
- è¿è¯»æµç•…: æ— æ˜æ˜¾é˜»æ»
- éŸ³èŠ‚é•¿åº¦: 1-2-1 (èŠ‚å¥é€‚ä¸­)

// éŸ³ä¹æ€§åˆ†æ
- éŸ³è°ƒèµ·ä¼: æœ‰å‡æœ‰é™, å¯Œæœ‰éŸµå¾‹
- éŸ³é•¿æ­é…: é•¿çŸ­ç›¸é—´, èŠ‚å¥æ„Ÿå¥½
- æ•´ä½“å’Œè°: 85åˆ†
```

**ğŸ“¤ è¾“å‡º**ï¼š
```json
{
  "nameScores": [
    {
      "fullName": "å´å®£æ¶¦",
      "phoneticAnalysis": {
        "pinyin": ["wÃº", "xuÄn", "rÃ¹n"],
        "tones": [2, 1, 4],
        "harmony": {
          "overallScore": 85,
          "tonePattern": "2-1-4",
          "toneHarmony": 85,
          "rhythmScore": 88
        },
        "pronunciation": {
          "difficulty": 20,
          "clarity": 95,
          "smoothness": 88,
          "memorability": 85
        },
        "aestheticFeatures": {
          "alliteration": false,
          "rhyme": "ç›¸ä¼¼éŸµæ¯",
          "rhythm": "æœ‰èµ·ä¼",
          "musicality": 85
        }
      },
      "overallPhoneticScore": 85,
      "highlights": ["å£°è°ƒæœ‰å˜åŒ–", "éŸµæ¯å’Œè°", "å‘éŸ³æ¸…æ™°"],
      "improvements": ["å¯è€ƒè™‘æ›´å¤šéŸ³éŸµå˜åŒ–"]
    }
  ]
}
```

---

### 6.3 WuxingBalanceScoringPlugin (äº”è¡Œå¹³è¡¡è¯„åˆ†æ’ä»¶)

**ğŸ“¥ ä¾èµ–**ï¼šNameCombinationPlugin + XiYongShenPlugin ç»“æœ

**ğŸ”„ è®¡ç®—è¿‡ç¨‹ (ä»¥"å´å®£æ¶¦"ä¸ºä¾‹)**ï¼š
```typescript
äº”è¡Œå¹³è¡¡åˆ†æ:
// å§“åäº”è¡Œåˆ†å¸ƒ
å§“æ°: å´(æœ¨)
ç¬¬ä¸€å­—: å®£(é‡‘)
ç¬¬äºŒå­—: æ¶¦(æ°´)
æ•´ä½“: æœ¨-é‡‘-æ°´

// äº”è¡Œå…³ç³»åˆ†æ
æœ¨ç”Ÿç«, ç«ç”ŸåœŸ, åœŸç”Ÿé‡‘, é‡‘ç”Ÿæ°´, æ°´ç”Ÿæœ¨
å½“å‰æµå‘: æœ¨â†’(ä¸ç›´æ¥ç›¸ç”Ÿ)â†’é‡‘â†’æ°´â†’æœ¨ (å½¢æˆå¾ªç¯)

// ä¸å…«å­—å–œç”¨ç¥å¯¹æ¯”
å…«å­—å–œç”¨ç¥: é‡‘ã€æ°´
åå­—äº”è¡Œ: é‡‘ã€æ°´ (å®Œå…¨ç¬¦åˆ)
ç¬¦åˆåº¦: 95%

// äº”è¡Œå¹³è¡¡è®¡ç®—
æœ¨: 1ä¸ª (å§“æ°)
é‡‘: 1ä¸ª (å®£)  
æ°´: 1ä¸ª (æ¶¦)
ç«: 0ä¸ª
åœŸ: 0ä¸ª

å¹³è¡¡çŠ¶æ€: ä¸‰è¡Œå¹¶é‡, ç¼ºç«åœŸ
ä¼˜åŠ¿: å®Œå…¨é¿å¼€å¿Œç¥ç«åœŸ
åŠ£åŠ¿: ç•¥æ˜¾å•è–„, ç¼ºä¹åœŸçš„ç¨³å®š

// èƒ½é‡æµåŠ¨åˆ†æ
æœ¨(å´) â†’ é‡‘(å®£): é‡‘å…‹æœ¨ (ç•¥å†²çª)
é‡‘(å®£) â†’ æ°´(æ¶¦): é‡‘ç”Ÿæ°´ (ç›¸ç”Ÿå’Œè°)
æ°´(æ¶¦) â†’ æœ¨(å´): æ°´ç”Ÿæœ¨ (å›å½’ç›¸ç”Ÿ)
æ•´ä½“è¯„ä»·: åŸºæœ¬å’Œè°, æœ‰è½»å¾®å†²çª
```

**ğŸ“¤ è¾“å‡º**ï¼š
```json
{
  "nameScores": [
    {
      "fullName": "å´å®£æ¶¦",
      "currentState": {
        "surnameWuxing": "æœ¨",
        "charactersWuxing": ["é‡‘", "æ°´"],
        "overallDistribution": {"æœ¨": 1, "é‡‘": 1, "æ°´": 1, "ç«": 0, "åœŸ": 0},
        "dominantElements": ["æœ¨", "é‡‘", "æ°´"],
        "weakElements": ["ç«", "åœŸ"]
      },
      "balanceAnalysis": {
        "harmonyScore": 88,
        "balanceType": "åé‡å‹", 
        "energyFlow": "é‡‘ç”Ÿæ°´ï¼Œæ°´ç”Ÿæœ¨ï¼ŒåŸºæœ¬æµé€š",
        "strengthAssessment": {"æœ¨": 60, "é‡‘": 80, "æ°´": 75, "ç«": 0, "åœŸ": 0},
        "relationalAnalysis": {
          "generateChain": ["é‡‘â†’æ°´", "æ°´â†’æœ¨"],
          "overcomeCycle": ["é‡‘â†’æœ¨"],
          "supportRelations": ["é‡‘æ°´ç›¸ç”Ÿ", "æ°´æœ¨ç›¸ç”Ÿ"],
          "conflictRelations": ["é‡‘æœ¨ç›¸å…‹"]
        }
      },
      "xiYongAlignment": {
        "complianceScore": 95,
        "deviations": ["è½»å¾®é‡‘å…‹æœ¨"],
        "alignmentLevel": "é«˜åº¦ç¬¦åˆ"
      },
      "overallWuxingScore": 88,
      "recommendations": ["å®Œç¾å¥‘åˆå–œç”¨ç¥", "é¿å¼€å¿Œç¥ç«åœŸ", "è½»å¾®é‡‘å…‹æœ¨å¯å¿½ç•¥"]
    }
  ]
}
```

---

### 6.4 DayanScoringPlugin (å¤§è¡æ•°ç†è¯„åˆ†æ’ä»¶)

**ğŸ“¥ ä¾èµ–**ï¼šNameCombinationPlugin + SancaiScoringPlugin ç»“æœ

**ğŸ”„ è®¡ç®—è¿‡ç¨‹ (ä»¥"å´å®£æ¶¦"ä¸ºä¾‹)**ï¼š
```typescript
81æ•°ç†å‰å‡¶åˆ†æ:
// åŸºäºä¸‰æ‰äº”æ ¼æ•°å€¼è¿›è¡Œ81æ•°ç†æŸ¥è¯¢
å¤©æ ¼8: å…«å¦ä¹‹æ•°ï¼Œåšåˆšä¸å±ˆ (åŠå‰)
äººæ ¼16: åšå¾·è½½ç‰©ï¼Œå®‰å¯Œå°Šè£ (å¤§å‰)
åœ°æ ¼25: èµ„æ€§è‹±æ•ï¼Œæ‰èƒ½å¥‡ç‰¹ (å¤§å‰)  
å¤–æ ¼17: çªç ´ä¸‡éš¾ï¼ŒåˆšæŸ”å…¼å¤‡ (å¤§å‰)
æ€»æ ¼32: æ± ä¸­ä¹‹é¾™ï¼Œé£äº‘é™…ä¼š (å¤§å‰)

// æ•°ç†å†…æ¶µè§£æ
16æ•°å†…æ¶µ:
- åŸºæœ¬å«ä¹‰: åšé‡å“å¾·ï¼Œè½½ç‰©åŒ…å®¹
- äººæ ¼ç‰¹å¾: æ¸©å’Œæ•¦åšï¼Œå“å¾·é«˜å°šï¼Œå—äººå°Šæ•¬
- äº‹ä¸šè¿åŠ¿: èƒ½è·ä¼—äººåŠ©åŠ›ï¼Œæˆå°±å¤§ä¸š
- äººé™…å…³ç³»: å¾·é«˜æœ›é‡ï¼Œäººç¼˜æä½³
- è´¢è¿: å› å¾·è€Œå¯Œï¼Œè´¢æºå¹¿è¿›

25æ•°å†…æ¶µ:  
- åŸºæœ¬å«ä¹‰: èµ„è´¨èªæ•ï¼Œä¸ªæ€§ç‹¬ç‰¹
- æ‰èƒ½ç‰¹ç‚¹: å¤©èµ‹å¼‚ç¦€ï¼Œæ‰åå‡ºä¼—
- å¤„äº‹æ–¹å¼: ç‹¬ç‰¹è§è§£ï¼Œä¸éšæ³¢é€æµ
- æˆåŠŸé€”å¾„: é æ‰èƒ½æ™ºæ…§è·å¾—æˆåŠŸ

// æ€§åˆ«é€‚å®œæ€§åˆ†æ (ç”·æ€§)
16æ•°: ç”·æ€§é€‚å®œåº¦95% (åšå¾·è½½ç‰©ï¼Œç”·æ€§ç‰¹è´¨)
25æ•°: ç”·æ€§é€‚å®œåº¦90% (åˆšæ¯…è‹±æ•ï¼Œç¬¦åˆç”·æ€§)
32æ•°: ç”·æ€§é€‚å®œåº¦92% (é¾™è…¾ä¹å¤©ï¼Œç”·æ€§è±¡å¾)
```

**ğŸ“¤ è¾“å‡º**ï¼š
```json
{
  "nameScores": [
    {
      "fullName": "å´å®£æ¶¦",
      "numberAnalysis": [
        {
          "position": "äººæ ¼",
          "number": 16,
          "interpretation": {
            "meaning": "åšå¾·è½½ç‰©ï¼Œå®‰å¯Œå°Šè£",
            "characteristics": ["å“å¾·é«˜å°š", "å—äººå°Šæ•¬", "å¾·é«˜æœ›é‡"],
            "fortune": "å¤§å‰",
            "genderSuitability": {"male": 95, "female": 85}
          },
          "detailedAnalysis": {
            "personality": ["æ¸©å’Œæ•¦åš", "åŒ…å®¹å¤§åº¦", "å“å¾·é«˜å°š"],
            "talents": ["é¢†å¯¼æ‰èƒ½", "é“å¾·ä¿®å…»", "äººé™…åè°ƒ"],
            "challenges": ["å¯èƒ½è¿‡äºä¿å®ˆ"],
            "lifeAspects": {
              "career": "èƒ½è·ä¼—äººåŠ©åŠ›ï¼Œæˆå°±å¤§ä¸š",
              "wealth": "å› å¾·è€Œå¯Œï¼Œè´¢æºç¨³å®š", 
              "health": "èº«å¿ƒå¥åº·ï¼Œé•¿å¯¿ä¹‹è±¡",
              "relationships": "äººç¼˜æä½³ï¼Œè´µäººç›¸åŠ©",
              "family": "å®¶åº­å’Œç¦ï¼Œå­å­™å…´æ—º"
            }
          },
          "score": 95
        }
      ],
      "overallDayanScore": 92,
      "balanceAnalysis": "æ•°ç†ç»„åˆä¼˜ç§€ï¼Œå‰å‡¶æ­é…åˆç†",
      "genderCompatibility": 93
    }
  ]
}
```

---

### 6.5 ComprehensiveScoringPlugin (ç»¼åˆè¯„åˆ†æ’åºæ’ä»¶)

**ğŸ“¥ ä¾èµ–**ï¼šLayer 6 æ‰€æœ‰è¯„åˆ†æ’ä»¶ç»“æœ

**ğŸ”„ è®¡ç®—è¿‡ç¨‹**ï¼š
```typescript
ç»¼åˆè¯„åˆ†è®¡ç®—:
// è¯„åˆ†æƒé‡è®¾ç½®
æƒé‡é…ç½®:
- ä¸‰æ‰äº”æ ¼: 25% (ä¼ ç»Ÿå‘½ç†æ ¸å¿ƒ)
- äº”è¡Œå¹³è¡¡: 25% (å…«å­—åŒ¹é…é‡è¦)  
- éŸ³éŸµç¾æ„Ÿ: 20% (ç°ä»£å–åé‡è§†)
- å¤§è¡æ•°ç†: 20% (æ•°ç†å‰å‡¶)
- ç”Ÿè‚–é€‚å®œ: 10% (ä¼ ç»Ÿä¹ ä¿—)

// "å´å®£æ¶¦"ç»¼åˆè®¡ç®—
åˆ†é¡¹å¾—åˆ†:
- ä¸‰æ‰äº”æ ¼: 92åˆ†
- äº”è¡Œå¹³è¡¡: 88åˆ†
- éŸ³éŸµç¾æ„Ÿ: 85åˆ†  
- å¤§è¡æ•°ç†: 92åˆ†
- ç”Ÿè‚–åŒ¹é…: 88åˆ†

åŠ æƒè®¡ç®—:
ç»¼åˆå¾—åˆ† = 92Ã—0.25 + 88Ã—0.25 + 85Ã—0.20 + 92Ã—0.20 + 88Ã—0.10
         = 23 + 22 + 17 + 18.4 + 8.8
         = 89.2åˆ†

// è´¨é‡ç­‰çº§è¯„å®š
90-100: å“è¶Š (excellent)
80-89: ä¼˜ç§€ (good)  
70-79: è‰¯å¥½ (average)
60-69: ä¸€èˆ¬ (fair)
<60: éœ€æ”¹è¿› (poor)

"å´å®£æ¶¦": 89.2åˆ† â†’ ä¼˜ç§€ç­‰çº§

// ç‰¹è‰²åˆ†æ
æ–‡åŒ–å†…æ¶µ: 95åˆ† (å®£æ‰¬æ¶¦æ³½ï¼Œå¯“æ„æ·±è¿œ)
ç°ä»£é€‚ç”¨: 88åˆ† (æ˜“è¯»æ˜“å†™ï¼Œå›½é™…å‹å¥½)
ç‹¬ç‰¹æ€§: 80åˆ† (ç»„åˆè¾ƒä¸ºç‹¬ç‰¹)
ä¼ ç»Ÿä»·å€¼: 92åˆ† (ç¬¦åˆä¼ ç»Ÿå–åç†å¿µ)
```

**ğŸ“¤ è¾“å‡º**ï¼š
```json
{
  "finalRecommendations": [
    {
      "fullName": "å´å®£æ¶¦",
      "scoreBreakdown": {
        "sancai": 92,
        "phonetic": 85,
        "wuxingBalance": 88,
        "dayan": 92,
        "zodiac": 88
      },
      "comprehensiveScore": 89.2,
      "weightedScore": 89.2,
      "qualityAssessment": {
        "level": "excellent",
        "confidence": 0.92,
        "uniqueness": 80,
        "traditionalValue": 92,
        "modernAppeal": 88
      },
      "analysisReport": {
        "strengths": [
          "ä¸‰æ‰äº”æ ¼ä¿±ä½³ï¼Œæ•°ç†å¤§å‰",
          "å®Œç¾å¥‘åˆå…«å­—å–œç”¨ç¥é‡‘æ°´",
          "å¯“æ„æ·±è¿œï¼Œå®£æ‰¬æ¶¦æ³½ï¼Œå“å¾·é«˜å°š",
          "éŸ³éŸµå’Œè°ï¼Œå‘éŸ³æ¸…æ™°",
          "ç”Ÿè‚–é€‚å®œï¼Œè›‡å–œé‡‘æ°´"
        ],
        "considerations": [
          "é‡‘å…‹æœ¨çš„è½»å¾®å†²çªå¯å¿½ç•¥",
          "éŸ³è°ƒå˜åŒ–å¯ä»¥æ›´ä¸°å¯Œ",
          "æ€»ä½“å¹³è¡¡æ€§ä¼˜ç§€"
        ],
        "culturalSignificance": "å®£æ‰¬ä¼ æ’­ä¸æ¶¦æ³½æ»‹å…»çš„ç»“åˆï¼Œä½“ç°æ—¢èƒ½å‘å£°åˆèƒ½åŒ…å®¹çš„å“æ ¼",
        "personalityImplications": [
          "å“å¾·é«˜å°šï¼Œå—äººå°Šæ•¬",
          "æ‰åå‡ºä¼—ï¼Œè§è§£ç‹¬ç‰¹", 
          "æ¸©å’ŒåŒ…å®¹ï¼Œäººé™…å’Œè°",
          "äº‹ä¸šæœ‰æˆï¼Œè´¢è¿ç¨³å®š"
        ],
        "lifeAspectPredictions": {
          "career": "èƒ½è·å¾—ä¼—äººåŠ©åŠ›ï¼Œåœ¨ä¼ æ’­ã€æ•™è‚²ã€æ–‡åŒ–é¢†åŸŸå®¹æ˜“æˆåŠŸ",
          "relationships": "äººç¼˜æä½³ï¼Œå¤šå¾—è´µäººç›¸åŠ©ï¼Œå©šå§»å¹¸ç¦",
          "health": "èº«å¿ƒå¥åº·ï¼Œæ°´æ¶¦é‡‘ç”Ÿï¼Œä½“è´¨è¾ƒå¥½",
          "wealth": "å› å¾·è€Œå¯Œï¼Œè´¢æºç¨³å®šï¼Œä¸ä¸ºé’±è´¢æ‰€å›°"
        }
      },
      "recommendations": {
        "usage": "éå¸¸é€‚åˆä½œä¸ºæ­£å¼å§“åä½¿ç”¨",
        "alternatives": ["å´é’¦æ¶¦", "å´å®£é”¦"],
        "enhancements": ["å¯é…åˆä¹¦æ³•ç»ƒä¹ å¢å¼ºæ–‡åŒ–æ°”è´¨"]
      },
      "rank": 1
    }
  ],
  "summaryReport": {
    "totalAnalyzed": 5,
    "recommendationCount": 3,
    "avgScore": 85.4,
    "scoreDistribution": {"ä¼˜ç§€": 2, "è‰¯å¥½": 2, "ä¸€èˆ¬": 1},
    "qualityDistribution": {"excellent": 1, "good": 2, "average": 2},
    "processingMetrics": {
      "totalProcessingTime": 2350,
      "pluginPerformance": {
        "Layer1": 180,
        "Layer2": 320, 
        "Layer3": 280,
        "Layer4": 200,
        "Layer5": 150,
        "Layer6": 1220
      }
    }
  }
}
```

---

## ğŸ“ åå­—ç±»å‹é€‰æ‹©æ€»ç»“

### ğŸ” **å•å­—å vs åŒå­—å å¯¹æ¯”åˆ†æ**

| å¯¹æ¯”ç»´åº¦ | å•å­—å (å¦‚"å´å®£") | åŒå­—å (å¦‚"å´å®£æ¶¦") | ç»“è®º |
|----------|------------------|-------------------|------|
| **ä¸‰æ‰äº”æ ¼** | åœ°æ ¼æ˜“å‡¶ (75-78åˆ†) | äº”æ ¼çµæ´» (92-95åˆ†) | **åŒå­—åä¼˜åŠ¿** |
| **éŸ³éŸµç¾æ„Ÿ** | ç®€æ´æ˜å¿« (75-80åˆ†) | éŸµå¾‹ä¸°å¯Œ (85-90åˆ†) | **åŒå­—åä¼˜åŠ¿** |
| **æ–‡åŒ–å†…æ¶µ** | ç®€çº¦æœ‰åŠ› (80åˆ†) | å±‚æ¬¡ä¸°å¯Œ (85-90åˆ†) | **åŒå­—åä¼˜åŠ¿** |
| **å®ç”¨æ€§** | æ˜“è®°æ˜“å†™ (90åˆ†) | ç›¸å¯¹å¤æ‚ (80åˆ†) | **å•å­—åä¼˜åŠ¿** |
| **é‡åæ¦‚ç‡** | è¾ƒé«˜ (70åˆ†) | è¾ƒä½ (85åˆ†) | **åŒå­—åä¼˜åŠ¿** |
| **å›½é™…åŒ–** | ç®€æ´å‹å¥½ (85åˆ†) | éŸ³èŠ‚ä¸°å¯Œ (80åˆ†) | **åŸºæœ¬ç›¸å½“** |

### ğŸ“Š **æ¨èç­–ç•¥**

**ä¼˜å…ˆæ¨èåŒå­—å**ï¼ŒåŸå› ï¼š
1. **å‘½ç†ä¼˜åŠ¿æ˜æ˜¾**ï¼šäº”æ ¼æ­é…æ›´çµæ´»ï¼Œå®¹æ˜“è·å¾—é«˜åˆ†
2. **æ–‡åŒ–å†…æ¶µä¸°å¯Œ**ï¼šä¸¤ä¸ªå­—ç¬¦å¯ä»¥æ‰¿è½½æ›´å¤šå¯“æ„
3. **éŸ³éŸµå±‚æ¬¡å¤æ‚**ï¼šä¸‰éŸ³èŠ‚ç»„åˆæä¾›æ›´å¥½çš„éŸµå¾‹æ„Ÿ
4. **ä¸ªæ€§åŒ–ç¨‹åº¦é«˜**ï¼šé™ä½é‡åæ¦‚ç‡

**å•å­—åé€‚ç”¨åœºæ™¯**ï¼š
- ç”¨æˆ·æ˜ç¡®åå¥½ç®€æ´é£æ ¼
- å§“æ°æœ¬èº«æ–‡åŒ–å†…æ¶µä¸°å¯Œï¼ˆå¦‚å¤å§“ï¼‰
- å¯¹ä¼ ç»Ÿå‘½ç†è¦æ±‚ä¸é«˜
- è¿½æ±‚ç°ä»£å›½é™…åŒ–é£æ ¼

### ğŸ¯ **æœ¬ç¤ºä¾‹é€‰æ‹©è¯´æ˜**

é€‰æ‹© **åŒå­—å** "å´å®£æ¶¦"ï¼Œç»¼åˆè¯„åˆ† **89.2åˆ†**ï¼Œæ˜¾è‘—ä¼˜äºå•å­—åçš„é¢„ä¼°è¯„åˆ† **75-78åˆ†**ã€‚

---

## ğŸ† æœ€ç»ˆæ¨èç»“æœ

### æ¨èåå­—ï¼š**å´å®£æ¶¦** (åŒå­—å)

**åå­—ç±»å‹é€‰æ‹©**ï¼šåŒå­—å  
**æ›¿ä»£æ–¹æ¡ˆ**ï¼šè‹¥ç”¨æˆ·åå¥½å•å­—åï¼Œæ¨è"å´å®£" (é¢„ä¼°76åˆ†)

**ç»¼åˆè¯„åˆ†ï¼š89.2åˆ† (ä¼˜ç§€ç­‰çº§)**

### ğŸ“Š è¯¦ç»†è¯„åˆ†æ˜ç»†

| è¯„åˆ†ç»´åº¦ | å¾—åˆ† | æƒé‡ | åŠ æƒåˆ† | è¯„ä»· |
|----------|------|------|--------|------|
| ä¸‰æ‰äº”æ ¼ | 92åˆ† | 25% | 23åˆ† | äº”æ ¼ä¿±ä½³ï¼Œæ•°ç†å¤§å‰ |
| äº”è¡Œå¹³è¡¡ | 88åˆ† | 25% | 22åˆ† | å®Œç¾å¥‘åˆå–œç”¨ç¥é‡‘æ°´ |
| éŸ³éŸµç¾æ„Ÿ | 85åˆ† | 20% | 17åˆ† | å£°è°ƒæœ‰å˜åŒ–ï¼Œå‘éŸ³æ¸…æ™° |
| å¤§è¡æ•°ç† | 92åˆ† | 20% | 18.4åˆ† | åšå¾·è½½ç‰©ï¼Œå®‰å¯Œå°Šè£ |
| ç”Ÿè‚–é€‚å®œ | 88åˆ† | 10% | 8.8åˆ† | è›‡å–œé‡‘æ°´ï¼ŒåŸºæœ¬é€‚å®œ |
| **æ€»è®¡** | **-** | **100%** | **89.2åˆ†** | **ä¼˜ç§€ç­‰çº§** |

### âœ¨ æ ¸å¿ƒä¼˜åŠ¿

1. **å‘½ç†åŒ¹é…åº¦æé«˜**
   - å…«å­—å–œç”¨ç¥ï¼šé‡‘ã€æ°´
   - åå­—äº”è¡Œï¼šé‡‘(å®£)ã€æ°´(æ¶¦)
   - åŒ¹é…åº¦ï¼š95%

2. **ä¸‰æ‰äº”æ ¼ä¿±ä½³**
   - äº”æ ¼æ•°ç†ï¼š8-16-25-17-32
   - å‰å‡¶è¯„ä»·ï¼š4ä¸ªå¤§å‰ï¼Œ1ä¸ªå‰
   - ä¸‰æ‰ç»„åˆï¼šé‡‘åœŸåœŸï¼Œç›¸ç”Ÿå’Œè°

3. **å¯“æ„æ·±è¿œç§¯æ**
   - å®£ï¼šå®£æ‰¬ã€ä¼ æ’­ã€å½°æ˜¾
   - æ¶¦ï¼šæ¶¦æ³½ã€æ»‹æ¶¦ã€æ©æƒ 
   - æ•´ä½“ï¼šæ—¢èƒ½å‘å£°ä¼ æ’­ï¼Œåˆèƒ½æ¶¦æ³½ä»–äºº

4. **ç°ä»£é€‚ç”¨æ€§å¼º**
   - å­—å½¢ï¼šç®€æ´ç¾è§‚ï¼Œæ˜“å†™æ˜“è®¤
   - è¯»éŸ³ï¼šwÃº xuÄn rÃ¹nï¼Œæœ—æœ—ä¸Šå£
   - å›½é™…åŒ–ï¼šæ‹¼éŸ³å‹å¥½ï¼Œä¾¿äºäº¤æµ

### ğŸ¯ ä¸ªæ€§ä¸è¿åŠ¿é¢„æµ‹

**æ€§æ ¼ç‰¹è´¨**ï¼š
- å“å¾·é«˜å°šï¼Œæ¸©å’Œæ•¦åš
- æ‰åå‡ºä¼—ï¼Œè§è§£ç‹¬ç‰¹
- åŒ…å®¹å¤§åº¦ï¼Œå–„äºè¡¨è¾¾
- å¾·æ‰å…¼å¤‡ï¼Œå—äººå°Šæ•¬

**äººç”Ÿè¿åŠ¿**ï¼š
- **äº‹ä¸š**ï¼šåœ¨ä¼ æ’­ã€æ•™è‚²ã€æ–‡åŒ–é¢†åŸŸå®¹æ˜“æˆåŠŸï¼Œèƒ½è·ä¼—äººåŠ©åŠ›
- **è´¢è¿**ï¼šå› å¾·è€Œå¯Œï¼Œè´¢æºç¨³å®šï¼Œä¸ä¸ºé’±è´¢æ‰€å›°
- **äººé™…**ï¼šäººç¼˜æä½³ï¼Œå¤šå¾—è´µäººç›¸åŠ©ï¼Œç¤¾äº¤èƒ½åŠ›å¼º
- **å¥åº·**ï¼šæ°´æ¶¦é‡‘ç”Ÿï¼Œèº«å¿ƒå¥åº·ï¼Œä½“è´¨è¾ƒå¥½
- **å©šå§»**ï¼šå“å¾·å—äººé’¦ä½©ï¼Œå©šå§»å¹¸ç¦ç¾æ»¡

### ğŸ“š æ–‡åŒ–å†…æ¶µè§£æ

**å­—ä¹‰æ·±åº¦åˆ†æ**ï¼š
- **å®£**ï¼šã€Šè¯´æ–‡è§£å­—ã€‹ï¼š"å®£ï¼Œå¤©å­å®£å¸ƒè¯ä»¤ä¹‹æ‰€ä¹Ÿ"ï¼Œæœ‰ä¼ æ’­ã€å½°æ˜¾ä¹‹æ„
- **æ¶¦**ï¼šã€Šè¯—ç»Â·è±³é£ã€‹ï¼š"æ¶¦ä¹‹ä»¥é£é›¨"ï¼Œæœ‰æ»‹å…»ã€æ©æ³½ä¹‹æ„
- **ç»„åˆå¯“æ„**ï¼šå®£æ‰¬ç¾å¾·ï¼Œæ¶¦æ³½ä»–äººï¼Œä½“ç°å›å­å“æ ¼

**å…¸ç±å‡ºå¤„**ï¼š
- è¯—ç»æ„è•´ï¼šä½“ç°"é£é›…"ä¼ ç»Ÿï¼Œç¬¦åˆç”·æ€§å–åä¹ ä¿—
- å„’å®¶ç†å¿µï¼šå®£ä¼ æ•™åŒ–ï¼Œæ¶¦ç‰©æ— å£°ï¼Œç¬¦åˆä»è€…å“æ ¼

---

## ğŸ“‹ è®¡ç®—å…¬å¼ä¸è¯„åˆ†æ ‡å‡†é™„å½•

### A. å…«å­—å››æŸ±è®¡ç®—æ–¹æ³•

```typescript
// å¹´æŸ±è®¡ç®— (ä»¥2025å¹´ä¸ºä¾‹)
å¹´ä»½ = 2025
å¹´æŸ±åºå· = (å¹´ä»½ - 3) % 60 = (2025 - 3) % 60 = 42
å¹´æŸ± = ç”²å­è¡¨[42] = "ä¹™å·³"

// æœˆæŸ±è®¡ç®— (ä»¥ä¹æœˆä¸ºä¾‹)  
æœˆæŸ±å¤©å¹² = (å¹´å¹²åºå· Ã— 2 + æœˆä»½) % 10
æœˆæŸ±åœ°æ”¯ = å›ºå®šåœ°æ”¯è¡¨[æœˆä»½]

// æ—¥æŸ±è®¡ç®— (éœ€è¦ä¸‡å¹´å†)
æ—¥æŸ± = ä¸‡å¹´å†æŸ¥è¯¢[å¹´æœˆæ—¥]

// æ—¶æŸ±è®¡ç®—
æ—¶æŸ±å¤©å¹² = (æ—¥å¹²åºå· Ã— 2 + æ—¶è¾°åºå·) % 10
æ—¶æŸ±åœ°æ”¯ = æ—¶è¾°å›ºå®šåœ°æ”¯
```

### B. ä¸‰æ‰äº”æ ¼è®¡ç®—å…¬å¼

```typescript
// åŸºç¡€å…¬å¼
å¤©æ ¼ = å§“æ°ç¬”ç”»å’Œ + 1 (å•å§“) æˆ– å§“æ°ç¬”ç”»å’Œ (å¤å§“)
äººæ ¼ = å§“æ°æœ«å­—ç¬”ç”» + åå­—é¦–å­—ç¬”ç”»
åœ°æ ¼ = åå­—ç¬”ç”»å’Œ (åŒå­—å) æˆ– åå­—ç¬”ç”» + 1 (å•å­—å)
å¤–æ ¼ = æ€»æ ¼ - äººæ ¼ + 1
æ€»æ ¼ = å§“åæ€»ç¬”ç”»æ•°

// äº”è¡Œå¯¹åº” (å°¾æ•°æ³•)
1,2 â†’ æœ¨    3,4 â†’ ç«    5,6 â†’ åœŸ    7,8 â†’ é‡‘    9,0 â†’ æ°´
```

### C. äº”è¡Œå–œç”¨ç¥åˆ†ææ ‡å‡†

```typescript
// æ—¥ä¸»å¼ºå¼±åˆ¤æ–­
å¼ºåŠ¿æ¡ä»¶: æœ¬æ°”æœ‰æ ¹ + å¾—æœˆä»¤ + åŒç±»å¤š
å¼±åŠ¿æ¡ä»¶: æœ¬æ°”æ— æ ¹ + å¤±æœˆä»¤ + åŒç±»å°‘

// ç”¨ç¥é€‰æ‹©åŸåˆ™
æ—¥ä¸»å¼º â†’ é€‰æ‹©å…‹æ³„è€—çš„äº”è¡Œä¸ºç”¨ç¥
æ—¥ä¸»å¼± â†’ é€‰æ‹©ç”Ÿæ‰¶çš„äº”è¡Œä¸ºç”¨ç¥
è°ƒå€™ç”¨ç¥ â†’ æ ¹æ®å­£èŠ‚è°ƒèŠ‚å¯’æš–ç‡¥æ¹¿
```

### D. è¯„åˆ†æƒé‡è®¾ç½®ä¾æ®

```typescript
// æƒé‡åˆ†é…åŸç†
ä¼ ç»Ÿå‘½ç†æ ¸å¿ƒ (50%):
  - ä¸‰æ‰äº”æ ¼: 25% (å§“åå­¦æ ¸å¿ƒ)
  - äº”è¡Œå¹³è¡¡: 25% (å…«å­—å‘½ç†æ ¸å¿ƒ)

ç°ä»£å–åè€ƒé‡ (30%):
  - éŸ³éŸµç¾æ„Ÿ: 20% (ç°ä»£é‡è§†ç¨‹åº¦é«˜)
  - å¤§è¡æ•°ç†: 10% (ä¼ ç»Ÿæ•°ç†å­¦)

æ–‡åŒ–ä¼ ç»Ÿå› ç´  (20%):
  - å¤§è¡æ•°ç†: 10% (81æ•°å‰å‡¶)
  - ç”Ÿè‚–é€‚å®œ: 10% (æ°‘ä¿—ä¼ ç»Ÿ)
```

---

## ğŸ“š æ•°æ®æŸ¥è¯¢æ¥å£è§„èŒƒ

### E. æ ¸å¿ƒæ•°æ®æ–‡ä»¶æ¥å£

#### 1. âš ï¸ ç»Ÿä¸€å­—ç¬¦æ•°æ®åº“æ¥å£ (å”¯ä¸€åˆæ³•æ¥æº)

**é‡è¦**ï¼šæ‰€æœ‰å–åç”¨å­—å¿…é¡»é€šè¿‡ `UnifiedCharacterLoader` è·å–ï¼Œä¸¥ç¦ç›´æ¥è®¿é—®JSONæ–‡ä»¶ã€‚

```typescript
// ç»Ÿä¸€å­—ç¬¦æ•°æ®åŠ è½½å™¨ - å”¯ä¸€åˆæ³•çš„å­—ç¬¦æ•°æ®è·å–æ–¹å¼
import { UnifiedCharacterLoader } from '@/core/naming/unified-character-loader';

interface UnifiedCharacterInfo {
  char: string;                    // å­—ç¬¦æœ¬ä½“
  pinyin: string[];               // æ‹¼éŸ³æ•°ç»„
  primaryPinyin: string;          // ä¸»è¦æ‹¼éŸ³
  tone: number;                   // å£°è°ƒ 1-4
  strokes: {
    simplified: number;           // ç®€ä½“ç¬”ç”»ï¼ˆä»…ä¾›å‚è€ƒï¼‰
    traditional: number;          // ç¹ä½“ç¬”ç”»ï¼ˆå‘½ç†è®¡ç®—ä¸“ç”¨ï¼‰âš ï¸
    kangxi?: number;             // åº·ç†™å­—å…¸ç¬”ç”»ï¼ˆå¯é€‰ï¼‰
  };
  radical: string;                // éƒ¨é¦–
  wuxing: WuxingElement;          // äº”è¡Œå±æ€§ ('jin'|'mu'|'shui'|'huo'|'tu')
  traditional?: string;           // ç¹ä½“å­—å½¢
  simplified?: string;            // ç®€ä½“å­—å½¢
  meanings: string[];             // å­—ä¹‰è§£é‡Š
  isStandard: boolean;           // æ˜¯å¦ä¸ºæ ‡å‡†å–åç”¨å­— âš ï¸
  sources: string[];             // æ•°æ®æ¥æº
}

// âœ… æ­£ç¡®çš„æŸ¥è¯¢æ–¹å¼
class NamingPlugin {
  private charLoader: UnifiedCharacterLoader;
  
  constructor() {
    this.charLoader = UnifiedCharacterLoader.getInstance();
  }
  
  async execute() {
    // å¿…é¡»å…ˆåˆå§‹åŒ–
    await this.charLoader.initialize();
    
    // è·å–å­—ç¬¦ä¿¡æ¯
    const charInfo = this.charLoader.getCharacterInfo('å´');
    
    if (charInfo && charInfo.isStandard) {
      // ä½¿ç”¨å‘½ç†è®¡ç®—ä¸“ç”¨ç¬”ç”»
      const strokesForCalculation = charInfo.strokes.traditional;
      const wuxingProperty = charInfo.wuxing;
      const pronunciation = charInfo.primaryPinyin;
      
      // éªŒè¯å­—ç¬¦æ˜¯å¦é€‚åˆå–å
      if (this.validateCharacterForNaming(charInfo)) {
        // è¿›è¡Œåç»­å¤„ç†
      }
    }
  }
  
  private validateCharacterForNaming(charInfo: UnifiedCharacterInfo): boolean {
    return charInfo.isStandard &&                    // å¿…é¡»æ˜¯æ ‡å‡†å­—
           charInfo.strokes.traditional > 0 &&       // å¿…é¡»æœ‰ç¹ä½“ç¬”ç”»
           charInfo.wuxing &&                        // å¿…é¡»æœ‰äº”è¡Œå±æ€§
           charInfo.primaryPinyin &&                 // å¿…é¡»æœ‰ä¸»è¦è¯»éŸ³
           charInfo.tone > 0;                        // å¿…é¡»æœ‰å£°è°ƒ
  }
}

// âŒ é”™è¯¯çš„æŸ¥è¯¢æ–¹å¼ - ä¸¥ç¦ä½¿ç”¨
// const enhancedData = require('public/data/characters/final-enhanced-character-database.json');
// const wuData = enhancedData['å´']; // ğŸš« ç¦æ­¢ç›´æ¥è®¿é—®JSONæ–‡ä»¶
```

#### 2. âš ï¸ Fallbackæœºåˆ¶è¯´æ˜

**é‡è¦åŸåˆ™**ï¼šFallbackæœºåˆ¶ä»…åœ¨ä¸»æ•°æ®åº“ä¸å®Œæ•´æ—¶è‡ªåŠ¨è§¦å‘ï¼Œ**ä¸åº”ç›´æ¥ä½¿ç”¨**ã€‚

```typescript
// âš ï¸ Fallbackæœºåˆ¶ç”±UnifiedCharacterLoaderå†…éƒ¨å¤„ç†ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨

// âœ… æ­£ç¡®æ–¹å¼ï¼šé€šè¿‡ç»Ÿä¸€åŠ è½½å™¨è·å–ï¼Œè‡ªåŠ¨å¤„ç†Fallback
const charLoader = UnifiedCharacterLoader.getInstance();
await charLoader.initialize();

const charInfo = charLoader.getCharacterInfo('æŸå­—');
// UnifiedCharacterLoaderä¼šè‡ªåŠ¨åˆ¤æ–­æ˜¯å¦éœ€è¦Fallbackï¼Œå¹¶è¿”å›æœ€å®Œæ•´çš„æ•°æ®

// âŒ é”™è¯¯æ–¹å¼ï¼šç›´æ¥è®¿é—®Fallbackæ–‡ä»¶
// const strokeData = require('public/data/characters/real-stroke-data.json'); // ğŸš« ç¦æ­¢
// const wuxingData = require('public/data/characters/wuxing_dict_jianti.json'); // ğŸš« ç¦æ­¢
```

**Fallbackè§„åˆ™**ï¼š
1. **ç¬”ç”»Fallback**: ä¸»æ•°æ®åº“ç¼ºå¤± `strokes.traditional` æ—¶ï¼Œä» `real-stroke-data.json` è¡¥å…¨
2. **æ‹¼éŸ³Fallback**: ä¸»æ•°æ®åº“ç¼ºå¤± `primaryPinyin` æ—¶ï¼Œä» `pinyin-processed.json` è¡¥å…¨  
3. **äº”è¡Œæ•°æ®**: **æ— Fallback**ï¼Œç¼ºå¤±äº”è¡Œçš„å­—ç¬¦ä¸é€‚åˆå–å
4. **ç½®ä¿¡åº¦é™çº§**: ä½¿ç”¨Fallbackçš„å­—ç¬¦ç½®ä¿¡åº¦é™ä½ä¸º0.5-0.8

**æ•°æ®æ¥æºæ ‡è¯†**ï¼š
- `final-enhanced-character-database`: ä¸»æ•°æ®åº“å®Œæ•´æ•°æ®ï¼ˆç½®ä¿¡åº¦1.0ï¼‰
- `enhanced-with-fallback`: ä¸»æ•°æ®åº“+Fallbackè¡¥å…¨ï¼ˆç½®ä¿¡åº¦0.8ï¼‰
- `fallback`: å®Œå…¨æ¥è‡ªFallbackï¼ˆç½®ä¿¡åº¦0.5ï¼Œä¸æ¨èç”¨äºå–åï¼‰

#### 3. ç™¾å®¶å§“æ’åæŸ¥è¯¢
```typescript
// æ•°æ®æ–‡ä»¶: public/data/names/baijiaxing.json
interface BaijiaxingData {
  title: string;
  paragraphs: string[];
}

// æŸ¥è¯¢æ¥å£
function getBaijiaxingRank(surname: string): number {
  const baijiaxingData = require('public/data/names/baijiaxing.json');
  
  let position = 0;
  for (const paragraph of baijiaxingData.paragraphs) {
    // ç§»é™¤æ ‡ç‚¹ç¬¦å·ï¼Œæå–å§“æ°
    const cleanText = paragraph.replace(/[ï¼Œã€‚]/g, '');
    for (const char of cleanText) {
      position++;
      if (char === surname) {
        return position;
      }
    }
  }
  return -1; // æœªæ‰¾åˆ°
}

// ä½¿ç”¨ç¤ºä¾‹
const wuRank = getBaijiaxingRank('å´'); // è¿”å›: 6
```

#### 4. ç»¼åˆå­—ç¬¦æ•°æ®æŸ¥è¯¢æ¥å£
```typescript
// æ™ºèƒ½æŸ¥è¯¢æ¥å£ (ä¼˜å…ˆä½¿ç”¨æƒå¨æ•°æ®åº“ï¼Œå¤±è´¥æ—¶è‡ªåŠ¨fallback)
function getCompleteCharacterInfo(char: string): CompleteCharacterInfo {
  // 1. ä¼˜å…ˆæŸ¥è¯¢æƒå¨æ•°æ®åº“
  const enhancedData = getEnhancedCharacterData(char);
  
  if (enhancedData) {
    return {
      char,
      traditional: enhancedData.traditional,
      simplified: enhancedData.simplified,
      pinyin: enhancedData.pinyin,
      primaryPinyin: enhancedData.primaryPinyin,
      tone: enhancedData.tone,
      strokes: {
        simplified: enhancedData.strokes.simplified,
        traditional: enhancedData.strokes.traditional,
        kangxi: enhancedData.strokes.kangxi
      },
      wuxing: enhancedData.wuxing,
      radical: enhancedData.radical,
      meanings: enhancedData.meanings,
      isStandard: enhancedData.isStandard,
      dataSource: 'enhanced-database',
      confidence: 1.0
    };
  }
  
  // 2. Fallbackåˆ°å…¶ä»–æ•°æ®æº
  const fallbackData = {
    char,
    traditional: char, // é»˜è®¤å€¼ï¼Œå¯èƒ½ä¸å‡†ç¡®
    simplified: char,
    pinyin: [],
    primaryPinyin: '',
    tone: 0,
    strokes: { simplified: 0, traditional: 0, kangxi: 0 },
    wuxing: '',
    radical: '',
    meanings: [],
    isStandard: false,
    dataSource: 'fallback',
    confidence: 0.5
  };
  
  // 2.1 è·å–æ‹¼éŸ³å’Œå£°è°ƒ
  const pinyinInfo = getCharacterPinyinFallback(char);
  if (pinyinInfo) {
    fallbackData.pinyin = [pinyinInfo.pinyin];
    fallbackData.primaryPinyin = pinyinInfo.pinyin;
    fallbackData.tone = pinyinInfo.tone;
    fallbackData.confidence += 0.2;
  }
  
  // 2.2 è·å–ç¬”ç”»
  const strokes = getCharacterStrokesFallback(char);
  if (strokes > 0) {
    fallbackData.strokes.simplified = strokes;
    fallbackData.strokes.traditional = strokes; // åº·ç†™å­—å…¸ç¬”ç”»
    fallbackData.strokes.kangxi = strokes;
    fallbackData.confidence += 0.2;
  }
  
  // 2.3 è·å–äº”è¡Œ
  const wuxing = getCharacterWuxingFallback(char);
  if (wuxing) {
    fallbackData.wuxing = wuxing;
    fallbackData.confidence += 0.1;
  }
  
  return fallbackData;
}

interface CompleteCharacterInfo {
  char: string;
  traditional: string;
  simplified: string;
  pinyin: string[];
  primaryPinyin: string;
  tone: number;
  strokes: {
    simplified: number;
    traditional: number;
    kangxi: number;
  };
  wuxing: string;
  radical: string;
  meanings: string[];
  isStandard: boolean;
  dataSource: 'enhanced-database' | 'fallback';
  confidence: number;
}
```

### F. SurnamePlugin é‡æ–°è®¾è®¡çš„å®Œæ•´å®ç°

```typescript
// âš ï¸ é‡è¦ï¼šåŸºäºç»Ÿä¸€å­—ç¬¦æ•°æ®åŠ è½½å™¨çš„æ ‡å‡†å®ç°

class SurnamePlugin {
  private charLoader: UnifiedCharacterLoader;
  private strokeDataFallback: any;  // ä»…åœ¨ä¸»æ•°æ®åº“ç¼ºå¤±æ—¶ä½¿ç”¨
  private pinyinDataFallback: any;  // ä»…åœ¨ä¸»æ•°æ®åº“ç¼ºå¤±æ—¶ä½¿ç”¨
  private baijiaxingData: BaijiaxingData;
  
  constructor() {
    // ä¼˜å…ˆä½¿ç”¨ç»Ÿä¸€å­—ç¬¦æ•°æ®åŠ è½½å™¨
    this.charLoader = UnifiedCharacterLoader.getInstance();
    
    // âš ï¸ Fallbackæ•°æ®æ–‡ä»¶ä»…åœ¨ä¸»æ•°æ®åº“ä¸å®Œæ•´æ—¶ä½¿ç”¨
    this.strokeDataFallback = null;  // å»¶è¿ŸåŠ è½½
    this.pinyinDataFallback = null;  // å»¶è¿ŸåŠ è½½
    this.baijiaxingData = require('public/data/names/baijiaxing.json');
  }
  
  async execute(input: SurnameInput): Promise<SurnameOutput> {
    const { familyName } = input;
    
    // 1. åˆå§‹åŒ–ç»Ÿä¸€å­—ç¬¦æ•°æ®åº“
    await this.charLoader.initialize();
    
    // 2. è·å–å­—ç¬¦ä¿¡æ¯ (ä¼˜å…ˆä¸»æ•°æ®åº“ï¼Œå¿…è¦æ—¶fallback)
    const charInfo = await this.getCompleteCharacterInfo(familyName);
    
    // 3. ç™¾å®¶å§“æ’åæŸ¥è¯¢ (ç‹¬ç«‹æ•°æ®æº)
    const baijiaxingRank = this.getBaijiaxingRank(familyName);
    
    // 4. è®¡ç®—å¤©æ ¼åŸºæ•° (ä½¿ç”¨ç¹ä½“ç¬”ç”»)
    const tianGeBase = charInfo.strokes.traditional + 1; // å•å§“è§„åˆ™
    
    // 5. åˆ¤æ–­å§“æ°ç±»å‹
    const isSingleChar = familyName.length === 1;
    const isCompoundSurname = familyName.length > 1;
    
    return {
      familyName,
      characterInfo: {
        char: charInfo.char,
        traditional: charInfo.traditional || charInfo.char,
        simplified: charInfo.simplified || charInfo.char,
        pinyin: charInfo.pinyin,
        primaryPinyin: charInfo.primaryPinyin,
        tone: charInfo.tone,
        strokes: charInfo.strokes,
        radical: charInfo.radical,
        wuxing: charInfo.wuxing,
        meanings: charInfo.meanings,
        isStandard: charInfo.isStandard,
        sources: charInfo.sources
      },
      derivedProperties: {
        isSingleChar,
        isCompoundSurname,
        baijiaxingRank: baijiaxingRank || -1,
        tianGeBase,
        calculationStrokes: charInfo.strokes.traditional, // å‘½ç†è®¡ç®—ä¸“ç”¨
        confidence: this.calculateConfidence(charInfo, baijiaxingRank)
      },
      dataQuality: {
        sourceType: charInfo.dataSource,
        completenessScore: this.assessDataCompleteness(charInfo),
        fallbackUsed: charInfo.dataSource !== 'final-enhanced-character-database',
        validationPassed: this.validateCharacterData(charInfo),
        isValidNamingCharacter: charInfo.isStandard
      }
    };
  }
  
  private async getCompleteCharacterInfo(char: string): Promise<UnifiedCharacterInfo> {
    // 1. ä¼˜å…ˆæŸ¥è¯¢ä¸»æ•°æ®åº“ (final-enhanced-character-database.json)
    const charInfo = this.charLoader.getCharacterInfo(char);
    
    if (charInfo && this.validateCharacterData(charInfo)) {
      // ä¸»æ•°æ®åº“æ•°æ®å®Œæ•´ï¼Œç›´æ¥è¿”å›
      return {
        ...charInfo,
        dataSource: 'final-enhanced-character-database',
        confidence: 1.0
      };
    }
    
    if (charInfo) {
      // ä¸»æ•°æ®åº“å­˜åœ¨ä½†ä¸å®Œæ•´ï¼Œä½¿ç”¨Fallbackè¡¥å…¨
      console.warn(`å­—ç¬¦"${char}"ä¸»æ•°æ®åº“ä¸å®Œæ•´ï¼Œå¯ç”¨Fallbackæœºåˆ¶`);
      return await this.enhanceWithFallback(charInfo);
    }
    
    // 2. ä¸»æ•°æ®åº“å®Œå…¨ç¼ºå¤±ï¼Œå®Œå…¨ä½¿ç”¨Fallback
    console.error(`å­—ç¬¦"${char}"åœ¨ä¸»æ•°æ®åº“ä¸­ä¸å­˜åœ¨ï¼Œä½¿ç”¨Fallbackæœºåˆ¶`);
    return await this.getFallbackCharacterInfo(char);
  }
  
  // âš ï¸ æ•°æ®å®Œæ•´æ€§éªŒè¯ (åŸºäºUnifiedCharacterInfo)
  private validateCharacterData(charInfo: UnifiedCharacterInfo): boolean {
    return !!(
      charInfo.primaryPinyin &&                    // å¿…é¡»æœ‰ä¸»è¦æ‹¼éŸ³
      charInfo.tone > 0 &&                        // å¿…é¡»æœ‰å£°è°ƒ
      charInfo.strokes.traditional > 0 &&         // å¿…é¡»æœ‰ç¹ä½“ç¬”ç”» (å‘½ç†è®¡ç®—ç”¨)
      charInfo.wuxing &&                          // å¿…é¡»æœ‰äº”è¡Œå±æ€§
      charInfo.radical &&                         // å¿…é¡»æœ‰éƒ¨é¦–
      charInfo.isStandard !== undefined           // å¿…é¡»æœ‰æ ‡å‡†æ€§æ ‡è¯†
    );
  }
  
  // âš ï¸ Fallbackæœºåˆ¶ï¼šä»…åœ¨ä¸»æ•°æ®åº“å®Œå…¨ç¼ºå¤±æ—¶ä½¿ç”¨
  private async getFallbackCharacterInfo(char: string): Promise<UnifiedCharacterInfo> {
    const fallbackData: UnifiedCharacterInfo = {
      char,
      traditional: char,        // é»˜è®¤å€¼ï¼Œå¯èƒ½ä¸å‡†ç¡®
      simplified: char,
      pinyin: [],
      primaryPinyin: '',
      tone: 0,
      strokes: { simplified: 0, traditional: 0, kangxi: 0 },
      wuxing: '' as any,
      radical: '',
      meanings: [],
      isStandard: false,       // Fallbackå­—ç¬¦é»˜è®¤ä¸ºéæ ‡å‡†
      sources: ['fallback'],
      dataSource: 'fallback',
      confidence: 0.2          // ä½ç½®ä¿¡åº¦
    };
    
    // 2.1 è·å–æ‹¼éŸ³å’Œå£°è°ƒ (Fallback: pinyin-processed.json)
    const pinyinInfo = await this.getCharacterPinyinFallback(char);
    if (pinyinInfo) {
      fallbackData.pinyin = [pinyinInfo.pinyin];
      fallbackData.primaryPinyin = pinyinInfo.pinyin;
      fallbackData.tone = pinyinInfo.tone;
      fallbackData.confidence += 0.25;
    }
    
    // 2.2 è·å–ç¬”ç”» (Fallback: real-stroke-data.json)
    const strokes = await this.getCharacterStrokesFallback(char);
    if (strokes > 0) {
      fallbackData.strokes.simplified = strokes;
      fallbackData.strokes.traditional = strokes;  // âš ï¸ å‡è®¾ç›¸åŒï¼Œå¯èƒ½ä¸å‡†ç¡®
      fallbackData.strokes.kangxi = strokes;
      fallbackData.confidence += 0.25;
    }
    
    // âš ï¸ é‡è¦ï¼šäº”è¡Œå±æ€§ç¼ºå¤±çš„ä¸¥é‡åæœ
    console.warn(`å­—ç¬¦"${char}"æ— æ³•è·å–äº”è¡Œå±æ€§ï¼Œä¸å»ºè®®ç”¨äºå–å`);
    fallbackData.confidence = Math.min(fallbackData.confidence, 0.5); // é™åˆ¶æœ€é«˜ç½®ä¿¡åº¦
    
    return fallbackData;
  }
  
  // ä¸»æ•°æ®åº“ä¸å®Œæ•´æ—¶çš„æ•°æ®å¢å¼º
  private async enhanceWithFallback(charInfo: UnifiedCharacterInfo): Promise<UnifiedCharacterInfo> {
    const enhanced = { ...charInfo };
    let fallbackUsed = false;
    
    // è¡¥å…¨ç¼ºå¤±çš„ç¬”ç”»æ•°æ®
    if (!enhanced.strokes.traditional || enhanced.strokes.traditional <= 0) {
      const fallbackStrokes = await this.getCharacterStrokesFallback(enhanced.char);
      if (fallbackStrokes > 0) {
        enhanced.strokes.traditional = fallbackStrokes;
        enhanced.strokes.kangxi = fallbackStrokes;
        fallbackUsed = true;
      }
    }
    
    // è¡¥å…¨ç¼ºå¤±çš„æ‹¼éŸ³æ•°æ®
    if (!enhanced.primaryPinyin) {
      const fallbackPinyin = await this.getCharacterPinyinFallback(enhanced.char);
      if (fallbackPinyin) {
        enhanced.primaryPinyin = fallbackPinyin.pinyin;
        enhanced.tone = fallbackPinyin.tone;
        enhanced.pinyin = [fallbackPinyin.pinyin];
        fallbackUsed = true;
      }
    }
    
    // æ›´æ–°æ•°æ®æ¥æºå’Œç½®ä¿¡åº¦
    if (fallbackUsed) {
      enhanced.dataSource = 'enhanced-with-fallback';
      enhanced.confidence = 0.8; // ä¸­ç­‰ç½®ä¿¡åº¦
      enhanced.sources = [...(enhanced.sources || []), 'fallback'];
    }
    
    return enhanced;
  }
  
  // âš ï¸ å»¶è¿ŸåŠ è½½Fallbackæ•°æ® (ä»…åœ¨éœ€è¦æ—¶åŠ è½½)
  private async getCharacterPinyinFallback(char: string): Promise<{pinyin: string, tone: number} | null> {
    if (!this.pinyinDataFallback) {
      try {
        this.pinyinDataFallback = require('public/data/configs/processed/pinyin-processed.json');
      } catch (error) {
        console.error('Fallbackæ‹¼éŸ³æ•°æ®åŠ è½½å¤±è´¥:', error);
        return null;
      }
    }
    
    const result = this.pinyinDataFallback.data[char];
    return result ? {pinyin: result.pinyin, tone: result.tone} : null;
  }
  
  private async getCharacterStrokesFallback(char: string): Promise<number> {
    if (!this.strokeDataFallback) {
      try {
        this.strokeDataFallback = require('public/data/characters/real-stroke-data.json');
      } catch (error) {
        console.error('Fallbackç¬”ç”»æ•°æ®åŠ è½½å¤±è´¥:', error);
        return 0;
      }
    }
    
    return this.strokeDataFallback.data[char]?.strokes || 0;
  }
  
  // âš ï¸ æ³¨æ„ï¼šä¸å†æä¾›äº”è¡ŒFallbackï¼Œå› ä¸ºäº”è¡Œæ•°æ®æ˜¯å‘½ç†æ ¸å¿ƒ
  // å¦‚æœä¸»æ•°æ®åº“ç¼ºå¤±äº”è¡Œæ•°æ®ï¼Œè¯¥å­—ç¬¦ä¸åº”ç”¨äºå–å
  
  private getBaijiaxingRank(surname: string): number {
    let position = 0;
    for (const paragraph of this.baijiaxingData.paragraphs) {
      const cleanText = paragraph.replace(/[ï¼Œã€‚]/g, '');
      for (const char of cleanText) {
        position++;
        if (char === surname) {
          return position;
        }
      }
    }
    return -1;
  }
  
  private calculateConfidence(charInfo: CompleteCharacterInfo, baijiaxingRank: number): number {
    let confidence = charInfo.confidence;
    
    // ç™¾å®¶å§“æ’ååŠ åˆ†
    if (baijiaxingRank > 0) {
      confidence = Math.min(confidence + 0.1, 1.0);
    }
    
    // æ•°æ®å®Œæ•´æ€§åŠ åˆ†
    if (charInfo.traditional && charInfo.traditional !== charInfo.char) {
      confidence = Math.min(confidence + 0.05, 1.0);
    }
    
    if (charInfo.meanings && charInfo.meanings.length > 0) {
      confidence = Math.min(confidence + 0.05, 1.0);
    }
    
    return Math.min(confidence, 1.0);
  }
}

// æ›´æ–°è¾“å‡ºæ¥å£
interface SurnameOutput {
  familyName: string;
  traditional: string;           // ğŸ†• ç¹ä½“å­—
  simplified: string;            // ğŸ†• ç®€ä½“å­—
  strokes: number;               // ç®€ä½“ç¬”ç”»
  strokesTraditional: number;    // ç¹ä½“ç¬”ç”»
  strokesKangxi: number;         // ğŸ†• åº·ç†™å­—å…¸ç¬”ç”» (ç”¨äºè®¡ç®—)
  wuxing: string;
  pinyin: string[];
  primaryPinyin: string;         // ğŸ†• ä¸»è¦æ‹¼éŸ³
  tone: number;
  radical: string;               // ğŸ†• éƒ¨é¦–
  meanings: string[];            // ğŸ†• å­—ä¹‰è§£é‡Š
  isSingleChar: boolean;
  isCompoundSurname: boolean;
  isStandard: boolean;           // ğŸ†• æ˜¯å¦æ ‡å‡†å­—
  baijiaxingRank: number;
  confidence: number;
  tianGeBase: number;
  dataSource: string;            // ğŸ†• æ•°æ®æ¥æº
}
```

### G. é‡æ–°è®¾è®¡çš„æ•°æ®æ–‡ä»¶ä¾èµ–æ€»ç»“

| æ’ä»¶ | ä¸»æ•°æ®æ–‡ä»¶ | Fallbackæ•°æ®æ–‡ä»¶ | ç”¨é€” |
|------|-----------|-----------------|------|
| **SurnamePlugin** | **final-enhanced-character-database.json** | real-stroke-data.json | æƒå¨å­—ç¬¦æ•°æ® + ç¬”ç”»Fallback |
| | | wuxing_dict_jianti.json | äº”è¡ŒFallback |
| | | pinyin-processed.json | æ‹¼éŸ³Fallback |
| | | baijiaxing.json | ç™¾å®¶å§“æ’å |
| **WuxingCharPlugin** | **final-enhanced-character-database.json** | wuxing_dict_jianti.json | äº”è¡Œå­—ç¬¦ç­›é€‰ |
| | | real-stroke-data.json | ç¬”ç”»ç­›é€‰ |
| **PhoneticPlugin** | **final-enhanced-character-database.json** | pinyin-processed.json | æ‹¼éŸ³éŸ³éŸµåˆ†æ |
| **StrokePlugin** | **final-enhanced-character-database.json** | real-stroke-data.json | ç¬”ç”»è®¡ç®— |
| **å…¶ä»–è¯„åˆ†æ’ä»¶** | **final-enhanced-character-database.json** | å„è‡ªç‰¹å®šæ–‡ä»¶ | ç»¼åˆå­—ç¬¦ä¿¡æ¯ |

### H. å…³é”®è®¾è®¡åŸåˆ™

#### 1. **æ•°æ®æºä¼˜å…ˆçº§**
```
1. final-enhanced-character-database.json (æœ€é«˜ä¼˜å…ˆçº§ï¼Œæƒå¨æ¥æº)
2. ä¸“ç”¨æ•°æ®æ–‡ä»¶ (å¦‚real-stroke-data.json)
3. å…¼å®¹æ€§æ•°æ®æ–‡ä»¶ (æœ€åfallback)
```

#### 2. **ç¬”ç”»ä½¿ç”¨è§„åˆ™** âš ï¸ å·²æ›´æ–°
```typescript
// é‡è¦ï¼šæ‰€æœ‰å‘½ç†è®¡ç®—éƒ½ä½¿ç”¨ç¹ä½“å­—ç¬”ç”» (strokes.traditional)
å¤©æ ¼è®¡ç®—: ä½¿ç”¨ strokes.traditional
äººæ ¼è®¡ç®—: ä½¿ç”¨ strokes.traditional  
åœ°æ ¼è®¡ç®—: ä½¿ç”¨ strokes.traditional
æ€»æ ¼è®¡ç®—: ä½¿ç”¨ strokes.traditional

// æ˜¾ç¤ºç”¨é€”å¯ä½¿ç”¨ç®€ä½“ç¬”ç”»
ç•Œé¢æ˜¾ç¤º: å¯é€‰æ‹© strokes.simplified (ä»…ä¾›å‚è€ƒ)
```

#### 3. **Fallbackæœºåˆ¶ä¿éšœ**
- **æ•°æ®å®Œæ•´æ€§**ï¼šç¡®ä¿å³ä½¿ä¸»æ•°æ®åº“ç¼ºå¤±æŸäº›ä¿¡æ¯ï¼Œç³»ç»Ÿä»èƒ½æ­£å¸¸è¿è¡Œ
- **ç½®ä¿¡åº¦è¯„ä¼°**ï¼šæ ¹æ®æ•°æ®æ¥æºè°ƒæ•´ç½®ä¿¡åº¦ï¼Œå½±å“æœ€ç»ˆæ¨èæƒé‡
- **é€æ˜åº¦**ï¼šæ˜ç¡®æ ‡æ³¨æ•°æ®æ¥æºï¼Œä¾¿äºè°ƒè¯•å’Œè´¨é‡æ§åˆ¶

#### 4. **æ–°å¢å­—æ®µè¯´æ˜**
- **traditional**: ç¹ä½“å­—å½¢ï¼Œç”¨äºä¼ ç»Ÿæ–‡åŒ–åˆ†æ
- **strokesKangxi**: åº·ç†™å­—å…¸ç¬”ç”»ï¼Œç”¨äºæ‰€æœ‰å‘½ç†è®¡ç®—
- **primaryPinyin**: ä¸»è¦è¯»éŸ³ï¼Œé¿å…å¤šéŸ³å­—å¹²æ‰°
- **radical**: éƒ¨é¦–ä¿¡æ¯ï¼Œç”¨äºç”Ÿè‚–ç”¨å­—åˆ†æ
- **meanings**: å­—ä¹‰è§£é‡Šï¼Œç”¨äºå¯“æ„åˆ†æ
- **dataSource**: æ•°æ®æ¥æºæ ‡è¯†ï¼Œç”¨äºè´¨é‡æ§åˆ¶

é€šè¿‡è¿™ç§**ç»Ÿä¸€å­—ç¬¦æ•°æ®åŠ è½½å™¨ + æ™ºèƒ½Fallback**çš„è®¾è®¡ï¼Œç¡®ä¿äº†ç³»ç»Ÿæ—¢èƒ½è·å¾—æœ€é«˜è´¨é‡çš„æ•°æ®ï¼Œåˆå…·å¤‡è‰¯å¥½çš„å®¹é”™èƒ½åŠ›å’Œå‘åå…¼å®¹æ€§ã€‚

---

## ğŸ¯ **æ ¸å¿ƒå­—ç¬¦æ•°æ®è·å–è§„åˆ™æ€»ç»“**

### **å¿…é¡»éµå¾ªçš„æ•°æ®è·å–æ ‡å‡†** âš ï¸ é‡è¦æ›´æ–°

#### **1. å”¯ä¸€åˆæ³•æ•°æ®æº**
- âœ… **ä¸»æ•°æ®æº**ï¼š`final-enhanced-character-database.json` (é€šè¿‡ `UnifiedCharacterLoader` è®¿é—®)
- âœ… **ç¬”ç”»è®¡ç®—**ï¼šä¸¥æ ¼ä½¿ç”¨ `strokes.traditional` (ç¹ä½“ç¬”ç”»)
- âœ… **æ ‡å‡†æ€§éªŒè¯**ï¼šæ‰€æœ‰å–åç”¨å­—å¿…é¡»æ»¡è¶³ `isStandard === true`

#### **2. ä¸¥ç¦çš„æ•°æ®è·å–æ–¹å¼**
- âŒ **ç›´æ¥è®¿é—®JSONæ–‡ä»¶**ï¼šç¦æ­¢ `require('final-enhanced-character-database.json')`
- âŒ **ä½¿ç”¨ç®€ä½“ç¬”ç”»**ï¼šç¦æ­¢ `strokes.simplified` ç”¨äºå‘½ç†è®¡ç®—
- âŒ **è·³è¿‡æ ‡å‡†æ€§æ£€æŸ¥**ï¼šç¦æ­¢ä½¿ç”¨ `isStandard === false` çš„å­—ç¬¦

#### **3. Fallbackæœºåˆ¶åŸåˆ™**
- ğŸ”„ **è‡ªåŠ¨è§¦å‘**ï¼šç”± `UnifiedCharacterLoader` å†…éƒ¨å¤„ç†ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨
- ğŸ”„ **æœ‰é™è¡¥å…¨**ï¼šä»…è¡¥å…¨ç¬”ç”»å’Œæ‹¼éŸ³ï¼Œäº”è¡Œæ•°æ®æ— Fallback
- ğŸ”„ **ç½®ä¿¡åº¦é™çº§**ï¼šFallbackå­—ç¬¦ç½®ä¿¡åº¦æœ€é«˜0.8ï¼Œä¸æ¨èç”¨äºæ­£å¼å–å

### **æŠ€æœ¯ä¿éšœæªæ–½**

```typescript
// æ ‡å‡†æ’ä»¶å¼€å‘æ¨¡æ¿
class StandardNamingPlugin {
  private charLoader: UnifiedCharacterLoader;
  
  constructor() {
    this.charLoader = UnifiedCharacterLoader.getInstance();
  }
  
  async execute() {
    await this.charLoader.initialize();
    
    // âœ… æ­£ç¡®çš„å­—ç¬¦è·å–
    const charInfo = this.charLoader.getCharacterInfo('å­—');
    
    // âœ… å¿…é¡»éªŒè¯æ ‡å‡†æ€§
    if (!charInfo?.isStandard) {
      throw new Error('éæ ‡å‡†å–åç”¨å­—');
    }
    
    // âœ… ä½¿ç”¨ç¹ä½“ç¬”ç”»è¿›è¡Œå‘½ç†è®¡ç®—
    const strokes = charInfo.strokes.traditional;
    
    // âœ… éªŒè¯æ•°æ®å®Œæ•´æ€§
    if (!this.validateCharacterData(charInfo)) {
      console.warn('å­—ç¬¦æ•°æ®ä¸å®Œæ•´ï¼Œå»ºè®®è°¨æ…ä½¿ç”¨');
    }
  }
}
```

---

## ğŸ“š æ•°æ®æ¥æºè¯¦ç»†è¯´æ˜

### I. å„é¡¹æ•°æ®çš„æƒå¨æ¥æº

#### 1. **å§“æ°åŸºç¡€æ•°æ®**
**æ•°æ®æ¥æº**: `public/data/characters/final-enhanced-character-database.json`
**æƒå¨ä¾æ®**:
- **ç¬”ç”»æ•°**: åŸºäºåº·ç†™å­—å…¸ç¬”ç”»æ ‡å‡†
- **äº”è¡Œå±æ€§**: ä¼ ç»Ÿå‘½ç†å­¦äº”è¡Œå½’ç±»æ³•åˆ™
- **æ‹¼éŸ³å£°è°ƒ**: ç°ä»£æ±‰è¯­æ ‡å‡†å‘éŸ³
- **ç¹ç®€ä½“å¯¹ç…§**: Unicodeæ ‡å‡†å­—ç¬¦é›†
- **éƒ¨é¦–**: ã€Šè¯´æ–‡è§£å­—ã€‹åŠåº·ç†™å­—å…¸éƒ¨é¦–åˆ†ç±»

**å®é™…æŸ¥è¯¢éªŒè¯**:
```typescript
// æ–‡ä»¶ä½ç½®: ç¬¬17284-17303è¡Œ
"å´": {
  "strokes": {"simplified": 7, "traditional": 7, "kangxi": 7}, // âœ“ åº·ç†™å­—å…¸7ç”»
  "wuxing": "mu",                                               // âœ“ ä¼ ç»Ÿäº”è¡Œå½’æœ¨
  "primaryPinyin": "wÃº",                                        // âœ“ æ ‡å‡†è¯»éŸ³
  "tone": 2,                                                   // âœ“ é˜³å¹³å£°è°ƒ
  "traditional": "å³"                                           // âœ“ Unicodeç¹ä½“
}
```

#### 2. **ç™¾å®¶å§“æ’å**
**æ•°æ®æ¥æº**: `public/data/names/baijiaxing.json`
**æƒå¨ä¾æ®**: 
- ä¼ ç»Ÿã€Šç™¾å®¶å§“ã€‹æ–‡çŒ® (å®‹ä»£èµµé’±å­™ææ’åº)
- ç°ä»£å…¬å®‰éƒ¨æˆ·ç±ç»Ÿè®¡ (å®é™…äººå£åˆ†å¸ƒ)

**æŸ¥è¯¢éªŒè¯**:
```typescript
// æ–‡ä»¶ä½ç½®: ç¬¬6è¡Œ
"èµµé’±å­™æï¼Œå‘¨å´éƒ‘ç‹ã€‚"
// è®¡ç®—: èµµ(1) é’±(2) å­™(3) æ(4) å‘¨(5) å´(6) âœ“
```

#### 3. **å…«å­—å››æŸ±è®¡ç®—**
**æ•°æ®æ¥æº**: ä¼ ç»Ÿå†æ³•æ¨ç®— + ä¸‡å¹´å†å¯¹ç…§
**è®¡ç®—ä¾æ®**:
- **å¹²æ”¯çºªå¹´æ³•**: å…­åç”²å­å¾ªç¯ä½“ç³»
- **èŠ‚æ°”å†æ³•**: äºŒåå››èŠ‚æ°”åˆ’åˆ†æœˆä»¤
- **æ—¶è¾°ç³»ç»Ÿ**: åäºŒæ—¶è¾°å¯¹åº”åœ°æ”¯

**æ¨ç®—è¿‡ç¨‹éªŒè¯**:
```typescript
// 2025-10-31 10:00 å…«å­—æ¨ç®—
å¹´æŸ±: 2025å¹´ = ç”²å­çºªå¹´ç¬¬42å¹´ = ä¹™å·³å¹´  âœ“
æœˆæŸ±: å†œå†ä¹æœˆ = æˆŒæœˆï¼Œä¹™å¹´ä¸™æœˆ = ä¸™æˆŒæœˆ  âœ“  
æ—¥æŸ±: éœ€ä¸‡å¹´å†æŸ¥è¯¢ = æˆŠå­æ—¥ (ç¤ºä¾‹)  âš ï¸
æ—¶æŸ±: å·³æ—¶(9-11ç‚¹) + æˆŠæ—¥ = ä¸å·³æ—¶  âœ“
```

#### 4. **äº”è¡Œå–œç”¨ç¥åˆ†æ**
**ç†è®ºä¾æ®**: ä¼ ç»Ÿå‘½ç†å­¦æ‰¶æŠ‘ç”¨ç¥æ³•
**åˆ†æåŸç†**:
```typescript
å…«å­—: ä¹™å·³ ä¸™æˆŒ æˆŠå­ ä¸å·³
äº”è¡Œç»Ÿè®¡: æœ¨1 ç«4 åœŸ2 é‡‘0 æ°´1
æ—¥ä¸»åˆ†æ: æˆŠåœŸç”ŸäºæˆŒæœˆ(åœŸæ—º) + ç«å¤š = ç‡¥çƒ­åå¼º
ç”¨ç¥æ¨æ–­: éœ€é‡‘æ°´è°ƒå€™æ¶¦ç‡¥  âœ“ ç¬¦åˆä¼ ç»Ÿç†è®º
```

#### 5. **ç”Ÿè‚–ç”¨å­—è§„å¾‹**
**ç†è®ºä¾æ®**: ä¼ ç»Ÿç”Ÿè‚–è±¡å¾å­¦ + åŠ¨ç‰©ä¹ æ€§è”æƒ³
**è›‡å¹´ç”¨å­—åŸç†**:
```typescript
ç”Ÿè‚–ç‰¹å¾: æ –æ¯æ´ç©´ã€å¤œè¡Œã€å†·è¡€åŠ¨ç‰©
å–œç”¨æ¨ç†:
- æ´ç©´å±…ä½ â†’ å–œ"å£"ã€"å®€"å­—æ ¹  âœ“ ä¼ ç»Ÿç†è®º
- é¿æ—¥å…‰æš´æ™’ â†’ å¿Œ"æ—¥"ã€"å…‰"å­—æ ¹  âœ“ ä¹ æ€§è”æƒ³
- æ ‘æ—æ –æ¯ â†’ å–œ"æœ¨"ã€"æ—"å­—æ ¹  âœ“ ç¯å¢ƒåå¥½
```

#### 6. **ä¸‰æ‰äº”æ ¼è®¡ç®—**
**ç†è®ºä¾æ®**: æ—¥æœ¬ä¼ å…¥çš„å§“åå­¦æ•°ç†åˆ†ææ³•
**è®¡ç®—å…¬å¼éªŒè¯**:
```typescript
// å´(7ç”») + å®£(9ç”») + æ¶¦(16ç”»)
å¤©æ ¼: 7 + 1 = 8        âœ“ å•å§“è§„åˆ™
äººæ ¼: 7 + 9 = 16       âœ“ å§“+åé¦–å­—
åœ°æ ¼: 9 + 16 = 25      âœ“ åå­—ä¸¤å­—å’Œ
å¤–æ ¼: 32 - 16 + 1 = 17 âœ“ æ ‡å‡†å…¬å¼
æ€»æ ¼: 7 + 9 + 16 = 32  âœ“ å…¨éƒ¨ç¬”ç”»å’Œ
```

### J. æ•°æ®éªŒè¯æ–¹æ³•

#### 1. **äº¤å‰éªŒè¯æœºåˆ¶**
```typescript
// å¤šæ•°æ®æºäº¤å‰éªŒè¯
ä¸»æ•°æ®æº: final-enhanced-character-database.json
éªŒè¯æº1: real-stroke-data.json (ç¬”ç”»éªŒè¯)
éªŒè¯æº2: wuxing_dict_jianti.json (äº”è¡ŒéªŒè¯)  
éªŒè¯æº3: pinyin-processed.json (æ‹¼éŸ³éªŒè¯)

// ä¸€è‡´æ€§æ£€æŸ¥
if (ä¸»æ•°æ® !== éªŒè¯æ•°æ®) {
  è®°å½•å·®å¼‚å¹¶é€‰æ‹©æ›´å¯é çš„æ¥æº;
  è°ƒæ•´ç½®ä¿¡åº¦è¯„åˆ†;
}
```

#### 2. **ç½®ä¿¡åº¦è¯„ä¼°æ ‡å‡†**
```typescript
ç½®ä¿¡åº¦è®¡ç®—:
- enhanced-databaseå‘½ä¸­: 1.0 (æœ€é«˜å¯ä¿¡åº¦)
- å¤šæºæ•°æ®ä¸€è‡´: +0.1 
- ç™¾å®¶å§“æ”¶å½•: +0.1
- å®Œæ•´å­—ä¹‰ä¿¡æ¯: +0.05
- ç¹ç®€ä½“å¯¹ç…§: +0.05
```

### K. æ½œåœ¨æ•°æ®é£é™©ä¸å¤„ç†

#### 1. **å·²çŸ¥é™åˆ¶**
- **æ—¥æŸ±è®¡ç®—**: éœ€è¦ç²¾ç¡®ä¸‡å¹´å†å¯¹ç…§ï¼Œç¤ºä¾‹ä¸­ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
- **åœ°åŸŸå·®å¼‚**: éƒ¨åˆ†æ‹¼éŸ³åœ¨æ–¹è¨€åŒºå¯èƒ½æœ‰å·®å¼‚
- **ç‰ˆæœ¬æ›´æ–°**: æ•°æ®åº“å¯èƒ½å­˜åœ¨å†å²ç‰ˆæœ¬å·®å¼‚

#### 2. **é£é™©ç¼“è§£æªæ–½**
- **Fallbackæœºåˆ¶**: å¤šå±‚æ•°æ®æºä¿éšœ
- **ç½®ä¿¡åº¦æ ‡è®°**: æ˜ç¡®æ•°æ®å¯é æ€§
- **æ¥æºè¿½æº¯**: è®°å½•æ¯é¡¹æ•°æ®çš„å…·ä½“æ¥æº
- **å®šæœŸéªŒè¯**: ä¸æƒå¨å­—å…¸å®šæœŸæ¯”å¯¹æ›´æ–°

---

## ğŸ¯ **æ’ä»¶è¾“å‡ºå†…å®¹çš„æ ¸å¿ƒä½œç”¨åˆ†æ**

æ‚¨é—®åˆ°è¿™äº›è¾“å‡ºå†…å®¹çš„ä½œç”¨ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å…³é”®çš„é—®é¢˜ã€‚è®©æˆ‘è¯¦ç»†è¯´æ˜ **GenderPlugin** å’Œ **BirthTimePlugin** è¾“å‡ºå†…å®¹åœ¨æ•´ä¸ªå–åç³»ç»Ÿä¸­çš„é‡è¦ä½œç”¨ï¼š

### **ğŸ”— ç®€åŒ–åçš„æ•°æ®æµè½¬å…³ç³»å›¾**
```
Layer 1: åŸºç¡€ä¿¡æ¯å±‚
â”œâ”€â”€ SurnamePlugin â†’ [å§“æ°åŸºç¡€å±æ€§] â†’ Layer 4 WuxingCharPlugin, Layer 6 SancaiScoringPlugin
â”œâ”€â”€ GenderPlugin â†’ [å…¸ç±æ¥æºåå¥½ + å­—ç¬¦è¿‡æ»¤åå¥½] â†’ Layer 4 å­—ç¬¦ç­›é€‰æ’ä»¶  
â””â”€â”€ BirthTimePlugin â†’ [æ—¶é—´å‘½ç†æ•°æ®] â†’ Layer 2 æ‰€æœ‰å‘½ç†åˆ†ææ’ä»¶

Layer 2: å‘½ç†åˆ†æå±‚ (ä¾èµ– Layer 1 è¾“å‡º)
â”œâ”€â”€ BaziPlugin (ä¾èµ– BirthTimePlugin å†œå†+æ—¶è¾°æ•°æ®)
â”œâ”€â”€ WuxingPlugin (ä¾èµ– BirthTimePlugin èŠ‚æ°”+å¹²æ”¯æ•°æ®)
â””â”€â”€ ZodiacPlugin (ä¾èµ– BirthTimePlugin ç”Ÿè‚–æ•°æ®)

Layer 3: é€‰å­—ç­–ç•¥å±‚ (ä¾èµ– Layer 1+2 è¾“å‡º)
â””â”€â”€ ç­–ç•¥æ’ä»¶ä½¿ç”¨å‘½ç†åˆ†æç»“æœï¼Œæ— éœ€å¤æ‚çš„æ€§åˆ«åå¥½é…ç½®

Layer 4: å­—ç¬¦ç­›é€‰å±‚ (ä¾èµ–å‰é¢æ‰€æœ‰è¾“å‡º)
â”œâ”€â”€ WuxingCharPlugin (ä½¿ç”¨ GenderPlugin.characterFilter)
â”œâ”€â”€ StrokePlugin (è€ƒè™‘æ€§åˆ«é€‚å®œæ€§)
â”œâ”€â”€ PhoneticPlugin (åº”ç”¨æ€§åˆ«è¯»éŸ³åå¥½)
â””â”€â”€ PoetryPlugin (ä½¿ç”¨ GenderPlugin.literarySourcePreference)

Layer 5-6: åå­—ç”Ÿæˆå’Œè¯„åˆ†å±‚
```

### **ğŸ“Š GenderPlugin ç®€åŒ–è¾“å‡ºä½œç”¨è¯¦è§£**

#### **1. literarySourcePreference (å…¸ç±æ¥æºåå¥½)**
```typescript
ä½œç”¨ç›®æ ‡: Layer 4 PoetryPlugin (å¦‚æœå­˜åœ¨)
å…·ä½“åº”ç”¨:
  - è·å–æ€§åˆ«åå¥½: context.genderInfo.literarySourcePreference
  - é¦–é€‰å…¸ç±: ["æ¥šè¾"] â†’ ä¼˜å…ˆä»æ¥šè¾ä¸­é€‰å­—
  - æ¬¡é€‰å…¸ç±: ["è®ºè¯­", "æ˜“ç»"] â†’ è¡¥å……é€‰å­—æ¥æº  
  - é¿å…å…¸ç±: ["è¯—ç»"] â†’ ä¸ä»è¯—ç»é€‰å­—
  
å½±å“ç»“æœ: åå­—ä½“ç°æ­£ç¡®çš„"ç”·æ¥šè¾å¥³è¯—ç»"ä¼ ç»Ÿï¼Œæ–‡åŒ–ç‰¹å¾æ˜ç¡®
```

#### **2. characterFilter (å­—ç¬¦è¿‡æ»¤åå¥½)**
```typescript
ä½œç”¨ç›®æ ‡: Layer 4 å­—ç¬¦ç­›é€‰å±‚æ’ä»¶
å…·ä½“åº”ç”¨:
  - WuxingCharPlugin: åº”ç”¨æ€§åˆ«è¿‡æ»¤è§„åˆ™
    * preferMasculine: true â†’ ä¼˜å…ˆé€‰æ‹©é˜³åˆšç‰¹è´¨å­—ç¬¦
    * avoidFeminine: true â†’ é¿å…è¿‡äºæŸ”ç¾çš„å­—ç¬¦
    * culturalDepth: 0.9 â†’ æé«˜æ–‡åŒ–å†…æ¶µå­—ç¬¦æƒé‡
  
  - StrokePlugin: åœ¨ç¬”ç”»ç­›é€‰æ—¶è€ƒè™‘æ€§åˆ«é€‚å®œæ€§
  - PhoneticPlugin: è°ƒæ•´è¯»éŸ³çš„æ€§åˆ«å€¾å‘æ€§è¯„ä¼°
  
å½±å“ç»“æœ: ç¡®ä¿é€‰å‡ºçš„å­—ç¬¦ç¬¦åˆç”·æ€§æ–‡åŒ–ç‰¹å¾ï¼Œé¿å…æ€§åˆ«ç‰¹å¾æ··æ·†
```

### **â° BirthTimePlugin è¾“å‡ºä½œç”¨è¯¦è§£**

#### **1. å†œå†ä¿¡æ¯ (lunar)**
```typescript
ä½œç”¨ç›®æ ‡: Layer 2 BaziPlugin
å…·ä½“åº”ç”¨:
  - year: 2025, month: 9, day: 9 â†’ è®¡ç®—å‡†ç¡®çš„å…«å­—å››æŸ±
  - å†œå†ä¹æœˆåˆä¹ â†’ ç¡®å®šæ—¥æŸ±å¹²æ”¯
  
å½±å“ç»“æœ: å…«å­—åˆ†æçš„å‡†ç¡®æ€§ï¼Œç›´æ¥å½±å“äº”è¡Œå¹³è¡¡åˆ¤æ–­
```

#### **2. å¹²æ”¯çºªå¹´ (ganZhi)**
```typescript
ä½œç”¨ç›®æ ‡: Layer 2 WuxingPlugin, BaziPlugin
å…·ä½“åº”ç”¨:
  - "ä¹™å·³å¹´" â†’ ä¹™æœ¨å·³ç«ï¼Œå¹´æŸ±äº”è¡Œå±æ€§
  - ä¸æœˆæ—¥æ—¶æŸ±ç»„åˆ â†’ å®Œæ•´çš„å››æŸ±å…«å­—ä½“ç³»
  
å½±å“ç»“æœ: ç²¾ç¡®çš„äº”è¡Œæ—ºè¡°åˆ†æï¼ŒæŒ‡å¯¼è¡¥ç›Šäº”è¡Œçš„é€‰å­—æ–¹å‘
```

#### **3. ç”Ÿè‚–ä¿¡æ¯ (zodiac)**
```typescript
ä½œç”¨ç›®æ ‡: Layer 2 ZodiacPlugin
å…·ä½“åº”ç”¨:
  - "è›‡" â†’ ç”Ÿè‚–è›‡çš„å–œå¿Œç”¨å­—åˆ†æ
  - è›‡å–œ"å£"ã€"å®€"ã€"æœ¨"ç­‰åæ—
  - è›‡å¿Œ"è™"ã€"çŒª"ç­‰å†²å…‹å­—ç¬¦
  
å½±å“ç»“æœ: åŸºäºç”Ÿè‚–ç‰¹å¾çš„å­—ç¬¦ç­›é€‰ï¼Œå¢å¼ºå‘½ç†åŒ¹é…åº¦
```

#### **4. èŠ‚æ°”å­£èŠ‚ (season)**
```typescript
ä½œç”¨ç›®æ ‡: Layer 2 WuxingPlugin
å…·ä½“åº”ç”¨:
  - æ·±ç§‹ + "é‡‘æ—ºåœŸç›¸æœ¨ä¼‘ç«å›šæ°´æ­»" â†’ äº”è¡Œæ—ºè¡°çŠ¶æ€
  - æŒ‡å¯¼äº”è¡Œè¡¥ç›Šæ–¹å‘ (éœ€è¦è¡¥æœ¨ç«ï¼Œå¿Œè®³è¿‡å¤šé‡‘åœŸ)
  
å½±å“ç»“æœ: å­£èŠ‚æ€§äº”è¡Œè°ƒèŠ‚ï¼Œç¡®ä¿å‘½ç†å¹³è¡¡
```

#### **5. æ—¶è¾°åˆ†æ (timeAnalysis)**
```typescript
ä½œç”¨ç›®æ ‡: Layer 2 BaziPlugin, WuxingPlugin
å…·ä½“åº”ç”¨:
  - å·³æ—¶ + ç«å…ƒç´  + "é˜³æ°”æ—ºç››" â†’ æ—¶æŸ±å±æ€§ç¡®å®š
  - å½±å“æ•´ä½“å…«å­—çš„äº”è¡Œå¹³è¡¡è®¡ç®—
  
å½±å“ç»“æœ: æ—¶è¾°ç²¾ç¡®åº¦ç›´æ¥å½±å“å‘½ç†åˆ†æçš„æ·±åº¦å’Œå‡†ç¡®æ€§
```

#### **6. ç¡®å®šæ€§ç­‰çº§ (certaintyLevel)**
```typescript
ä½œç”¨ç›®æ ‡: æ•´ä¸ªæ’ä»¶ç³»ç»Ÿçš„æ‰§è¡Œç­–ç•¥
å…·ä½“åº”ç”¨:
  - Level 1 (å®Œå…¨ç¡®å®š) â†’ å¯ç”¨æ‰€æœ‰å‘½ç†åˆ†ææ’ä»¶
  - Level 2 (éƒ¨åˆ†ç¡®å®š) â†’ å¯ç”¨ç®€åŒ–ç‰ˆåˆ†æ
  - Level 3+ â†’ é™çº§ä¸ºåŸºç¡€åˆ†æ
  
å½±å“ç»“æœ: åŠ¨æ€è°ƒæ•´åˆ†ææ·±åº¦ï¼Œç¡®ä¿ç»“æœå¯é æ€§
```

### **ğŸš¨ ç¼ºå¤±è¾“å‡ºçš„ä¸¥é‡åæœ**

#### **å¦‚æœ GenderPlugin è¾“å‡ºç¼ºå¤±ï¼š**
- âŒ **å…¸ç±é€‰æ‹©å¤±å»æ–¹å‘**ï¼šæ— æ³•ä½“ç°"ç”·æ¥šè¾å¥³è¯—ç»"ä¼ ç»Ÿ
- âŒ **æ€§åˆ«ç‰¹å¾æ··æ·†**ï¼šå¯èƒ½å‡ºç°"ç”·å­©å–å¥³æ€§åŒ–åå­—"çš„é—®é¢˜  
- âŒ **å­—ç¬¦ç­›é€‰å¤±æ•ˆ**ï¼šæ— æ³•åº”ç”¨æ€§åˆ«é€‚å®œæ€§è¿‡æ»¤è§„åˆ™

#### **å¦‚æœ BirthTimePlugin è¾“å‡ºç¼ºå¤±ï¼š**
- âŒ **å‘½ç†åˆ†æå…¨é¢å¤±æ•ˆ**ï¼šBaziPluginã€WuxingPluginã€ZodiacPlugin æ— æ³•æ­£å¸¸å·¥ä½œ
- âŒ **äº”è¡Œå¹³è¡¡åˆ¤æ–­é”™è¯¯**ï¼šæ— æ³•å‡†ç¡®è¡¥ç›Šæ‰€éœ€äº”è¡Œ
- âŒ **ç”Ÿè‚–åˆ†æç¼ºå¤±**ï¼šå¤±å»é‡è¦çš„é€‰å­—ä¾æ®
- âŒ **æ•´ä¸ªå‘½ç†ä½“ç³»å´©å¡Œ**ï¼šå–åæ²¦ä¸ºéšæœºç»„åˆ

### **ğŸ’¡ ç®€åŒ–è®¾è®¡çš„æ ¸å¿ƒä»·å€¼**

ç»è¿‡ç®€åŒ–åï¼Œè¿™ä¸¤ä¸ªæ’ä»¶çš„è¾“å‡ºæ›´åŠ ç²¾å‡†å’Œå®ç”¨ï¼š

**GenderPluginï¼ˆç®€åŒ–ç‰ˆï¼‰**ï¼š
- âœ… **å…¸ç±ä¼˜å…ˆçº§æ˜ç¡®**ï¼šç›´æ¥æ”¯æŒ"ç”·æ¥šè¾å¥³è¯—ç»"ä¼ ç»Ÿ
- âœ… **å­—ç¬¦è¿‡æ»¤å®ç”¨**ï¼špreferMasculine/avoidFeminine ç­‰è§„åˆ™å¯ç›´æ¥åº”ç”¨
- âœ… **é¿å…è¿‡åº¦è®¾è®¡**ï¼šå»é™¤äº†æ— æ³•å®ç°çš„å¤æ‚è¯­ä¹‰åˆ†æ

**BirthTimePluginï¼ˆä¿æŒåŸæœ‰è®¾è®¡ï¼‰**ï¼š
- âœ… **å‘½ç†æ•°æ®å®Œæ•´**ï¼šä¸ºå…«å­—ã€äº”è¡Œã€ç”Ÿè‚–åˆ†ææä¾›ç²¾ç¡®åŸºç¡€
- âœ… **æ—¶é—´è½¬æ¢å‡†ç¡®**ï¼šå…¬å†å†œå†å¹²æ”¯å†çš„å¯é è½¬æ¢
- âœ… **ç¡®å®šæ€§ç­‰çº§**ï¼šåŠ¨æ€è°ƒæ•´åˆ†ææ·±åº¦

**æ•´ä½“æ•ˆæœ**ï¼š
1. **å®ç”¨æ€§æ›´å¼º** - æ¯ä¸ªè¾“å‡ºéƒ½æœ‰æ˜ç¡®çš„ä½¿ç”¨åœºæ™¯
2. **å®ç°éš¾åº¦é™ä½** - é¿å…äº†å¤æ‚çš„è¯­ä¹‰åˆ†æå’Œæ–‡åŒ–ç‰¹è´¨åŒ¹é…
3. **ç³»ç»Ÿç¨³å®šæ€§æé«˜** - ç®€åŒ–çš„é…ç½®å‡å°‘äº†å‡ºé”™å¯èƒ½æ€§
4. **æ–‡åŒ–ä¼ ç»Ÿä¿æŒ** - æ ¸å¿ƒçš„æ€§åˆ«é€‰å­—åŸåˆ™å¾—åˆ°æ­£ç¡®ä½“ç°

**è¿™æ ·çš„ç®€åŒ–è®¾è®¡æ—¢ä¿æŒäº†å–åç³»ç»Ÿçš„æ–‡åŒ–å†…æ¶µï¼Œåˆç¡®ä¿äº†æŠ€æœ¯å®ç°çš„å¯è¡Œæ€§ã€‚**

---

*æ–‡æ¡£ç”Ÿæˆæ—¶é—´ï¼š2024-12-19*  
*ç¤ºä¾‹è®¡ç®—ï¼šå´å§“ç”·å­©ï¼Œ2025-10-31 10:00å‡ºç”Ÿ*  
*æœ€ç»ˆæ¨èï¼šå´å®£æ¶¦ (89.2åˆ†ï¼Œä¼˜ç§€ç­‰çº§)*  
*è®¡ç®—æ’ä»¶ï¼šå…­å±‚æ¶æ„ï¼Œ17ä¸ªæ’ä»¶å®Œæ•´æ‰§è¡Œ*  
*æ•°æ®æŸ¥è¯¢ï¼šåŸºäºå®é™…JSONæ•°æ®æ–‡ä»¶çš„æ ‡å‡†æŸ¥è¯¢æ¥å£*  
*æ•°æ®æ¥æºï¼šæƒå¨å­—å…¸ + ä¼ ç»Ÿå‘½ç†å­¦ + ç°ä»£ç»Ÿè®¡å­¦*


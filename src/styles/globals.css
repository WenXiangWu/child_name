@tailwind base;
@tailwind components;
@tailwind utilities;

/* 设计系统基础变量 */
:root {
  /* 色彩系统 */
  --color-cultural-red: #dc2626;
  --color-cultural-gold: #f59e0b;
  --color-cultural-jade: #059669;
  --color-cultural-ink: #1f2937;
  --color-cultural-paper: #fef7ed;
  
  /* 字体系统 */
  --font-heading: 'Noto Serif SC', 'Source Han Serif SC', serif;
  --font-body: 'Noto Sans SC', 'PingFang SC', 'Microsoft YaHei', sans-serif;
  --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
  
  /* 间距系统 */
  --space-unit: 0.25rem; /* 4px */
  
  /* 阴影系统 */
  --shadow-cultural: 0 4px 6px -1px rgba(220, 38, 38, 0.1), 0 2px 4px -1px rgba(220, 38, 38, 0.06);
  
  /* 动画时长 */
  --duration-fast: 150ms;
  --duration-normal: 300ms;
  --duration-slow: 500ms;
  
  /* 边框圆角 */
  --radius-sm: 0.375rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;
  
  /* 原有变量 */
  --foreground-rgb: 31, 41, 55; /* cultural-ink */
  --background-rgb: 255, 255, 255;
}

/* 全局基础样式 */
* {
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  font-family: var(--font-body);
  line-height: 1.6;
  color: var(--color-cultural-ink);
  background-color: #ffffff;
}

/* 无障碍访问优化 */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* 高对比度模式支持 */
@media (prefers-contrast: high) {
  :root {
    --color-cultural-red: #b91c1c;
    --color-cultural-gold: #d97706;
    --color-cultural-jade: #047857;
  }
}

/* 安全区域适配 */
.safe-area-pt {
  padding-top: env(safe-area-inset-top);
}

.safe-area-pb {
  padding-bottom: env(safe-area-inset-bottom);
}

.safe-area-pl {
  padding-left: env(safe-area-inset-left);
}

.safe-area-pr {
  padding-right: env(safe-area-inset-right);
}

/* 组件基础样式 */
@layer components {
  /* 按钮组件样式 */
  .btn-primary {
    @apply bg-gradient-to-r from-cultural-red to-cultural-gold text-white px-6 py-3 rounded-xl font-semibold;
    @apply shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105;
    @apply focus:outline-none focus:ring-4 focus:ring-cultural-gold/30;
  }
  
  .btn-primary:active {
    @apply scale-95;
  }
  
  .btn-primary.loading {
    @apply opacity-80 cursor-not-allowed;
  }
  
  .btn-secondary {
    @apply border-2 border-cultural-jade text-cultural-jade px-6 py-3 rounded-xl font-semibold;
    @apply hover:bg-cultural-jade hover:text-white transition-all duration-300;
    @apply focus:outline-none focus:ring-4 focus:ring-cultural-jade/30;
  }
  
  .btn-cultural {
    @apply bg-cultural-ink text-cultural-paper px-6 py-3 rounded-xl font-semibold;
    @apply hover:bg-cultural-ink/90 transition-all duration-300;
    @apply focus:outline-none focus:ring-4 focus:ring-cultural-ink/30;
  }
  
  /* 卡片组件样式 */
  .card-hover {
    @apply transition-all duration-300 transform hover:scale-105 hover:shadow-xl;
    @apply hover:bg-gradient-to-br hover:from-white hover:to-gray-50;
  }
  
  /* 表单组件样式 */
  .form-input {
    @apply w-full px-4 py-3 border-2 border-gray-300 rounded-xl;
    @apply focus:border-cultural-gold focus:ring-4 focus:ring-cultural-gold/20;
    @apply transition-all duration-200;
  }
  
  .form-input:focus {
    @apply shadow-lg shadow-cultural-gold/20;
  }
  
  /* 文化装饰元素 */
  .cultural-decoration::before {
    content: '';
    @apply absolute top-0 left-0 w-full h-1;
    @apply bg-gradient-to-r from-cultural-red via-cultural-gold to-cultural-jade;
  }
  
  /* 渐变背景 */
  .bg-cultural-gradient {
    @apply bg-gradient-to-br from-cultural-paper via-white to-primary-50;
  }
  
  .bg-cultural-hero {
    @apply bg-gradient-to-br from-cultural-paper via-white to-cultural-jade-50;
  }
  
  /* 下拉菜单优化 - 确保最高层级显示 */
  .dropdown-container {
    position: relative !important;
    z-index: 1000 !important;
  }
  
  /* 下拉菜单样式 - 使用极高的z-index */
  .dropdown-menu {
    position: absolute !important;
    z-index: 999999 !important;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
    border: 2px solid rgba(212, 175, 55, 0.2) !important;
    background: white !important;
    backdrop-filter: blur(8px) !important;
  }
  
  /* 确保下拉菜单在所有情况下都可见 */
  .dropdown-menu.opacity-100 {
    opacity: 1 !important;
    visibility: visible !important;
    transform: translateY(0) !important;
    pointer-events: auto !important;
    display: block !important;
  }
  
  /* 确保下拉菜单内容可见 */
  .dropdown-menu * {
    pointer-events: auto !important;
    z-index: inherit !important;
  }
  
  /* Header组件确保在最顶层 */
  header {
    z-index: 1000 !important;
    position: relative !important;
  }
  
  /* 导航栏确保在Header内的最顶层 */
  nav {
    z-index: 1001 !important;
    position: relative !important;
  }
  
  /* 强制所有下拉菜单显示在最顶层 */
  .dropdown-menu,
  .dropdown-menu.absolute {
    z-index: 999999 !important;
    position: absolute !important;
  }

  /* 传统文化装饰元素 */
  .cultural-pattern::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: 
      radial-gradient(circle at 20% 80%, rgba(220, 38, 38, 0.05) 0%, transparent 50%),
      radial-gradient(circle at 80% 20%, rgba(245, 158, 11, 0.05) 0%, transparent 50%),
      radial-gradient(circle at 40% 40%, rgba(5, 150, 105, 0.05) 0%, transparent 50%);
    pointer-events: none;
  }

  /* 文字装饰效果 */
  .text-cultural-gradient {
    @apply bg-gradient-to-r from-cultural-red via-cultural-gold to-cultural-jade bg-clip-text text-transparent;
  }

  /* 传统边框装饰 */
  .cultural-border {
    position: relative;
  }

  .cultural-border::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(45deg, var(--color-cultural-red), var(--color-cultural-gold), var(--color-cultural-jade));
    border-radius: inherit;
    z-index: -1;
    opacity: 0.3;
  }

  /* 毛笔字效果 */
  .brush-text {
    font-family: var(--font-heading);
    text-shadow: 
      1px 1px 2px rgba(31, 41, 55, 0.1),
      2px 2px 4px rgba(31, 41, 55, 0.05);
    letter-spacing: 0.05em;
  }

  /* 印章效果 */
  .seal-effect {
    position: relative;
    display: inline-block;
  }

  .seal-effect::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 120%;
    height: 120%;
    border: 2px solid var(--color-cultural-red);
    border-radius: 50%;
    opacity: 0.6;
    z-index: -1;
  }

  /* 传统文化动画效果 */
  @keyframes cultural-glow {
    0%, 100% { 
      box-shadow: 0 0 20px rgba(245, 158, 11, 0.3);
    }
    50% { 
      box-shadow: 0 0 30px rgba(245, 158, 11, 0.5), 0 0 40px rgba(220, 38, 38, 0.2);
    }
  }

  .cultural-glow {
    animation: cultural-glow 3s ease-in-out infinite;
  }

  /* 文字呼吸效果 */
  @keyframes text-breathe {
    0%, 100% { 
      opacity: 0.8;
      transform: scale(1);
    }
    50% { 
      opacity: 1;
      transform: scale(1.02);
    }
  }

  .text-breathe {
    animation: text-breathe 4s ease-in-out infinite;
  }

  /* 传统色彩渐变背景 */
  .bg-cultural-radial {
    background: radial-gradient(ellipse at center,
      rgba(254, 247, 237, 1) 0%,
      rgba(255, 255, 255, 0.95) 30%,
      rgba(245, 158, 11, 0.05) 70%,
      rgba(220, 38, 38, 0.02) 100%
    );
  }

  /* 优化滚动条样式 */
  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: rgba(254, 247, 237, 0.5);
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb {
    background: linear-gradient(to bottom, var(--color-cultural-gold), var(--color-cultural-red));
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(to bottom, var(--color-cultural-red), var(--color-cultural-jade));
  }
}